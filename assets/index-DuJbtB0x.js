function oA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var VF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function aA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var M1={exports:{}},fc={},L1={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Va=Symbol.for("react.element"),lA=Symbol.for("react.portal"),uA=Symbol.for("react.fragment"),cA=Symbol.for("react.strict_mode"),hA=Symbol.for("react.profiler"),dA=Symbol.for("react.provider"),fA=Symbol.for("react.context"),mA=Symbol.for("react.forward_ref"),pA=Symbol.for("react.suspense"),gA=Symbol.for("react.memo"),yA=Symbol.for("react.lazy"),uy=Symbol.iterator;function vA(t){return t===null||typeof t!="object"?null:(t=uy&&t[uy]||t["@@iterator"],typeof t=="function"?t:null)}var O1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F1=Object.assign,j1={};function js(t,e,n){this.props=t,this.context=e,this.refs=j1,this.updater=n||O1}js.prototype.isReactComponent={};js.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};js.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function B1(){}B1.prototype=js.prototype;function gm(t,e,n){this.props=t,this.context=e,this.refs=j1,this.updater=n||O1}var ym=gm.prototype=new B1;ym.constructor=gm;F1(ym,js.prototype);ym.isPureReactComponent=!0;var cy=Array.isArray,$1=Object.prototype.hasOwnProperty,vm={current:null},U1={key:!0,ref:!0,__self:!0,__source:!0};function z1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)$1.call(e,r)&&!U1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Va,type:t,key:s,ref:o,props:i,_owner:vm.current}}function wA(t,e){return{$$typeof:Va,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Va}function _A(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var hy=/\/+/g;function Ch(t,e){return typeof t=="object"&&t!==null&&t.key!=null?_A(""+t.key):e.toString(36)}function Gl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Va:case lA:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Ch(o,0):r,cy(i)?(n="",t!=null&&(n=t.replace(hy,"$&/")+"/"),Gl(i,e,n,"",function(c){return c})):i!=null&&(wm(i)&&(i=wA(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(hy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",cy(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+Ch(s,a);o+=Gl(s,e,n,u,i)}else if(u=vA(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+Ch(s,a++),o+=Gl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function yl(t,e,n){if(t==null)return t;var r=[],i=0;return Gl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function EA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Dt={current:null},Kl={transition:null},TA={ReactCurrentDispatcher:Dt,ReactCurrentBatchConfig:Kl,ReactCurrentOwner:vm};ge.Children={map:yl,forEach:function(t,e,n){yl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yl(t,function(){e++}),e},toArray:function(t){return yl(t,function(e){return e})||[]},only:function(t){if(!wm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=js;ge.Fragment=uA;ge.Profiler=hA;ge.PureComponent=gm;ge.StrictMode=cA;ge.Suspense=pA;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TA;ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=F1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=vm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)$1.call(e,u)&&!U1.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Va,type:t.type,key:i,ref:s,props:r,_owner:o}};ge.createContext=function(t){return t={$$typeof:fA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dA,_context:t},t.Consumer=t};ge.createElement=z1;ge.createFactory=function(t){var e=z1.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:mA,render:t}};ge.isValidElement=wm;ge.lazy=function(t){return{$$typeof:yA,_payload:{_status:-1,_result:t},_init:EA}};ge.memo=function(t,e){return{$$typeof:gA,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=Kl.transition;Kl.transition={};try{t()}finally{Kl.transition=e}};ge.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ge.useCallback=function(t,e){return Dt.current.useCallback(t,e)};ge.useContext=function(t){return Dt.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return Dt.current.useDeferredValue(t)};ge.useEffect=function(t,e){return Dt.current.useEffect(t,e)};ge.useId=function(){return Dt.current.useId()};ge.useImperativeHandle=function(t,e,n){return Dt.current.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return Dt.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return Dt.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return Dt.current.useMemo(t,e)};ge.useReducer=function(t,e,n){return Dt.current.useReducer(t,e,n)};ge.useRef=function(t){return Dt.current.useRef(t)};ge.useState=function(t){return Dt.current.useState(t)};ge.useSyncExternalStore=function(t,e,n){return Dt.current.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return Dt.current.useTransition()};ge.version="18.2.0";L1.exports=ge;var T=L1.exports;const X=aA(T),na=oA({__proto__:null,default:X},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xA=T,SA=Symbol.for("react.element"),AA=Symbol.for("react.fragment"),CA=Object.prototype.hasOwnProperty,PA=xA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IA={key:!0,ref:!0,__self:!0,__source:!0};function W1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)CA.call(e,r)&&!IA.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:SA,type:t,key:s,ref:o,props:i,_owner:PA.current}}fc.Fragment=AA;fc.jsx=W1;fc.jsxs=W1;M1.exports=fc;var C=M1.exports,bd={},H1={exports:{}},tn={},q1={exports:{}},G1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,Y){var N=H.length;H.push(Y);e:for(;0<N;){var b=N-1>>>1,U=H[b];if(0<i(U,Y))H[b]=Y,H[N]=U,N=b;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Y=H[0],N=H.pop();if(N!==Y){H[0]=N;e:for(var b=0,U=H.length,W=U>>>1;b<W;){var Z=2*(b+1)-1,te=H[Z],ee=Z+1,Q=H[ee];if(0>i(te,N))ee<U&&0>i(Q,te)?(H[b]=Q,H[ee]=N,b=ee):(H[b]=te,H[Z]=N,b=Z);else if(ee<U&&0>i(Q,N))H[b]=Q,H[ee]=N,b=ee;else break e}}return Y}function i(H,Y){var N=H.sortIndex-Y.sortIndex;return N!==0?N:H.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,f=null,m=3,g=!1,v=!1,E=!1,k=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(H){for(var Y=n(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=H)r(c),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(c)}}function V(H){if(E=!1,_(H),!v)if(n(u)!==null)v=!0,Ae(L);else{var Y=n(c);Y!==null&&Ce(V,Y.startTime-H)}}function L(H,Y){v=!1,E&&(E=!1,A(y),y=-1),g=!0;var N=m;try{for(_(Y),f=n(u);f!==null&&(!(f.expirationTime>Y)||H&&!D());){var b=f.callback;if(typeof b=="function"){f.callback=null,m=f.priorityLevel;var U=b(f.expirationTime<=Y);Y=t.unstable_now(),typeof U=="function"?f.callback=U:f===n(u)&&r(u),_(Y)}else r(u);f=n(u)}if(f!==null)var W=!0;else{var Z=n(c);Z!==null&&Ce(V,Z.startTime-Y),W=!1}return W}finally{f=null,m=N,g=!1}}var F=!1,S=null,y=-1,P=5,I=-1;function D(){return!(t.unstable_now()-I<P)}function M(){if(S!==null){var H=t.unstable_now();I=H;var Y=!0;try{Y=S(!0,H)}finally{Y?R():(F=!1,S=null)}}else F=!1}var R;if(typeof w=="function")R=function(){w(M)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,ue=re.port2;re.port1.onmessage=M,R=function(){ue.postMessage(null)}}else R=function(){k(M,0)};function Ae(H){S=H,F||(F=!0,R())}function Ce(H,Y){y=k(function(){H(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,Ae(L))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(H){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var N=m;m=Y;try{return H()}finally{m=N}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,Y){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var N=m;m=H;try{return Y()}finally{m=N}},t.unstable_scheduleCallback=function(H,Y,N){var b=t.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?b+N:b):N=b,H){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=N+U,H={id:h++,callback:Y,priorityLevel:H,startTime:N,expirationTime:U,sortIndex:-1},N>b?(H.sortIndex=N,e(c,H),n(u)===null&&H===n(c)&&(E?(A(y),y=-1):E=!0,Ce(V,N-b))):(H.sortIndex=U,e(u,H),v||g||(v=!0,Ae(L))),H},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(H){var Y=m;return function(){var N=m;m=Y;try{return H.apply(this,arguments)}finally{m=N}}}})(G1);q1.exports=G1;var kA=q1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K1=T,Jt=kA;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Q1=new Set,ra={};function bi(t,e){Ts(t,e),Ts(t+"Capture",e)}function Ts(t,e){for(ra[t]=e,t=0;t<e.length;t++)Q1.add(e[t])}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dd=Object.prototype.hasOwnProperty,RA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dy={},fy={};function bA(t){return Dd.call(fy,t)?!0:Dd.call(dy,t)?!1:RA.test(t)?fy[t]=!0:(dy[t]=!0,!1)}function DA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function NA(t,e,n,r){if(e===null||typeof e>"u"||DA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mt[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mt[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mt[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mt[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mt[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mt[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mt[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mt[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mt[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var _m=/[\-:]([a-z])/g;function Em(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_m,Em);mt[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_m,Em);mt[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_m,Em);mt[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});mt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Tm(t,e,n,r){var i=mt.hasOwnProperty(e)?mt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(NA(e,n,i,r)&&(n=null),r||i===null?bA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ir=K1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vl=Symbol.for("react.element"),Ji=Symbol.for("react.portal"),Zi=Symbol.for("react.fragment"),xm=Symbol.for("react.strict_mode"),Nd=Symbol.for("react.profiler"),Y1=Symbol.for("react.provider"),X1=Symbol.for("react.context"),Sm=Symbol.for("react.forward_ref"),Vd=Symbol.for("react.suspense"),Md=Symbol.for("react.suspense_list"),Am=Symbol.for("react.memo"),dr=Symbol.for("react.lazy"),J1=Symbol.for("react.offscreen"),my=Symbol.iterator;function ho(t){return t===null||typeof t!="object"?null:(t=my&&t[my]||t["@@iterator"],typeof t=="function"?t:null)}var $e=Object.assign,Ph;function ko(t){if(Ph===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ph=e&&e[1]||""}return`
`+Ph+t}var Ih=!1;function kh(t,e){if(!t||Ih)return"";Ih=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{Ih=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ko(t):""}function VA(t){switch(t.tag){case 5:return ko(t.type);case 16:return ko("Lazy");case 13:return ko("Suspense");case 19:return ko("SuspenseList");case 0:case 2:case 15:return t=kh(t.type,!1),t;case 11:return t=kh(t.type.render,!1),t;case 1:return t=kh(t.type,!0),t;default:return""}}function Ld(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zi:return"Fragment";case Ji:return"Portal";case Nd:return"Profiler";case xm:return"StrictMode";case Vd:return"Suspense";case Md:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case X1:return(t.displayName||"Context")+".Consumer";case Y1:return(t._context.displayName||"Context")+".Provider";case Sm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Am:return e=t.displayName||null,e!==null?e:Ld(t.type)||"Memo";case dr:e=t._payload,t=t._init;try{return Ld(t(e))}catch{}}return null}function MA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ld(e);case 8:return e===xm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Z1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function LA(t){var e=Z1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function wl(t){t._valueTracker||(t._valueTracker=LA(t))}function ew(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Z1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function pu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Od(t,e){var n=e.checked;return $e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function py(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tw(t,e){e=e.checked,e!=null&&Tm(t,"checked",e,!1)}function Fd(t,e){tw(t,e);var n=Fr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jd(t,e.type,n):e.hasOwnProperty("defaultValue")&&jd(t,e.type,Fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function gy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jd(t,e,n){(e!=="number"||pu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ro=Array.isArray;function ms(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Bd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return $e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Ro(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fr(n)}}function nw(t,e){var n=Fr(e.value),r=Fr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function vy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $d(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _l,iw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_l=_l||document.createElement("div"),_l.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_l.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ia(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var jo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OA=["Webkit","ms","Moz","O"];Object.keys(jo).forEach(function(t){OA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),jo[e]=jo[t]})});function sw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||jo.hasOwnProperty(t)&&jo[t]?(""+e).trim():e+"px"}function ow(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=sw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var FA=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ud(t,e){if(e){if(FA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function zd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wd=null;function Cm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hd=null,ps=null,gs=null;function wy(t){if(t=Oa(t)){if(typeof Hd!="function")throw Error(z(280));var e=t.stateNode;e&&(e=vc(e),Hd(t.stateNode,t.type,e))}}function aw(t){ps?gs?gs.push(t):gs=[t]:ps=t}function lw(){if(ps){var t=ps,e=gs;if(gs=ps=null,wy(t),e)for(t=0;t<e.length;t++)wy(e[t])}}function uw(t,e){return t(e)}function cw(){}var Rh=!1;function hw(t,e,n){if(Rh)return t(e,n);Rh=!0;try{return uw(t,e,n)}finally{Rh=!1,(ps!==null||gs!==null)&&(cw(),lw())}}function sa(t,e){var n=t.stateNode;if(n===null)return null;var r=vc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var qd=!1;if(Yn)try{var fo={};Object.defineProperty(fo,"passive",{get:function(){qd=!0}}),window.addEventListener("test",fo,fo),window.removeEventListener("test",fo,fo)}catch{qd=!1}function jA(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Bo=!1,gu=null,yu=!1,Gd=null,BA={onError:function(t){Bo=!0,gu=t}};function $A(t,e,n,r,i,s,o,a,u){Bo=!1,gu=null,jA.apply(BA,arguments)}function UA(t,e,n,r,i,s,o,a,u){if($A.apply(this,arguments),Bo){if(Bo){var c=gu;Bo=!1,gu=null}else throw Error(z(198));yu||(yu=!0,Gd=c)}}function Di(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function dw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function _y(t){if(Di(t)!==t)throw Error(z(188))}function zA(t){var e=t.alternate;if(!e){if(e=Di(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return _y(i),t;if(s===r)return _y(i),e;s=s.sibling}throw Error(z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function fw(t){return t=zA(t),t!==null?mw(t):null}function mw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mw(t);if(e!==null)return e;t=t.sibling}return null}var pw=Jt.unstable_scheduleCallback,Ey=Jt.unstable_cancelCallback,WA=Jt.unstable_shouldYield,HA=Jt.unstable_requestPaint,qe=Jt.unstable_now,qA=Jt.unstable_getCurrentPriorityLevel,Pm=Jt.unstable_ImmediatePriority,gw=Jt.unstable_UserBlockingPriority,vu=Jt.unstable_NormalPriority,GA=Jt.unstable_LowPriority,yw=Jt.unstable_IdlePriority,mc=null,kn=null;function KA(t){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(mc,t,void 0,(t.current.flags&128)===128)}catch{}}var _n=Math.clz32?Math.clz32:XA,QA=Math.log,YA=Math.LN2;function XA(t){return t>>>=0,t===0?32:31-(QA(t)/YA|0)|0}var El=64,Tl=4194304;function bo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=bo(a):(s&=o,s!==0&&(r=bo(s)))}else o=n&~i,o!==0?r=bo(o):s!==0&&(r=bo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-_n(e),i=1<<n,r|=t[n],e&=~i;return r}function JA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-_n(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=JA(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function Kd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vw(){var t=El;return El<<=1,!(El&4194240)&&(El=64),t}function bh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ma(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_n(e),t[e]=n}function eC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-_n(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Im(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-_n(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ie=0;function ww(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _w,km,Ew,Tw,xw,Qd=!1,xl=[],Sr=null,Ar=null,Cr=null,oa=new Map,aa=new Map,yr=[],tC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ty(t,e){switch(t){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":oa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":aa.delete(e.pointerId)}}function mo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Oa(e),e!==null&&km(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function nC(t,e,n,r,i){switch(e){case"focusin":return Sr=mo(Sr,t,e,n,r,i),!0;case"dragenter":return Ar=mo(Ar,t,e,n,r,i),!0;case"mouseover":return Cr=mo(Cr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return oa.set(s,mo(oa.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,aa.set(s,mo(aa.get(s)||null,t,e,n,r,i)),!0}return!1}function Sw(t){var e=mi(t.target);if(e!==null){var n=Di(e);if(n!==null){if(e=n.tag,e===13){if(e=dw(n),e!==null){t.blockedOn=e,xw(t.priority,function(){Ew(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ql(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Wd=r,n.target.dispatchEvent(r),Wd=null}else return e=Oa(n),e!==null&&km(e),t.blockedOn=n,!1;e.shift()}return!0}function xy(t,e,n){Ql(t)&&n.delete(e)}function rC(){Qd=!1,Sr!==null&&Ql(Sr)&&(Sr=null),Ar!==null&&Ql(Ar)&&(Ar=null),Cr!==null&&Ql(Cr)&&(Cr=null),oa.forEach(xy),aa.forEach(xy)}function po(t,e){t.blockedOn===e&&(t.blockedOn=null,Qd||(Qd=!0,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,rC)))}function la(t){function e(i){return po(i,t)}if(0<xl.length){po(xl[0],t);for(var n=1;n<xl.length;n++){var r=xl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Sr!==null&&po(Sr,t),Ar!==null&&po(Ar,t),Cr!==null&&po(Cr,t),oa.forEach(e),aa.forEach(e),n=0;n<yr.length;n++)r=yr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<yr.length&&(n=yr[0],n.blockedOn===null);)Sw(n),n.blockedOn===null&&yr.shift()}var ys=ir.ReactCurrentBatchConfig,_u=!0;function iC(t,e,n,r){var i=Ie,s=ys.transition;ys.transition=null;try{Ie=1,Rm(t,e,n,r)}finally{Ie=i,ys.transition=s}}function sC(t,e,n,r){var i=Ie,s=ys.transition;ys.transition=null;try{Ie=4,Rm(t,e,n,r)}finally{Ie=i,ys.transition=s}}function Rm(t,e,n,r){if(_u){var i=Yd(t,e,n,r);if(i===null)$h(t,e,r,Eu,n),Ty(t,r);else if(nC(i,t,e,n,r))r.stopPropagation();else if(Ty(t,r),e&4&&-1<tC.indexOf(t)){for(;i!==null;){var s=Oa(i);if(s!==null&&_w(s),s=Yd(t,e,n,r),s===null&&$h(t,e,r,Eu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else $h(t,e,r,null,n)}}var Eu=null;function Yd(t,e,n,r){if(Eu=null,t=Cm(r),t=mi(t),t!==null)if(e=Di(t),e===null)t=null;else if(n=e.tag,n===13){if(t=dw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Eu=t,null}function Aw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qA()){case Pm:return 1;case gw:return 4;case vu:case GA:return 16;case yw:return 536870912;default:return 16}default:return 16}}var _r=null,bm=null,Yl=null;function Cw(){if(Yl)return Yl;var t,e=bm,n=e.length,r,i="value"in _r?_r.value:_r.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Yl=i.slice(t,1<r?1-r:void 0)}function Xl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sl(){return!0}function Sy(){return!1}function nn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Sl:Sy,this.isPropagationStopped=Sy,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sl)},persist:function(){},isPersistent:Sl}),e}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dm=nn(Bs),La=$e({},Bs,{view:0,detail:0}),oC=nn(La),Dh,Nh,go,pc=$e({},La,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==go&&(go&&t.type==="mousemove"?(Dh=t.screenX-go.screenX,Nh=t.screenY-go.screenY):Nh=Dh=0,go=t),Dh)},movementY:function(t){return"movementY"in t?t.movementY:Nh}}),Ay=nn(pc),aC=$e({},pc,{dataTransfer:0}),lC=nn(aC),uC=$e({},La,{relatedTarget:0}),Vh=nn(uC),cC=$e({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),hC=nn(cC),dC=$e({},Bs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fC=nn(dC),mC=$e({},Bs,{data:0}),Cy=nn(mC),pC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=yC[t])?!!e[t]:!1}function Nm(){return vC}var wC=$e({},La,{key:function(t){if(t.key){var e=pC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nm,charCode:function(t){return t.type==="keypress"?Xl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_C=nn(wC),EC=$e({},pc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Py=nn(EC),TC=$e({},La,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nm}),xC=nn(TC),SC=$e({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),AC=nn(SC),CC=$e({},pc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),PC=nn(CC),IC=[9,13,27,32],Vm=Yn&&"CompositionEvent"in window,$o=null;Yn&&"documentMode"in document&&($o=document.documentMode);var kC=Yn&&"TextEvent"in window&&!$o,Pw=Yn&&(!Vm||$o&&8<$o&&11>=$o),Iy=" ",ky=!1;function Iw(t,e){switch(t){case"keyup":return IC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var es=!1;function RC(t,e){switch(t){case"compositionend":return kw(e);case"keypress":return e.which!==32?null:(ky=!0,Iy);case"textInput":return t=e.data,t===Iy&&ky?null:t;default:return null}}function bC(t,e){if(es)return t==="compositionend"||!Vm&&Iw(t,e)?(t=Cw(),Yl=bm=_r=null,es=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Pw&&e.locale!=="ko"?null:e.data;default:return null}}var DC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ry(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!DC[t.type]:e==="textarea"}function Rw(t,e,n,r){aw(r),e=Tu(e,"onChange"),0<e.length&&(n=new Dm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Uo=null,ua=null;function NC(t){$w(t,0)}function gc(t){var e=rs(t);if(ew(e))return t}function VC(t,e){if(t==="change")return e}var bw=!1;if(Yn){var Mh;if(Yn){var Lh="oninput"in document;if(!Lh){var by=document.createElement("div");by.setAttribute("oninput","return;"),Lh=typeof by.oninput=="function"}Mh=Lh}else Mh=!1;bw=Mh&&(!document.documentMode||9<document.documentMode)}function Dy(){Uo&&(Uo.detachEvent("onpropertychange",Dw),ua=Uo=null)}function Dw(t){if(t.propertyName==="value"&&gc(ua)){var e=[];Rw(e,ua,t,Cm(t)),hw(NC,e)}}function MC(t,e,n){t==="focusin"?(Dy(),Uo=e,ua=n,Uo.attachEvent("onpropertychange",Dw)):t==="focusout"&&Dy()}function LC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gc(ua)}function OC(t,e){if(t==="click")return gc(e)}function FC(t,e){if(t==="input"||t==="change")return gc(e)}function jC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xn=typeof Object.is=="function"?Object.is:jC;function ca(t,e){if(xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Dd.call(e,i)||!xn(t[i],e[i]))return!1}return!0}function Ny(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vy(t,e){var n=Ny(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ny(n)}}function Nw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Nw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Vw(){for(var t=window,e=pu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=pu(t.document)}return e}function Mm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function BC(t){var e=Vw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Nw(n.ownerDocument.documentElement,n)){if(r!==null&&Mm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Vy(n,s);var o=Vy(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $C=Yn&&"documentMode"in document&&11>=document.documentMode,ts=null,Xd=null,zo=null,Jd=!1;function My(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jd||ts==null||ts!==pu(r)||(r=ts,"selectionStart"in r&&Mm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zo&&ca(zo,r)||(zo=r,r=Tu(Xd,"onSelect"),0<r.length&&(e=new Dm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ts)))}function Al(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ns={animationend:Al("Animation","AnimationEnd"),animationiteration:Al("Animation","AnimationIteration"),animationstart:Al("Animation","AnimationStart"),transitionend:Al("Transition","TransitionEnd")},Oh={},Mw={};Yn&&(Mw=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function yc(t){if(Oh[t])return Oh[t];if(!ns[t])return t;var e=ns[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Mw)return Oh[t]=e[n];return t}var Lw=yc("animationend"),Ow=yc("animationiteration"),Fw=yc("animationstart"),jw=yc("transitionend"),Bw=new Map,Ly="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kr(t,e){Bw.set(t,e),bi(e,[t])}for(var Fh=0;Fh<Ly.length;Fh++){var jh=Ly[Fh],UC=jh.toLowerCase(),zC=jh[0].toUpperCase()+jh.slice(1);Kr(UC,"on"+zC)}Kr(Lw,"onAnimationEnd");Kr(Ow,"onAnimationIteration");Kr(Fw,"onAnimationStart");Kr("dblclick","onDoubleClick");Kr("focusin","onFocus");Kr("focusout","onBlur");Kr(jw,"onTransitionEnd");Ts("onMouseEnter",["mouseout","mouseover"]);Ts("onMouseLeave",["mouseout","mouseover"]);Ts("onPointerEnter",["pointerout","pointerover"]);Ts("onPointerLeave",["pointerout","pointerover"]);bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Do="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Do));function Oy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,UA(r,e,void 0,t),t.currentTarget=null}function $w(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Oy(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Oy(i,a,c),s=u}}}if(yu)throw t=Gd,yu=!1,Gd=null,t}function Ne(t,e){var n=e[rf];n===void 0&&(n=e[rf]=new Set);var r=t+"__bubble";n.has(r)||(Uw(e,t,2,!1),n.add(r))}function Bh(t,e,n){var r=0;e&&(r|=4),Uw(n,t,r,e)}var Cl="_reactListening"+Math.random().toString(36).slice(2);function ha(t){if(!t[Cl]){t[Cl]=!0,Q1.forEach(function(n){n!=="selectionchange"&&(WC.has(n)||Bh(n,!1,t),Bh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Cl]||(e[Cl]=!0,Bh("selectionchange",!1,e))}}function Uw(t,e,n,r){switch(Aw(e)){case 1:var i=iC;break;case 4:i=sC;break;default:i=Rm}n=i.bind(null,e,n,t),i=void 0,!qd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function $h(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=mi(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}hw(function(){var c=s,h=Cm(n),f=[];e:{var m=Bw.get(t);if(m!==void 0){var g=Dm,v=t;switch(t){case"keypress":if(Xl(n)===0)break e;case"keydown":case"keyup":g=_C;break;case"focusin":v="focus",g=Vh;break;case"focusout":v="blur",g=Vh;break;case"beforeblur":case"afterblur":g=Vh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Ay;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=lC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=xC;break;case Lw:case Ow:case Fw:g=hC;break;case jw:g=AC;break;case"scroll":g=oC;break;case"wheel":g=PC;break;case"copy":case"cut":case"paste":g=fC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Py}var E=(e&4)!==0,k=!E&&t==="scroll",A=E?m!==null?m+"Capture":null:m;E=[];for(var w=c,_;w!==null;){_=w;var V=_.stateNode;if(_.tag===5&&V!==null&&(_=V,A!==null&&(V=sa(w,A),V!=null&&E.push(da(w,V,_)))),k)break;w=w.return}0<E.length&&(m=new g(m,v,null,n,h),f.push({event:m,listeners:E}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==Wd&&(v=n.relatedTarget||n.fromElement)&&(mi(v)||v[Xn]))break e;if((g||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=c,v=v?mi(v):null,v!==null&&(k=Di(v),v!==k||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=c),g!==v)){if(E=Ay,V="onMouseLeave",A="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(E=Py,V="onPointerLeave",A="onPointerEnter",w="pointer"),k=g==null?m:rs(g),_=v==null?m:rs(v),m=new E(V,w+"leave",g,n,h),m.target=k,m.relatedTarget=_,V=null,mi(h)===c&&(E=new E(A,w+"enter",v,n,h),E.target=_,E.relatedTarget=k,V=E),k=V,g&&v)t:{for(E=g,A=v,w=0,_=E;_;_=Wi(_))w++;for(_=0,V=A;V;V=Wi(V))_++;for(;0<w-_;)E=Wi(E),w--;for(;0<_-w;)A=Wi(A),_--;for(;w--;){if(E===A||A!==null&&E===A.alternate)break t;E=Wi(E),A=Wi(A)}E=null}else E=null;g!==null&&Fy(f,m,g,E,!1),v!==null&&k!==null&&Fy(f,k,v,E,!0)}}e:{if(m=c?rs(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var L=VC;else if(Ry(m))if(bw)L=FC;else{L=LC;var F=MC}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=OC);if(L&&(L=L(t,c))){Rw(f,L,n,h);break e}F&&F(t,m,c),t==="focusout"&&(F=m._wrapperState)&&F.controlled&&m.type==="number"&&jd(m,"number",m.value)}switch(F=c?rs(c):window,t){case"focusin":(Ry(F)||F.contentEditable==="true")&&(ts=F,Xd=c,zo=null);break;case"focusout":zo=Xd=ts=null;break;case"mousedown":Jd=!0;break;case"contextmenu":case"mouseup":case"dragend":Jd=!1,My(f,n,h);break;case"selectionchange":if($C)break;case"keydown":case"keyup":My(f,n,h)}var S;if(Vm)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else es?Iw(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Pw&&n.locale!=="ko"&&(es||y!=="onCompositionStart"?y==="onCompositionEnd"&&es&&(S=Cw()):(_r=h,bm="value"in _r?_r.value:_r.textContent,es=!0)),F=Tu(c,y),0<F.length&&(y=new Cy(y,t,null,n,h),f.push({event:y,listeners:F}),S?y.data=S:(S=kw(n),S!==null&&(y.data=S)))),(S=kC?RC(t,n):bC(t,n))&&(c=Tu(c,"onBeforeInput"),0<c.length&&(h=new Cy("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=S))}$w(f,e)})}function da(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Tu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=sa(t,n),s!=null&&r.unshift(da(t,s,i)),s=sa(t,e),s!=null&&r.push(da(t,s,i))),t=t.return}return r}function Wi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Fy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=sa(n,s),u!=null&&o.unshift(da(n,u,a))):i||(u=sa(n,s),u!=null&&o.push(da(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var HC=/\r\n?/g,qC=/\u0000|\uFFFD/g;function jy(t){return(typeof t=="string"?t:""+t).replace(HC,`
`).replace(qC,"")}function Pl(t,e,n){if(e=jy(e),jy(t)!==e&&n)throw Error(z(425))}function xu(){}var Zd=null,ef=null;function tf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nf=typeof setTimeout=="function"?setTimeout:void 0,GC=typeof clearTimeout=="function"?clearTimeout:void 0,By=typeof Promise=="function"?Promise:void 0,KC=typeof queueMicrotask=="function"?queueMicrotask:typeof By<"u"?function(t){return By.resolve(null).then(t).catch(QC)}:nf;function QC(t){setTimeout(function(){throw t})}function Uh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),la(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);la(e)}function Pr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $y(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $s=Math.random().toString(36).slice(2),In="__reactFiber$"+$s,fa="__reactProps$"+$s,Xn="__reactContainer$"+$s,rf="__reactEvents$"+$s,YC="__reactListeners$"+$s,XC="__reactHandles$"+$s;function mi(t){var e=t[In];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Xn]||n[In]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$y(t);t!==null;){if(n=t[In])return n;t=$y(t)}return e}t=n,n=t.parentNode}return null}function Oa(t){return t=t[In]||t[Xn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function vc(t){return t[fa]||null}var sf=[],is=-1;function Qr(t){return{current:t}}function Ve(t){0>is||(t.current=sf[is],sf[is]=null,is--)}function be(t,e){is++,sf[is]=t.current,t.current=e}var jr={},At=Qr(jr),Ut=Qr(!1),Si=jr;function xs(t,e){var n=t.type.contextTypes;if(!n)return jr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function zt(t){return t=t.childContextTypes,t!=null}function Su(){Ve(Ut),Ve(At)}function Uy(t,e,n){if(At.current!==jr)throw Error(z(168));be(At,e),be(Ut,n)}function zw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,MA(t)||"Unknown",i));return $e({},n,r)}function Au(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||jr,Si=At.current,be(At,t),be(Ut,Ut.current),!0}function zy(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=zw(t,e,Si),r.__reactInternalMemoizedMergedChildContext=t,Ve(Ut),Ve(At),be(At,t)):Ve(Ut),be(Ut,n)}var $n=null,wc=!1,zh=!1;function Ww(t){$n===null?$n=[t]:$n.push(t)}function JC(t){wc=!0,Ww(t)}function Yr(){if(!zh&&$n!==null){zh=!0;var t=0,e=Ie;try{var n=$n;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}$n=null,wc=!1}catch(i){throw $n!==null&&($n=$n.slice(t+1)),pw(Pm,Yr),i}finally{Ie=e,zh=!1}}return null}var ss=[],os=0,Cu=null,Pu=0,an=[],ln=0,Ai=null,Un=1,zn="";function ai(t,e){ss[os++]=Pu,ss[os++]=Cu,Cu=t,Pu=e}function Hw(t,e,n){an[ln++]=Un,an[ln++]=zn,an[ln++]=Ai,Ai=t;var r=Un;t=zn;var i=32-_n(r)-1;r&=~(1<<i),n+=1;var s=32-_n(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Un=1<<32-_n(e)+i|n<<i|r,zn=s+t}else Un=1<<s|n<<i|r,zn=t}function Lm(t){t.return!==null&&(ai(t,1),Hw(t,1,0))}function Om(t){for(;t===Cu;)Cu=ss[--os],ss[os]=null,Pu=ss[--os],ss[os]=null;for(;t===Ai;)Ai=an[--ln],an[ln]=null,zn=an[--ln],an[ln]=null,Un=an[--ln],an[ln]=null}var Xt=null,Qt=null,Le=!1,wn=null;function qw(t,e){var n=un(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Wy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xt=t,Qt=Pr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xt=t,Qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ai!==null?{id:Un,overflow:zn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=un(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xt=t,Qt=null,!0):!1;default:return!1}}function of(t){return(t.mode&1)!==0&&(t.flags&128)===0}function af(t){if(Le){var e=Qt;if(e){var n=e;if(!Wy(t,e)){if(of(t))throw Error(z(418));e=Pr(n.nextSibling);var r=Xt;e&&Wy(t,e)?qw(r,n):(t.flags=t.flags&-4097|2,Le=!1,Xt=t)}}else{if(of(t))throw Error(z(418));t.flags=t.flags&-4097|2,Le=!1,Xt=t}}}function Hy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xt=t}function Il(t){if(t!==Xt)return!1;if(!Le)return Hy(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tf(t.type,t.memoizedProps)),e&&(e=Qt)){if(of(t))throw Gw(),Error(z(418));for(;e;)qw(t,e),e=Pr(e.nextSibling)}if(Hy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qt=Pr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qt=null}}else Qt=Xt?Pr(t.stateNode.nextSibling):null;return!0}function Gw(){for(var t=Qt;t;)t=Pr(t.nextSibling)}function Ss(){Qt=Xt=null,Le=!1}function Fm(t){wn===null?wn=[t]:wn.push(t)}var ZC=ir.ReactCurrentBatchConfig;function yn(t,e){if(t&&t.defaultProps){e=$e({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Iu=Qr(null),ku=null,as=null,jm=null;function Bm(){jm=as=ku=null}function $m(t){var e=Iu.current;Ve(Iu),t._currentValue=e}function lf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vs(t,e){ku=t,jm=as=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($t=!0),t.firstContext=null)}function dn(t){var e=t._currentValue;if(jm!==t)if(t={context:t,memoizedValue:e,next:null},as===null){if(ku===null)throw Error(z(308));as=t,ku.dependencies={lanes:0,firstContext:t}}else as=as.next=t;return e}var pi=null;function Um(t){pi===null?pi=[t]:pi.push(t)}function Kw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Um(e)):(n.next=i.next,i.next=n),e.interleaved=n,Jn(t,r)}function Jn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fr=!1;function zm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ir(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Jn(t,n)}return i=r.interleaved,i===null?(e.next=e,Um(r)):(e.next=i.next,i.next=e),r.interleaved=e,Jn(t,n)}function Jl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Im(t,n)}}function qy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ru(t,e,n,r){var i=t.updateQueue;fr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,h=c=u=null,a=s;do{var m=a.lane,g=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,E=a;switch(m=e,g=n,E.tag){case 1:if(v=E.payload,typeof v=="function"){f=v.call(g,f,m);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=E.payload,m=typeof v=="function"?v.call(g,f,m):v,m==null)break e;f=$e({},f,m);break e;case 2:fr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,u=f):h=h.next=g,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Pi|=o,t.lanes=o,t.memoizedState=f}}function Gy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var Yw=new K1.Component().refs;function uf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:$e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _c={isMounted:function(t){return(t=t._reactInternals)?Di(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Rt(),i=Rr(t),s=qn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ir(t,s,i),e!==null&&(En(e,t,i,r),Jl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Rt(),i=Rr(t),s=qn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ir(t,s,i),e!==null&&(En(e,t,i,r),Jl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Rt(),r=Rr(t),i=qn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ir(t,i,r),e!==null&&(En(e,t,r,n),Jl(e,t,r))}};function Ky(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ca(n,r)||!ca(i,s):!0}function Xw(t,e,n){var r=!1,i=jr,s=e.contextType;return typeof s=="object"&&s!==null?s=dn(s):(i=zt(e)?Si:At.current,r=e.contextTypes,s=(r=r!=null)?xs(t,i):jr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_c,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Qy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_c.enqueueReplaceState(e,e.state,null)}function cf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Yw,zm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=dn(s):(s=zt(e)?Si:At.current,i.context=xs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(uf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&_c.enqueueReplaceState(i,i.state,null),Ru(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function yo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Yw&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function kl(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Yy(t){var e=t._init;return e(t._payload)}function Jw(t){function e(A,w){if(t){var _=A.deletions;_===null?(A.deletions=[w],A.flags|=16):_.push(w)}}function n(A,w){if(!t)return null;for(;w!==null;)e(A,w),w=w.sibling;return null}function r(A,w){for(A=new Map;w!==null;)w.key!==null?A.set(w.key,w):A.set(w.index,w),w=w.sibling;return A}function i(A,w){return A=br(A,w),A.index=0,A.sibling=null,A}function s(A,w,_){return A.index=_,t?(_=A.alternate,_!==null?(_=_.index,_<w?(A.flags|=2,w):_):(A.flags|=2,w)):(A.flags|=1048576,w)}function o(A){return t&&A.alternate===null&&(A.flags|=2),A}function a(A,w,_,V){return w===null||w.tag!==6?(w=Yh(_,A.mode,V),w.return=A,w):(w=i(w,_),w.return=A,w)}function u(A,w,_,V){var L=_.type;return L===Zi?h(A,w,_.props.children,V,_.key):w!==null&&(w.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===dr&&Yy(L)===w.type)?(V=i(w,_.props),V.ref=yo(A,w,_),V.return=A,V):(V=iu(_.type,_.key,_.props,null,A.mode,V),V.ref=yo(A,w,_),V.return=A,V)}function c(A,w,_,V){return w===null||w.tag!==4||w.stateNode.containerInfo!==_.containerInfo||w.stateNode.implementation!==_.implementation?(w=Xh(_,A.mode,V),w.return=A,w):(w=i(w,_.children||[]),w.return=A,w)}function h(A,w,_,V,L){return w===null||w.tag!==7?(w=Ei(_,A.mode,V,L),w.return=A,w):(w=i(w,_),w.return=A,w)}function f(A,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Yh(""+w,A.mode,_),w.return=A,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case vl:return _=iu(w.type,w.key,w.props,null,A.mode,_),_.ref=yo(A,null,w),_.return=A,_;case Ji:return w=Xh(w,A.mode,_),w.return=A,w;case dr:var V=w._init;return f(A,V(w._payload),_)}if(Ro(w)||ho(w))return w=Ei(w,A.mode,_,null),w.return=A,w;kl(A,w)}return null}function m(A,w,_,V){var L=w!==null?w.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return L!==null?null:a(A,w,""+_,V);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case vl:return _.key===L?u(A,w,_,V):null;case Ji:return _.key===L?c(A,w,_,V):null;case dr:return L=_._init,m(A,w,L(_._payload),V)}if(Ro(_)||ho(_))return L!==null?null:h(A,w,_,V,null);kl(A,_)}return null}function g(A,w,_,V,L){if(typeof V=="string"&&V!==""||typeof V=="number")return A=A.get(_)||null,a(w,A,""+V,L);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case vl:return A=A.get(V.key===null?_:V.key)||null,u(w,A,V,L);case Ji:return A=A.get(V.key===null?_:V.key)||null,c(w,A,V,L);case dr:var F=V._init;return g(A,w,_,F(V._payload),L)}if(Ro(V)||ho(V))return A=A.get(_)||null,h(w,A,V,L,null);kl(w,V)}return null}function v(A,w,_,V){for(var L=null,F=null,S=w,y=w=0,P=null;S!==null&&y<_.length;y++){S.index>y?(P=S,S=null):P=S.sibling;var I=m(A,S,_[y],V);if(I===null){S===null&&(S=P);break}t&&S&&I.alternate===null&&e(A,S),w=s(I,w,y),F===null?L=I:F.sibling=I,F=I,S=P}if(y===_.length)return n(A,S),Le&&ai(A,y),L;if(S===null){for(;y<_.length;y++)S=f(A,_[y],V),S!==null&&(w=s(S,w,y),F===null?L=S:F.sibling=S,F=S);return Le&&ai(A,y),L}for(S=r(A,S);y<_.length;y++)P=g(S,A,y,_[y],V),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?y:P.key),w=s(P,w,y),F===null?L=P:F.sibling=P,F=P);return t&&S.forEach(function(D){return e(A,D)}),Le&&ai(A,y),L}function E(A,w,_,V){var L=ho(_);if(typeof L!="function")throw Error(z(150));if(_=L.call(_),_==null)throw Error(z(151));for(var F=L=null,S=w,y=w=0,P=null,I=_.next();S!==null&&!I.done;y++,I=_.next()){S.index>y?(P=S,S=null):P=S.sibling;var D=m(A,S,I.value,V);if(D===null){S===null&&(S=P);break}t&&S&&D.alternate===null&&e(A,S),w=s(D,w,y),F===null?L=D:F.sibling=D,F=D,S=P}if(I.done)return n(A,S),Le&&ai(A,y),L;if(S===null){for(;!I.done;y++,I=_.next())I=f(A,I.value,V),I!==null&&(w=s(I,w,y),F===null?L=I:F.sibling=I,F=I);return Le&&ai(A,y),L}for(S=r(A,S);!I.done;y++,I=_.next())I=g(S,A,y,I.value,V),I!==null&&(t&&I.alternate!==null&&S.delete(I.key===null?y:I.key),w=s(I,w,y),F===null?L=I:F.sibling=I,F=I);return t&&S.forEach(function(M){return e(A,M)}),Le&&ai(A,y),L}function k(A,w,_,V){if(typeof _=="object"&&_!==null&&_.type===Zi&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case vl:e:{for(var L=_.key,F=w;F!==null;){if(F.key===L){if(L=_.type,L===Zi){if(F.tag===7){n(A,F.sibling),w=i(F,_.props.children),w.return=A,A=w;break e}}else if(F.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===dr&&Yy(L)===F.type){n(A,F.sibling),w=i(F,_.props),w.ref=yo(A,F,_),w.return=A,A=w;break e}n(A,F);break}else e(A,F);F=F.sibling}_.type===Zi?(w=Ei(_.props.children,A.mode,V,_.key),w.return=A,A=w):(V=iu(_.type,_.key,_.props,null,A.mode,V),V.ref=yo(A,w,_),V.return=A,A=V)}return o(A);case Ji:e:{for(F=_.key;w!==null;){if(w.key===F)if(w.tag===4&&w.stateNode.containerInfo===_.containerInfo&&w.stateNode.implementation===_.implementation){n(A,w.sibling),w=i(w,_.children||[]),w.return=A,A=w;break e}else{n(A,w);break}else e(A,w);w=w.sibling}w=Xh(_,A.mode,V),w.return=A,A=w}return o(A);case dr:return F=_._init,k(A,w,F(_._payload),V)}if(Ro(_))return v(A,w,_,V);if(ho(_))return E(A,w,_,V);kl(A,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,w!==null&&w.tag===6?(n(A,w.sibling),w=i(w,_),w.return=A,A=w):(n(A,w),w=Yh(_,A.mode,V),w.return=A,A=w),o(A)):n(A,w)}return k}var As=Jw(!0),Zw=Jw(!1),Fa={},Rn=Qr(Fa),ma=Qr(Fa),pa=Qr(Fa);function gi(t){if(t===Fa)throw Error(z(174));return t}function Wm(t,e){switch(be(pa,e),be(ma,t),be(Rn,Fa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$d(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$d(e,t)}Ve(Rn),be(Rn,e)}function Cs(){Ve(Rn),Ve(ma),Ve(pa)}function e_(t){gi(pa.current);var e=gi(Rn.current),n=$d(e,t.type);e!==n&&(be(ma,t),be(Rn,n))}function Hm(t){ma.current===t&&(Ve(Rn),Ve(ma))}var je=Qr(0);function bu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wh=[];function qm(){for(var t=0;t<Wh.length;t++)Wh[t]._workInProgressVersionPrimary=null;Wh.length=0}var Zl=ir.ReactCurrentDispatcher,Hh=ir.ReactCurrentBatchConfig,Ci=0,Be=null,Je=null,ot=null,Du=!1,Wo=!1,ga=0,eP=0;function vt(){throw Error(z(321))}function Gm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xn(t[n],e[n]))return!1;return!0}function Km(t,e,n,r,i,s){if(Ci=s,Be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zl.current=t===null||t.memoizedState===null?iP:sP,t=n(r,i),Wo){s=0;do{if(Wo=!1,ga=0,25<=s)throw Error(z(301));s+=1,ot=Je=null,e.updateQueue=null,Zl.current=oP,t=n(r,i)}while(Wo)}if(Zl.current=Nu,e=Je!==null&&Je.next!==null,Ci=0,ot=Je=Be=null,Du=!1,e)throw Error(z(300));return t}function Qm(){var t=ga!==0;return ga=0,t}function Cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Be.memoizedState=ot=t:ot=ot.next=t,ot}function fn(){if(Je===null){var t=Be.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var e=ot===null?Be.memoizedState:ot.next;if(e!==null)ot=e,Je=t;else{if(t===null)throw Error(z(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},ot===null?Be.memoizedState=ot=t:ot=ot.next=t}return ot}function ya(t,e){return typeof e=="function"?e(t):e}function qh(t){var e=fn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=Je,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var h=c.lane;if((Ci&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Be.lanes|=h,Pi|=h}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,xn(r,e.memoizedState)||($t=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Be.lanes|=s,Pi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gh(t){var e=fn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);xn(s,e.memoizedState)||($t=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function t_(){}function n_(t,e){var n=Be,r=fn(),i=e(),s=!xn(r.memoizedState,i);if(s&&(r.memoizedState=i,$t=!0),r=r.queue,Ym(s_.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ot!==null&&ot.memoizedState.tag&1){if(n.flags|=2048,va(9,i_.bind(null,n,r,i,e),void 0,null),at===null)throw Error(z(349));Ci&30||r_(n,e,i)}return i}function r_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function i_(t,e,n,r){e.value=n,e.getSnapshot=r,o_(e)&&a_(t)}function s_(t,e,n){return n(function(){o_(e)&&a_(t)})}function o_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xn(t,n)}catch{return!0}}function a_(t){var e=Jn(t,1);e!==null&&En(e,t,1,-1)}function Xy(t){var e=Cn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:t},e.queue=t,t=t.dispatch=rP.bind(null,Be,t),[e.memoizedState,t]}function va(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function l_(){return fn().memoizedState}function eu(t,e,n,r){var i=Cn();Be.flags|=t,i.memoizedState=va(1|e,n,void 0,r===void 0?null:r)}function Ec(t,e,n,r){var i=fn();r=r===void 0?null:r;var s=void 0;if(Je!==null){var o=Je.memoizedState;if(s=o.destroy,r!==null&&Gm(r,o.deps)){i.memoizedState=va(e,n,s,r);return}}Be.flags|=t,i.memoizedState=va(1|e,n,s,r)}function Jy(t,e){return eu(8390656,8,t,e)}function Ym(t,e){return Ec(2048,8,t,e)}function u_(t,e){return Ec(4,2,t,e)}function c_(t,e){return Ec(4,4,t,e)}function h_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function d_(t,e,n){return n=n!=null?n.concat([t]):null,Ec(4,4,h_.bind(null,e,t),n)}function Xm(){}function f_(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Gm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function m_(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Gm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function p_(t,e,n){return Ci&21?(xn(n,e)||(n=vw(),Be.lanes|=n,Pi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$t=!0),t.memoizedState=n)}function tP(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=Hh.transition;Hh.transition={};try{t(!1),e()}finally{Ie=n,Hh.transition=r}}function g_(){return fn().memoizedState}function nP(t,e,n){var r=Rr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},y_(t))v_(e,n);else if(n=Kw(t,e,n,r),n!==null){var i=Rt();En(n,t,r,i),w_(n,e,r)}}function rP(t,e,n){var r=Rr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(y_(t))v_(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,xn(a,o)){var u=e.interleaved;u===null?(i.next=i,Um(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Kw(t,e,i,r),n!==null&&(i=Rt(),En(n,t,r,i),w_(n,e,r))}}function y_(t){var e=t.alternate;return t===Be||e!==null&&e===Be}function v_(t,e){Wo=Du=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function w_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Im(t,n)}}var Nu={readContext:dn,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},iP={readContext:dn,useCallback:function(t,e){return Cn().memoizedState=[t,e===void 0?null:e],t},useContext:dn,useEffect:Jy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,eu(4194308,4,h_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return eu(4194308,4,t,e)},useInsertionEffect:function(t,e){return eu(4,2,t,e)},useMemo:function(t,e){var n=Cn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Cn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=nP.bind(null,Be,t),[r.memoizedState,t]},useRef:function(t){var e=Cn();return t={current:t},e.memoizedState=t},useState:Xy,useDebugValue:Xm,useDeferredValue:function(t){return Cn().memoizedState=t},useTransition:function(){var t=Xy(!1),e=t[0];return t=tP.bind(null,t[1]),Cn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Be,i=Cn();if(Le){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),at===null)throw Error(z(349));Ci&30||r_(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Jy(s_.bind(null,r,s,t),[t]),r.flags|=2048,va(9,i_.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Cn(),e=at.identifierPrefix;if(Le){var n=zn,r=Un;n=(r&~(1<<32-_n(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ga++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=eP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},sP={readContext:dn,useCallback:f_,useContext:dn,useEffect:Ym,useImperativeHandle:d_,useInsertionEffect:u_,useLayoutEffect:c_,useMemo:m_,useReducer:qh,useRef:l_,useState:function(){return qh(ya)},useDebugValue:Xm,useDeferredValue:function(t){var e=fn();return p_(e,Je.memoizedState,t)},useTransition:function(){var t=qh(ya)[0],e=fn().memoizedState;return[t,e]},useMutableSource:t_,useSyncExternalStore:n_,useId:g_,unstable_isNewReconciler:!1},oP={readContext:dn,useCallback:f_,useContext:dn,useEffect:Ym,useImperativeHandle:d_,useInsertionEffect:u_,useLayoutEffect:c_,useMemo:m_,useReducer:Gh,useRef:l_,useState:function(){return Gh(ya)},useDebugValue:Xm,useDeferredValue:function(t){var e=fn();return Je===null?e.memoizedState=t:p_(e,Je.memoizedState,t)},useTransition:function(){var t=Gh(ya)[0],e=fn().memoizedState;return[t,e]},useMutableSource:t_,useSyncExternalStore:n_,useId:g_,unstable_isNewReconciler:!1};function Ps(t,e){try{var n="",r=e;do n+=VA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Kh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function hf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var aP=typeof WeakMap=="function"?WeakMap:Map;function __(t,e,n){n=qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Mu||(Mu=!0,Ef=r),hf(t,e)},n}function E_(t,e,n){n=qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){hf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){hf(t,e),typeof r!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Zy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new aP;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=EP.bind(null,t,e,n),e.then(t,t))}function e0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function t0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qn(-1,1),e.tag=2,Ir(n,e,1))),n.lanes|=1),t)}var lP=ir.ReactCurrentOwner,$t=!1;function kt(t,e,n,r){e.child=t===null?Zw(e,null,n,r):As(e,t.child,n,r)}function n0(t,e,n,r,i){n=n.render;var s=e.ref;return vs(e,i),r=Km(t,e,n,r,s,i),n=Qm(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zn(t,e,i)):(Le&&n&&Lm(e),e.flags|=1,kt(t,e,r,i),e.child)}function r0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!sp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,T_(t,e,s,r,i)):(t=iu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ca,n(o,r)&&t.ref===e.ref)return Zn(t,e,i)}return e.flags|=1,t=br(s,r),t.ref=e.ref,t.return=e,e.child=t}function T_(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ca(s,r)&&t.ref===e.ref)if($t=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&($t=!0);else return e.lanes=t.lanes,Zn(t,e,i)}return df(t,e,n,r,i)}function x_(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(us,Gt),Gt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(us,Gt),Gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,be(us,Gt),Gt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,be(us,Gt),Gt|=r;return kt(t,e,i,n),e.child}function S_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function df(t,e,n,r,i){var s=zt(n)?Si:At.current;return s=xs(e,s),vs(e,i),n=Km(t,e,n,r,s,i),r=Qm(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zn(t,e,i)):(Le&&r&&Lm(e),e.flags|=1,kt(t,e,n,i),e.child)}function i0(t,e,n,r,i){if(zt(n)){var s=!0;Au(e)}else s=!1;if(vs(e,i),e.stateNode===null)tu(t,e),Xw(e,n,r),cf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=dn(c):(c=zt(n)?Si:At.current,c=xs(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&Qy(e,o,r,c),fr=!1;var m=e.memoizedState;o.state=m,Ru(e,r,o,i),u=e.memoizedState,a!==r||m!==u||Ut.current||fr?(typeof h=="function"&&(uf(e,n,h,r),u=e.memoizedState),(a=fr||Ky(e,n,a,r,m,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Qw(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:yn(e.type,a),o.props=c,f=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=dn(u):(u=zt(n)?Si:At.current,u=xs(e,u));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==u)&&Qy(e,o,r,u),fr=!1,m=e.memoizedState,o.state=m,Ru(e,r,o,i);var v=e.memoizedState;a!==f||m!==v||Ut.current||fr?(typeof g=="function"&&(uf(e,n,g,r),v=e.memoizedState),(c=fr||Ky(e,n,c,r,m,v,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return ff(t,e,n,r,s,i)}function ff(t,e,n,r,i,s){S_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&zy(e,n,!1),Zn(t,e,s);r=e.stateNode,lP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=As(e,t.child,null,s),e.child=As(e,null,a,s)):kt(t,e,a,s),e.memoizedState=r.state,i&&zy(e,n,!0),e.child}function A_(t){var e=t.stateNode;e.pendingContext?Uy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Uy(t,e.context,!1),Wm(t,e.containerInfo)}function s0(t,e,n,r,i){return Ss(),Fm(i),e.flags|=256,kt(t,e,n,r),e.child}var mf={dehydrated:null,treeContext:null,retryLane:0};function pf(t){return{baseLanes:t,cachePool:null,transitions:null}}function C_(t,e,n){var r=e.pendingProps,i=je.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),be(je,i&1),t===null)return af(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Sc(o,r,0,null),t=Ei(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=pf(n),e.memoizedState=mf,t):Jm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return uP(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=br(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=br(a,s):(s=Ei(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?pf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=mf,r}return s=t.child,t=s.sibling,r=br(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Jm(t,e){return e=Sc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Rl(t,e,n,r){return r!==null&&Fm(r),As(e,t.child,null,n),t=Jm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function uP(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Kh(Error(z(422))),Rl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Sc({mode:"visible",children:r.children},i,0,null),s=Ei(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&As(e,t.child,null,o),e.child.memoizedState=pf(o),e.memoizedState=mf,s);if(!(e.mode&1))return Rl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(z(419)),r=Kh(s,r,void 0),Rl(t,e,o,r)}if(a=(o&t.childLanes)!==0,$t||a){if(r=at,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Jn(t,i),En(r,t,i,-1))}return ip(),r=Kh(Error(z(421))),Rl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=TP.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Qt=Pr(i.nextSibling),Xt=e,Le=!0,wn=null,t!==null&&(an[ln++]=Un,an[ln++]=zn,an[ln++]=Ai,Un=t.id,zn=t.overflow,Ai=e),e=Jm(e,r.children),e.flags|=4096,e)}function o0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lf(t.return,e,n)}function Qh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function P_(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(kt(t,e,r.children,n),r=je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&o0(t,n,e);else if(t.tag===19)o0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(be(je,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&bu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Qh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&bu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Qh(e,!0,n,null,s);break;case"together":Qh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Pi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=br(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=br(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function cP(t,e,n){switch(e.tag){case 3:A_(e),Ss();break;case 5:e_(e);break;case 1:zt(e.type)&&Au(e);break;case 4:Wm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;be(Iu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(be(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?C_(t,e,n):(be(je,je.current&1),t=Zn(t,e,n),t!==null?t.sibling:null);be(je,je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return P_(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),be(je,je.current),r)break;return null;case 22:case 23:return e.lanes=0,x_(t,e,n)}return Zn(t,e,n)}var I_,gf,k_,R_;I_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gf=function(){};k_=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,gi(Rn.current);var s=null;switch(n){case"input":i=Od(t,i),r=Od(t,r),s=[];break;case"select":i=$e({},i,{value:void 0}),r=$e({},r,{value:void 0}),s=[];break;case"textarea":i=Bd(t,i),r=Bd(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xu)}Ud(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ra.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ra.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ne("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};R_=function(t,e,n,r){n!==r&&(e.flags|=4)};function vo(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function hP(t,e,n){var r=e.pendingProps;switch(Om(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(e),null;case 1:return zt(e.type)&&Su(),wt(e),null;case 3:return r=e.stateNode,Cs(),Ve(Ut),Ve(At),qm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Il(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wn!==null&&(Sf(wn),wn=null))),gf(t,e),wt(e),null;case 5:Hm(e);var i=gi(pa.current);if(n=e.type,t!==null&&e.stateNode!=null)k_(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return wt(e),null}if(t=gi(Rn.current),Il(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[In]=e,r[fa]=s,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(i=0;i<Do.length;i++)Ne(Do[i],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":py(r,s),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ne("invalid",r);break;case"textarea":yy(r,s),Ne("invalid",r)}Ud(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Pl(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Pl(r.textContent,a,t),i=["children",""+a]):ra.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":wl(r),gy(r,s,!0);break;case"textarea":wl(r),vy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=xu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[In]=e,t[fa]=r,I_(t,e,!1,!1),e.stateNode=t;e:{switch(o=zd(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),i=r;break;case"iframe":case"object":case"embed":Ne("load",t),i=r;break;case"video":case"audio":for(i=0;i<Do.length;i++)Ne(Do[i],t);i=r;break;case"source":Ne("error",t),i=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),i=r;break;case"details":Ne("toggle",t),i=r;break;case"input":py(t,r),i=Od(t,r),Ne("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=$e({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":yy(t,r),i=Bd(t,r),Ne("invalid",t);break;default:i=r}Ud(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?ow(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&iw(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ia(t,u):typeof u=="number"&&ia(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ra.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ne("scroll",t):u!=null&&Tm(t,s,u,o))}switch(n){case"input":wl(t),gy(t,r,!1);break;case"textarea":wl(t),vy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ms(t,!!r.multiple,s,!1):r.defaultValue!=null&&ms(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=xu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wt(e),null;case 6:if(t&&e.stateNode!=null)R_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=gi(pa.current),gi(Rn.current),Il(e)){if(r=e.stateNode,n=e.memoizedProps,r[In]=e,(s=r.nodeValue!==n)&&(t=Xt,t!==null))switch(t.tag){case 3:Pl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Pl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[In]=e,e.stateNode=r}return wt(e),null;case 13:if(Ve(je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&Qt!==null&&e.mode&1&&!(e.flags&128))Gw(),Ss(),e.flags|=98560,s=!1;else if(s=Il(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[In]=e}else Ss(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wt(e),s=!1}else wn!==null&&(Sf(wn),wn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?et===0&&(et=3):ip())),e.updateQueue!==null&&(e.flags|=4),wt(e),null);case 4:return Cs(),gf(t,e),t===null&&ha(e.stateNode.containerInfo),wt(e),null;case 10:return $m(e.type._context),wt(e),null;case 17:return zt(e.type)&&Su(),wt(e),null;case 19:if(Ve(je),s=e.memoizedState,s===null)return wt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)vo(s,!1);else{if(et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=bu(t),o!==null){for(e.flags|=128,vo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return be(je,je.current&1|2),e.child}t=t.sibling}s.tail!==null&&qe()>Is&&(e.flags|=128,r=!0,vo(s,!1),e.lanes=4194304)}else{if(!r)if(t=bu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Le)return wt(e),null}else 2*qe()-s.renderingStartTime>Is&&n!==1073741824&&(e.flags|=128,r=!0,vo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=qe(),e.sibling=null,n=je.current,be(je,r?n&1|2:n&1),e):(wt(e),null);case 22:case 23:return rp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Gt&1073741824&&(wt(e),e.subtreeFlags&6&&(e.flags|=8192)):wt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function dP(t,e){switch(Om(e),e.tag){case 1:return zt(e.type)&&Su(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Cs(),Ve(Ut),Ve(At),qm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Hm(e),null;case 13:if(Ve(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Ss()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(je),null;case 4:return Cs(),null;case 10:return $m(e.type._context),null;case 22:case 23:return rp(),null;case 24:return null;default:return null}}var bl=!1,Tt=!1,fP=typeof WeakSet=="function"?WeakSet:Set,K=null;function ls(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(t,e,r)}else n.current=null}function yf(t,e,n){try{n()}catch(r){We(t,e,r)}}var a0=!1;function mP(t,e){if(Zd=_u,t=Vw(),Mm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,h=0,f=t,m=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++h===r&&(u=o),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ef={focusedElem:t,selectionRange:n},_u=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var E=v.memoizedProps,k=v.memoizedState,A=e.stateNode,w=A.getSnapshotBeforeUpdate(e.elementType===e.type?E:yn(e.type,E),k);A.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(V){We(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return v=a0,a0=!1,v}function Ho(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&yf(e,n,s)}i=i.next}while(i!==r)}}function Tc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function b_(t){var e=t.alternate;e!==null&&(t.alternate=null,b_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[In],delete e[fa],delete e[rf],delete e[YC],delete e[XC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function D_(t){return t.tag===5||t.tag===3||t.tag===4}function l0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||D_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xu));else if(r!==4&&(t=t.child,t!==null))for(wf(t,e,n),t=t.sibling;t!==null;)wf(t,e,n),t=t.sibling}function _f(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(_f(t,e,n),t=t.sibling;t!==null;)_f(t,e,n),t=t.sibling}var ct=null,vn=!1;function lr(t,e,n){for(n=n.child;n!==null;)N_(t,e,n),n=n.sibling}function N_(t,e,n){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(mc,n)}catch{}switch(n.tag){case 5:Tt||ls(n,e);case 6:var r=ct,i=vn;ct=null,lr(t,e,n),ct=r,vn=i,ct!==null&&(vn?(t=ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ct.removeChild(n.stateNode));break;case 18:ct!==null&&(vn?(t=ct,n=n.stateNode,t.nodeType===8?Uh(t.parentNode,n):t.nodeType===1&&Uh(t,n),la(t)):Uh(ct,n.stateNode));break;case 4:r=ct,i=vn,ct=n.stateNode.containerInfo,vn=!0,lr(t,e,n),ct=r,vn=i;break;case 0:case 11:case 14:case 15:if(!Tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&yf(n,e,o),i=i.next}while(i!==r)}lr(t,e,n);break;case 1:if(!Tt&&(ls(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){We(n,e,a)}lr(t,e,n);break;case 21:lr(t,e,n);break;case 22:n.mode&1?(Tt=(r=Tt)||n.memoizedState!==null,lr(t,e,n),Tt=r):lr(t,e,n);break;default:lr(t,e,n)}}function u0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new fP),e.forEach(function(r){var i=xP.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function gn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ct=a.stateNode,vn=!1;break e;case 3:ct=a.stateNode.containerInfo,vn=!0;break e;case 4:ct=a.stateNode.containerInfo,vn=!0;break e}a=a.return}if(ct===null)throw Error(z(160));N_(s,o,i),ct=null,vn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){We(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)V_(e,t),e=e.sibling}function V_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gn(e,t),An(t),r&4){try{Ho(3,t,t.return),Tc(3,t)}catch(E){We(t,t.return,E)}try{Ho(5,t,t.return)}catch(E){We(t,t.return,E)}}break;case 1:gn(e,t),An(t),r&512&&n!==null&&ls(n,n.return);break;case 5:if(gn(e,t),An(t),r&512&&n!==null&&ls(n,n.return),t.flags&32){var i=t.stateNode;try{ia(i,"")}catch(E){We(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&tw(i,s),zd(a,o);var c=zd(a,s);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?ow(i,f):h==="dangerouslySetInnerHTML"?iw(i,f):h==="children"?ia(i,f):Tm(i,h,f,c)}switch(a){case"input":Fd(i,s);break;case"textarea":nw(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?ms(i,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?ms(i,!!s.multiple,s.defaultValue,!0):ms(i,!!s.multiple,s.multiple?[]:"",!1))}i[fa]=s}catch(E){We(t,t.return,E)}}break;case 6:if(gn(e,t),An(t),r&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){We(t,t.return,E)}}break;case 3:if(gn(e,t),An(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{la(e.containerInfo)}catch(E){We(t,t.return,E)}break;case 4:gn(e,t),An(t);break;case 13:gn(e,t),An(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(tp=qe())),r&4&&u0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Tt=(c=Tt)||h,gn(e,t),Tt=c):gn(e,t),An(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(K=t,h=t.child;h!==null;){for(f=K=h;K!==null;){switch(m=K,g=m.child,m.tag){case 0:case 11:case 14:case 15:Ho(4,m,m.return);break;case 1:ls(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(E){We(r,n,E)}}break;case 5:ls(m,m.return);break;case 22:if(m.memoizedState!==null){h0(f);continue}}g!==null?(g.return=m,K=g):h0(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=sw("display",o))}catch(E){We(t,t.return,E)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(E){We(t,t.return,E)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:gn(e,t),An(t),r&4&&u0(t);break;case 21:break;default:gn(e,t),An(t)}}function An(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(D_(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ia(i,""),r.flags&=-33);var s=l0(t);_f(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=l0(t);wf(t,a,o);break;default:throw Error(z(161))}}catch(u){We(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pP(t,e,n){K=t,M_(t)}function M_(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||bl;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Tt;a=bl;var c=Tt;if(bl=o,(Tt=u)&&!c)for(K=i;K!==null;)o=K,u=o.child,o.tag===22&&o.memoizedState!==null?d0(i):u!==null?(u.return=o,K=u):d0(i);for(;s!==null;)K=s,M_(s),s=s.sibling;K=i,bl=a,Tt=c}c0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,K=s):c0(t)}}function c0(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tt||Tc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Tt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:yn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Gy(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Gy(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&la(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Tt||e.flags&512&&vf(e)}catch(m){We(e,e.return,m)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function h0(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function d0(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Tc(4,e)}catch(u){We(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){We(e,i,u)}}var s=e.return;try{vf(e)}catch(u){We(e,s,u)}break;case 5:var o=e.return;try{vf(e)}catch(u){We(e,o,u)}}}catch(u){We(e,e.return,u)}if(e===t){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var gP=Math.ceil,Vu=ir.ReactCurrentDispatcher,Zm=ir.ReactCurrentOwner,cn=ir.ReactCurrentBatchConfig,Ee=0,at=null,Ye=null,ft=0,Gt=0,us=Qr(0),et=0,wa=null,Pi=0,xc=0,ep=0,qo=null,jt=null,tp=0,Is=1/0,Bn=null,Mu=!1,Ef=null,kr=null,Dl=!1,Er=null,Lu=0,Go=0,Tf=null,nu=-1,ru=0;function Rt(){return Ee&6?qe():nu!==-1?nu:nu=qe()}function Rr(t){return t.mode&1?Ee&2&&ft!==0?ft&-ft:ZC.transition!==null?(ru===0&&(ru=vw()),ru):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:Aw(t.type)),t):1}function En(t,e,n,r){if(50<Go)throw Go=0,Tf=null,Error(z(185));Ma(t,n,r),(!(Ee&2)||t!==at)&&(t===at&&(!(Ee&2)&&(xc|=n),et===4&&vr(t,ft)),Wt(t,r),n===1&&Ee===0&&!(e.mode&1)&&(Is=qe()+500,wc&&Yr()))}function Wt(t,e){var n=t.callbackNode;ZA(t,e);var r=wu(t,t===at?ft:0);if(r===0)n!==null&&Ey(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ey(n),e===1)t.tag===0?JC(f0.bind(null,t)):Ww(f0.bind(null,t)),KC(function(){!(Ee&6)&&Yr()}),n=null;else{switch(ww(r)){case 1:n=Pm;break;case 4:n=gw;break;case 16:n=vu;break;case 536870912:n=yw;break;default:n=vu}n=z_(n,L_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function L_(t,e){if(nu=-1,ru=0,Ee&6)throw Error(z(327));var n=t.callbackNode;if(ws()&&t.callbackNode!==n)return null;var r=wu(t,t===at?ft:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ou(t,r);else{e=r;var i=Ee;Ee|=2;var s=F_();(at!==t||ft!==e)&&(Bn=null,Is=qe()+500,_i(t,e));do try{wP();break}catch(a){O_(t,a)}while(!0);Bm(),Vu.current=s,Ee=i,Ye!==null?e=0:(at=null,ft=0,e=et)}if(e!==0){if(e===2&&(i=Kd(t),i!==0&&(r=i,e=xf(t,i))),e===1)throw n=wa,_i(t,0),vr(t,r),Wt(t,qe()),n;if(e===6)vr(t,r);else{if(i=t.current.alternate,!(r&30)&&!yP(i)&&(e=Ou(t,r),e===2&&(s=Kd(t),s!==0&&(r=s,e=xf(t,s))),e===1))throw n=wa,_i(t,0),vr(t,r),Wt(t,qe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:li(t,jt,Bn);break;case 3:if(vr(t,r),(r&130023424)===r&&(e=tp+500-qe(),10<e)){if(wu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Rt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=nf(li.bind(null,t,jt,Bn),e);break}li(t,jt,Bn);break;case 4:if(vr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-_n(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gP(r/1960))-r,10<r){t.timeoutHandle=nf(li.bind(null,t,jt,Bn),r);break}li(t,jt,Bn);break;case 5:li(t,jt,Bn);break;default:throw Error(z(329))}}}return Wt(t,qe()),t.callbackNode===n?L_.bind(null,t):null}function xf(t,e){var n=qo;return t.current.memoizedState.isDehydrated&&(_i(t,e).flags|=256),t=Ou(t,e),t!==2&&(e=jt,jt=n,e!==null&&Sf(e)),t}function Sf(t){jt===null?jt=t:jt.push.apply(jt,t)}function yP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!xn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vr(t,e){for(e&=~ep,e&=~xc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_n(e),r=1<<n;t[n]=-1,e&=~r}}function f0(t){if(Ee&6)throw Error(z(327));ws();var e=wu(t,0);if(!(e&1))return Wt(t,qe()),null;var n=Ou(t,e);if(t.tag!==0&&n===2){var r=Kd(t);r!==0&&(e=r,n=xf(t,r))}if(n===1)throw n=wa,_i(t,0),vr(t,e),Wt(t,qe()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,li(t,jt,Bn),Wt(t,qe()),null}function np(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(Is=qe()+500,wc&&Yr())}}function Ii(t){Er!==null&&Er.tag===0&&!(Ee&6)&&ws();var e=Ee;Ee|=1;var n=cn.transition,r=Ie;try{if(cn.transition=null,Ie=1,t)return t()}finally{Ie=r,cn.transition=n,Ee=e,!(Ee&6)&&Yr()}}function rp(){Gt=us.current,Ve(us)}function _i(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,GC(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(Om(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Su();break;case 3:Cs(),Ve(Ut),Ve(At),qm();break;case 5:Hm(r);break;case 4:Cs();break;case 13:Ve(je);break;case 19:Ve(je);break;case 10:$m(r.type._context);break;case 22:case 23:rp()}n=n.return}if(at=t,Ye=t=br(t.current,null),ft=Gt=e,et=0,wa=null,ep=xc=Pi=0,jt=qo=null,pi!==null){for(e=0;e<pi.length;e++)if(n=pi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}pi=null}return t}function O_(t,e){do{var n=Ye;try{if(Bm(),Zl.current=Nu,Du){for(var r=Be.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Du=!1}if(Ci=0,ot=Je=Be=null,Wo=!1,ga=0,Zm.current=null,n===null||n.return===null){et=1,wa=e,Ye=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=ft,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=e0(o);if(g!==null){g.flags&=-257,t0(g,o,a,s,e),g.mode&1&&Zy(s,c,e),e=g,u=c;var v=e.updateQueue;if(v===null){var E=new Set;E.add(u),e.updateQueue=E}else v.add(u);break e}else{if(!(e&1)){Zy(s,c,e),ip();break e}u=Error(z(426))}}else if(Le&&a.mode&1){var k=e0(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),t0(k,o,a,s,e),Fm(Ps(u,a));break e}}s=u=Ps(u,a),et!==4&&(et=2),qo===null?qo=[s]:qo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var A=__(s,u,e);qy(s,A);break e;case 1:a=u;var w=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(kr===null||!kr.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var V=E_(s,a,e);qy(s,V);break e}}s=s.return}while(s!==null)}B_(n)}catch(L){e=L,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(!0)}function F_(){var t=Vu.current;return Vu.current=Nu,t===null?Nu:t}function ip(){(et===0||et===3||et===2)&&(et=4),at===null||!(Pi&268435455)&&!(xc&268435455)||vr(at,ft)}function Ou(t,e){var n=Ee;Ee|=2;var r=F_();(at!==t||ft!==e)&&(Bn=null,_i(t,e));do try{vP();break}catch(i){O_(t,i)}while(!0);if(Bm(),Ee=n,Vu.current=r,Ye!==null)throw Error(z(261));return at=null,ft=0,et}function vP(){for(;Ye!==null;)j_(Ye)}function wP(){for(;Ye!==null&&!WA();)j_(Ye)}function j_(t){var e=U_(t.alternate,t,Gt);t.memoizedProps=t.pendingProps,e===null?B_(t):Ye=e,Zm.current=null}function B_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=dP(n,e),n!==null){n.flags&=32767,Ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{et=6,Ye=null;return}}else if(n=hP(n,e,Gt),n!==null){Ye=n;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=t}while(e!==null);et===0&&(et=5)}function li(t,e,n){var r=Ie,i=cn.transition;try{cn.transition=null,Ie=1,_P(t,e,n,r)}finally{cn.transition=i,Ie=r}return null}function _P(t,e,n,r){do ws();while(Er!==null);if(Ee&6)throw Error(z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(eC(t,s),t===at&&(Ye=at=null,ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dl||(Dl=!0,z_(vu,function(){return ws(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=cn.transition,cn.transition=null;var o=Ie;Ie=1;var a=Ee;Ee|=4,Zm.current=null,mP(t,n),V_(n,t),BC(ef),_u=!!Zd,ef=Zd=null,t.current=n,pP(n),HA(),Ee=a,Ie=o,cn.transition=s}else t.current=n;if(Dl&&(Dl=!1,Er=t,Lu=i),s=t.pendingLanes,s===0&&(kr=null),KA(n.stateNode),Wt(t,qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Mu)throw Mu=!1,t=Ef,Ef=null,t;return Lu&1&&t.tag!==0&&ws(),s=t.pendingLanes,s&1?t===Tf?Go++:(Go=0,Tf=t):Go=0,Yr(),null}function ws(){if(Er!==null){var t=ww(Lu),e=cn.transition,n=Ie;try{if(cn.transition=null,Ie=16>t?16:t,Er===null)var r=!1;else{if(t=Er,Er=null,Lu=0,Ee&6)throw Error(z(331));var i=Ee;for(Ee|=4,K=t.current;K!==null;){var s=K,o=s.child;if(K.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(K=c;K!==null;){var h=K;switch(h.tag){case 0:case 11:case 15:Ho(8,h,s)}var f=h.child;if(f!==null)f.return=h,K=f;else for(;K!==null;){h=K;var m=h.sibling,g=h.return;if(b_(h),h===c){K=null;break}if(m!==null){m.return=g,K=m;break}K=g}}}var v=s.alternate;if(v!==null){var E=v.child;if(E!==null){v.child=null;do{var k=E.sibling;E.sibling=null,E=k}while(E!==null)}}K=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,K=o;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ho(9,s,s.return)}var A=s.sibling;if(A!==null){A.return=s.return,K=A;break e}K=s.return}}var w=t.current;for(K=w;K!==null;){o=K;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,K=_;else e:for(o=w;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Tc(9,a)}}catch(L){We(a,a.return,L)}if(a===o){K=null;break e}var V=a.sibling;if(V!==null){V.return=a.return,K=V;break e}K=a.return}}if(Ee=i,Yr(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(mc,t)}catch{}r=!0}return r}finally{Ie=n,cn.transition=e}}return!1}function m0(t,e,n){e=Ps(n,e),e=__(t,e,1),t=Ir(t,e,1),e=Rt(),t!==null&&(Ma(t,1,e),Wt(t,e))}function We(t,e,n){if(t.tag===3)m0(t,t,n);else for(;e!==null;){if(e.tag===3){m0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(kr===null||!kr.has(r))){t=Ps(n,t),t=E_(e,t,1),e=Ir(e,t,1),t=Rt(),e!==null&&(Ma(e,1,t),Wt(e,t));break}}e=e.return}}function EP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Rt(),t.pingedLanes|=t.suspendedLanes&n,at===t&&(ft&n)===n&&(et===4||et===3&&(ft&130023424)===ft&&500>qe()-tp?_i(t,0):ep|=n),Wt(t,e)}function $_(t,e){e===0&&(t.mode&1?(e=Tl,Tl<<=1,!(Tl&130023424)&&(Tl=4194304)):e=1);var n=Rt();t=Jn(t,e),t!==null&&(Ma(t,e,n),Wt(t,n))}function TP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$_(t,n)}function xP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),$_(t,n)}var U_;U_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ut.current)$t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return $t=!1,cP(t,e,n);$t=!!(t.flags&131072)}else $t=!1,Le&&e.flags&1048576&&Hw(e,Pu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;tu(t,e),t=e.pendingProps;var i=xs(e,At.current);vs(e,n),i=Km(null,e,r,t,i,n);var s=Qm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zt(r)?(s=!0,Au(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,zm(e),i.updater=_c,e.stateNode=i,i._reactInternals=e,cf(e,r,t,n),e=ff(null,e,r,!0,s,n)):(e.tag=0,Le&&s&&Lm(e),kt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(tu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=AP(r),t=yn(r,t),i){case 0:e=df(null,e,r,t,n);break e;case 1:e=i0(null,e,r,t,n);break e;case 11:e=n0(null,e,r,t,n);break e;case 14:e=r0(null,e,r,yn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yn(r,i),df(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yn(r,i),i0(t,e,r,i,n);case 3:e:{if(A_(e),t===null)throw Error(z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Qw(t,e),Ru(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ps(Error(z(423)),e),e=s0(t,e,r,n,i);break e}else if(r!==i){i=Ps(Error(z(424)),e),e=s0(t,e,r,n,i);break e}else for(Qt=Pr(e.stateNode.containerInfo.firstChild),Xt=e,Le=!0,wn=null,n=Zw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ss(),r===i){e=Zn(t,e,n);break e}kt(t,e,r,n)}e=e.child}return e;case 5:return e_(e),t===null&&af(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,tf(r,i)?o=null:s!==null&&tf(r,s)&&(e.flags|=32),S_(t,e),kt(t,e,o,n),e.child;case 6:return t===null&&af(e),null;case 13:return C_(t,e,n);case 4:return Wm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=As(e,null,r,n):kt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yn(r,i),n0(t,e,r,i,n);case 7:return kt(t,e,e.pendingProps,n),e.child;case 8:return kt(t,e,e.pendingProps.children,n),e.child;case 12:return kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,be(Iu,r._currentValue),r._currentValue=o,s!==null)if(xn(s.value,o)){if(s.children===i.children&&!Ut.current){e=Zn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=qn(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),lf(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),lf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}kt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,vs(e,n),i=dn(i),r=r(i),e.flags|=1,kt(t,e,r,n),e.child;case 14:return r=e.type,i=yn(r,e.pendingProps),i=yn(r.type,i),r0(t,e,r,i,n);case 15:return T_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yn(r,i),tu(t,e),e.tag=1,zt(r)?(t=!0,Au(e)):t=!1,vs(e,n),Xw(e,r,i),cf(e,r,i,n),ff(null,e,r,!0,t,n);case 19:return P_(t,e,n);case 22:return x_(t,e,n)}throw Error(z(156,e.tag))};function z_(t,e){return pw(t,e)}function SP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(t,e,n,r){return new SP(t,e,n,r)}function sp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function AP(t){if(typeof t=="function")return sp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sm)return 11;if(t===Am)return 14}return 2}function br(t,e){var n=t.alternate;return n===null?(n=un(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function iu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")sp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Zi:return Ei(n.children,i,s,e);case xm:o=8,i|=8;break;case Nd:return t=un(12,n,e,i|2),t.elementType=Nd,t.lanes=s,t;case Vd:return t=un(13,n,e,i),t.elementType=Vd,t.lanes=s,t;case Md:return t=un(19,n,e,i),t.elementType=Md,t.lanes=s,t;case J1:return Sc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y1:o=10;break e;case X1:o=9;break e;case Sm:o=11;break e;case Am:o=14;break e;case dr:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=un(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ei(t,e,n,r){return t=un(7,t,r,e),t.lanes=n,t}function Sc(t,e,n,r){return t=un(22,t,r,e),t.elementType=J1,t.lanes=n,t.stateNode={isHidden:!1},t}function Yh(t,e,n){return t=un(6,t,null,e),t.lanes=n,t}function Xh(t,e,n){return e=un(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function CP(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bh(0),this.expirationTimes=bh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function op(t,e,n,r,i,s,o,a,u){return t=new CP(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=un(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zm(s),t}function PP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ji,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function W_(t){if(!t)return jr;t=t._reactInternals;e:{if(Di(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(zt(n))return zw(t,n,e)}return e}function H_(t,e,n,r,i,s,o,a,u){return t=op(n,r,!0,t,i,s,o,a,u),t.context=W_(null),n=t.current,r=Rt(),i=Rr(n),s=qn(r,i),s.callback=e??null,Ir(n,s,i),t.current.lanes=i,Ma(t,i,r),Wt(t,r),t}function Ac(t,e,n,r){var i=e.current,s=Rt(),o=Rr(i);return n=W_(n),e.context===null?e.context=n:e.pendingContext=n,e=qn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ir(i,e,o),t!==null&&(En(t,i,o,s),Jl(t,i,o)),o}function Fu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function p0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ap(t,e){p0(t,e),(t=t.alternate)&&p0(t,e)}var q_=typeof reportError=="function"?reportError:function(t){console.error(t)};function lp(t){this._internalRoot=t}Cc.prototype.render=lp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Ac(t,e,null,null)};Cc.prototype.unmount=lp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ii(function(){Ac(null,t,null,null)}),e[Xn]=null}};function Cc(t){this._internalRoot=t}Cc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Tw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<yr.length&&e!==0&&e<yr[n].priority;n++);yr.splice(n,0,t),n===0&&Sw(t)}};function up(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function g0(){}function IP(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Fu(o);s.call(c)}}var o=H_(e,r,t,0,null,!1,!1,"",g0);return t._reactRootContainer=o,t[Xn]=o.current,ha(t.nodeType===8?t.parentNode:t),Ii(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Fu(u);a.call(c)}}var u=op(t,0,!1,null,null,!1,!1,"",g0);return t._reactRootContainer=u,t[Xn]=u.current,ha(t.nodeType===8?t.parentNode:t),Ii(function(){Ac(e,u,n,r)}),u}function Ic(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=Fu(o);a.call(u)}}Ac(e,o,t,i)}else o=IP(n,e,t,i,r);return Fu(o)}_w=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bo(e.pendingLanes);n!==0&&(Im(e,n|1),Wt(e,qe()),!(Ee&6)&&(Is=qe()+500,Yr()))}break;case 13:Ii(function(){var r=Jn(t,1);if(r!==null){var i=Rt();En(r,t,1,i)}}),ap(t,1)}};km=function(t){if(t.tag===13){var e=Jn(t,134217728);if(e!==null){var n=Rt();En(e,t,134217728,n)}ap(t,134217728)}};Ew=function(t){if(t.tag===13){var e=Rr(t),n=Jn(t,e);if(n!==null){var r=Rt();En(n,t,e,r)}ap(t,e)}};Tw=function(){return Ie};xw=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};Hd=function(t,e,n){switch(e){case"input":if(Fd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=vc(r);if(!i)throw Error(z(90));ew(r),Fd(r,i)}}}break;case"textarea":nw(t,n);break;case"select":e=n.value,e!=null&&ms(t,!!n.multiple,e,!1)}};uw=np;cw=Ii;var kP={usingClientEntryPoint:!1,Events:[Oa,rs,vc,aw,lw,np]},wo={findFiberByHostInstance:mi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},RP={bundleType:wo.bundleType,version:wo.version,rendererPackageName:wo.rendererPackageName,rendererConfig:wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ir.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fw(t),t===null?null:t.stateNode},findFiberByHostInstance:wo.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nl.isDisabled&&Nl.supportsFiber)try{mc=Nl.inject(RP),kn=Nl}catch{}}tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kP;tn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!up(e))throw Error(z(200));return PP(t,e,null,n)};tn.createRoot=function(t,e){if(!up(t))throw Error(z(299));var n=!1,r="",i=q_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=op(t,1,!1,null,null,n,!1,r,i),t[Xn]=e.current,ha(t.nodeType===8?t.parentNode:t),new lp(e)};tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=fw(e),t=t===null?null:t.stateNode,t};tn.flushSync=function(t){return Ii(t)};tn.hydrate=function(t,e,n){if(!Pc(e))throw Error(z(200));return Ic(null,t,e,!0,n)};tn.hydrateRoot=function(t,e,n){if(!up(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=q_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=H_(e,null,t,1,n??null,i,!1,s,o),t[Xn]=e.current,ha(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Cc(e)};tn.render=function(t,e,n){if(!Pc(e))throw Error(z(200));return Ic(null,t,e,!1,n)};tn.unmountComponentAtNode=function(t){if(!Pc(t))throw Error(z(40));return t._reactRootContainer?(Ii(function(){Ic(null,null,t,!1,function(){t._reactRootContainer=null,t[Xn]=null})}),!0):!1};tn.unstable_batchedUpdates=np;tn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pc(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Ic(t,e,n,!1,r)};tn.version="18.2.0-next-9e3b772b8-20220608";function G_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(G_)}catch(t){console.error(t)}}G_(),H1.exports=tn;var K_=H1.exports,y0=K_;bd.createRoot=y0.createRoot,bd.hydrateRoot=y0.hydrateRoot;const bP={theme:"light",soundEnabled:!0,showConfetti:!0,hasCompletedOnboarding:!1,onboardingShownCount:0,lastOnboardingDate:null},Q_=T.createContext(void 0),DP=({children:t})=>{const[e,n]=T.useState(()=>{const s=localStorage.getItem("settings");return s?JSON.parse(s):bP});T.useEffect(()=>{localStorage.setItem("settings",JSON.stringify(e)),document.documentElement.classList.toggle("dark",e.theme==="dark")},[e]);const r=s=>{n(o=>({...o,...s}))},i=()=>{r({theme:e.theme==="light"?"dark":"light"})};return C.jsx(Q_.Provider,{value:{settings:e,updateSettings:r,toggleTheme:i},children:t})},ja=()=>{const t=T.useContext(Q_);if(t===void 0)throw new Error("useSettings must be used within a SettingsProvider");return t},Y_=T.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),kc=T.createContext({}),Rc=T.createContext(null),bc=typeof document<"u",cp=bc?T.useLayoutEffect:T.useEffect,X_=T.createContext({strict:!1});function NP(t,e,n,r){const{visualElement:i}=T.useContext(kc),s=T.useContext(X_),o=T.useContext(Rc),a=T.useContext(Y_).reducedMotion,u=T.useRef();r=r||s.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=u.current;T.useInsertionEffect(()=>{c&&c.update(n,o)});const h=T.useRef(!!window.HandoffAppearAnimations);return cp(()=>{c&&(c.render(),h.current&&c.animationState&&c.animationState.animateChanges())}),T.useEffect(()=>{c&&(c.updateFeatures(),!h.current&&c.animationState&&c.animationState.animateChanges(),window.HandoffAppearAnimations=void 0,h.current=!1)}),c}function cs(t){return typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function VP(t,e,n){return T.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):cs(n)&&(n.current=r))},[e])}function _a(t){return typeof t=="string"||Array.isArray(t)}function Dc(t){return typeof t=="object"&&typeof t.start=="function"}const hp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],dp=["initial",...hp];function Nc(t){return Dc(t.animate)||dp.some(e=>_a(t[e]))}function J_(t){return!!(Nc(t)||t.variants)}function MP(t,e){if(Nc(t)){const{initial:n,animate:r}=t;return{initial:n===!1||_a(n)?n:void 0,animate:_a(r)?r:void 0}}return t.inherit!==!1?e:{}}function LP(t){const{initial:e,animate:n}=MP(t,T.useContext(kc));return T.useMemo(()=>({initial:e,animate:n}),[v0(e),v0(n)])}function v0(t){return Array.isArray(t)?t.join(" "):t}const w0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ea={};for(const t in w0)Ea[t]={isEnabled:e=>w0[t].some(n=>!!e[n])};function OP(t){for(const e in t)Ea[e]={...Ea[e],...t[e]}}const fp=T.createContext({}),Z_=T.createContext({}),FP=Symbol.for("motionComponentSymbol");function jP({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&OP(t);function s(a,u){let c;const h={...T.useContext(Y_),...a,layoutId:BP(a)},{isStatic:f}=h,m=LP(a),g=r(a,f);if(!f&&bc){m.visualElement=NP(i,g,h,e);const v=T.useContext(Z_),E=T.useContext(X_).strict;m.visualElement&&(c=m.visualElement.loadFeatures(h,E,t,v))}return T.createElement(kc.Provider,{value:m},c&&m.visualElement?T.createElement(c,{visualElement:m.visualElement,...h}):null,n(i,a,VP(g,m.visualElement,u),g,f,m.visualElement))}const o=T.forwardRef(s);return o[FP]=i,o}function BP({layoutId:t}){const e=T.useContext(fp).id;return e&&t!==void 0?e+"-"+t:t}function $P(t){function e(r,i={}){return jP(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const UP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function mp(t){return typeof t!="string"||t.includes("-")?!1:!!(UP.indexOf(t)>-1||/[A-Z]/.test(t))}const ju={};function zP(t){Object.assign(ju,t)}const Ba=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ni=new Set(Ba);function eE(t,{layout:e,layoutId:n}){return Ni.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!ju[t]||t==="opacity")}const Ct=t=>!!(t&&t.getVelocity),WP={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},HP=Ba.length;function qP(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<HP;o++){const a=Ba[o];if(t[a]!==void 0){const u=WP[a]||a;s+=`${u}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const tE=t=>e=>typeof e=="string"&&e.startsWith(t),nE=tE("--"),Af=tE("var(--"),GP=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,KP=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Br=(t,e,n)=>Math.min(Math.max(n,t),e),Vi={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ko={...Vi,transform:t=>Br(0,1,t)},Vl={...Vi,default:1},Qo=t=>Math.round(t*1e5)/1e5,Vc=/(-)?([\d]*\.?[\d])+/g,rE=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,QP=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function $a(t){return typeof t=="string"}const Ua=t=>({test:e=>$a(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),hr=Ua("deg"),bn=Ua("%"),oe=Ua("px"),YP=Ua("vh"),XP=Ua("vw"),_0={...bn,parse:t=>bn.parse(t)/100,transform:t=>bn.transform(t*100)},E0={...Vi,transform:Math.round},iE={borderWidth:oe,borderTopWidth:oe,borderRightWidth:oe,borderBottomWidth:oe,borderLeftWidth:oe,borderRadius:oe,radius:oe,borderTopLeftRadius:oe,borderTopRightRadius:oe,borderBottomRightRadius:oe,borderBottomLeftRadius:oe,width:oe,maxWidth:oe,height:oe,maxHeight:oe,size:oe,top:oe,right:oe,bottom:oe,left:oe,padding:oe,paddingTop:oe,paddingRight:oe,paddingBottom:oe,paddingLeft:oe,margin:oe,marginTop:oe,marginRight:oe,marginBottom:oe,marginLeft:oe,rotate:hr,rotateX:hr,rotateY:hr,rotateZ:hr,scale:Vl,scaleX:Vl,scaleY:Vl,scaleZ:Vl,skew:hr,skewX:hr,skewY:hr,distance:oe,translateX:oe,translateY:oe,translateZ:oe,x:oe,y:oe,z:oe,perspective:oe,transformPerspective:oe,opacity:Ko,originX:_0,originY:_0,originZ:oe,zIndex:E0,fillOpacity:Ko,strokeOpacity:Ko,numOctaves:E0};function pp(t,e,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=t;let u=!1,c=!1,h=!0;for(const f in e){const m=e[f];if(nE(f)){s[f]=m;continue}const g=iE[f],v=KP(m,g);if(Ni.has(f)){if(u=!0,o[f]=v,!h)continue;m!==(g.default||0)&&(h=!1)}else f.startsWith("origin")?(c=!0,a[f]=v):i[f]=v}if(e.transform||(u||r?i.transform=qP(t.transform,n,h,r):i.transform&&(i.transform="none")),c){const{originX:f="50%",originY:m="50%",originZ:g=0}=a;i.transformOrigin=`${f} ${m} ${g}`}}const gp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function sE(t,e,n){for(const r in e)!Ct(e[r])&&!eE(r,n)&&(t[r]=e[r])}function JP({transformTemplate:t},e,n){return T.useMemo(()=>{const r=gp();return pp(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function ZP(t,e,n){const r=t.style||{},i={};return sE(i,r,t),Object.assign(i,JP(t,e,n)),t.transformValues?t.transformValues(i):i}function e2(t,e,n){const r={},i=ZP(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const t2=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function Bu(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t2.has(t)}let oE=t=>!Bu(t);function n2(t){t&&(oE=e=>e.startsWith("on")?!Bu(e):t(e))}try{n2(require("@emotion/is-prop-valid").default)}catch{}function r2(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(oE(i)||n===!0&&Bu(i)||!e&&!Bu(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function T0(t,e,n){return typeof t=="string"?t:oe.transform(e+n*t)}function i2(t,e,n){const r=T0(e,t.x,t.width),i=T0(n,t.y,t.height);return`${r} ${i}`}const s2={offset:"stroke-dashoffset",array:"stroke-dasharray"},o2={offset:"strokeDashoffset",array:"strokeDasharray"};function a2(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?s2:o2;t[s.offset]=oe.transform(-r);const o=oe.transform(e),a=oe.transform(n);t[s.array]=`${o} ${a}`}function yp(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:u=0,...c},h,f,m){if(pp(t,c,h,m),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:v,dimensions:E}=t;g.transform&&(E&&(v.transform=g.transform),delete g.transform),E&&(i!==void 0||s!==void 0||v.transform)&&(v.transformOrigin=i2(E,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),o!==void 0&&a2(g,o,a,u,!1)}const aE=()=>({...gp(),attrs:{}}),vp=t=>typeof t=="string"&&t.toLowerCase()==="svg";function l2(t,e,n,r){const i=T.useMemo(()=>{const s=aE();return yp(s,e,{enableHardwareAcceleration:!1},vp(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};sE(s,t.style,t),i.style={...s,...i.style}}return i}function u2(t=!1){return(n,r,i,{latestValues:s},o)=>{const u=(mp(n)?l2:e2)(r,s,o,n),h={...r2(r,typeof n=="string",t),...u,ref:i},{children:f}=r,m=T.useMemo(()=>Ct(f)?f.get():f,[f]);return T.createElement(n,{...h,children:m})}}const wp=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function lE(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const uE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function cE(t,e,n,r){lE(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(uE.has(i)?i:wp(i),e.attrs[i])}function _p(t,e){const{style:n}=t,r={};for(const i in n)(Ct(n[i])||e.style&&Ct(e.style[i])||eE(i,t))&&(r[i]=n[i]);return r}function hE(t,e){const n=_p(t,e);for(const r in t)if(Ct(t[r])||Ct(e[r])){const i=Ba.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function Ep(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function dE(t){const e=T.useRef(null);return e.current===null&&(e.current=t()),e.current}const $u=t=>Array.isArray(t),c2=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),h2=t=>$u(t)?t[t.length-1]||0:t;function su(t){const e=Ct(t)?t.get():t;return c2(e)?e.toValue():e}function d2({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:f2(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const fE=t=>(e,n)=>{const r=T.useContext(kc),i=T.useContext(Rc),s=()=>d2(t,e,r,i);return n?s():dE(s)};function f2(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=su(s[m]);let{initial:o,animate:a}=t;const u=Nc(t),c=J_(t);e&&c&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const f=h?a:o;return f&&typeof f!="boolean"&&!Dc(f)&&(Array.isArray(f)?f:[f]).forEach(g=>{const v=Ep(t,g);if(!v)return;const{transitionEnd:E,transition:k,...A}=v;for(const w in A){let _=A[w];if(Array.isArray(_)){const V=h?_.length-1:0;_=_[V]}_!==null&&(i[w]=_)}for(const w in E)i[w]=E[w]}),i}const Ge=t=>t;class x0{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function m2(t){let e=new x0,n=new x0,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(u,c=!1,h=!1)=>{const f=h&&i,m=f?e:n;return c&&o.add(u),m.add(u)&&f&&i&&(r=e.order.length),u},cancel:u=>{n.remove(u),o.delete(u)},process:u=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const h=e.order[c];h(u),o.has(h)&&(a.schedule(h),t())}i=!1,s&&(s=!1,a.process(u))}};return a}const Ml=["prepare","read","update","preRender","render","postRender"],p2=40;function g2(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=Ml.reduce((f,m)=>(f[m]=m2(()=>n=!0),f),{}),o=f=>s[f].process(i),a=()=>{const f=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(f-i.timestamp,p2),1),i.timestamp=f,i.isProcessing=!0,Ml.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},u=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:Ml.reduce((f,m)=>{const g=s[m];return f[m]=(v,E=!1,k=!1)=>(n||u(),g.schedule(v,E,k)),f},{}),cancel:f=>Ml.forEach(m=>s[m].cancel(f)),state:i,steps:s}}const{schedule:Re,cancel:Mn,state:it,steps:Jh}=g2(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ge,!0),y2={useVisualState:fE({scrapeMotionValuesFromProps:hE,createRenderState:aE,onMount:(t,e,{renderState:n,latestValues:r})=>{Re.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Re.render(()=>{yp(n,r,{enableHardwareAcceleration:!1},vp(e.tagName),t.transformTemplate),cE(e,n)})}})},v2={useVisualState:fE({scrapeMotionValuesFromProps:_p,createRenderState:gp})};function w2(t,{forwardMotionProps:e=!1},n,r){return{...mp(t)?y2:v2,preloadedFeatures:n,useRender:u2(e),createVisualElement:r,Component:t}}function Wn(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const mE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Mc(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const _2=t=>e=>mE(e)&&t(e,Mc(e));function Gn(t,e,n,r){return Wn(t,e,_2(n),r)}const E2=(t,e)=>n=>e(t(n)),Dr=(...t)=>t.reduce(E2);function pE(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const S0=pE("dragHorizontal"),A0=pE("dragVertical");function gE(t){let e=!1;if(t==="y")e=A0();else if(t==="x")e=S0();else{const n=S0(),r=A0();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function yE(){const t=gE(!0);return t?(t(),!1):!0}class Xr{constructor(e){this.isMounted=!1,this.node=e}update(){}}function C0(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.type==="touch"||yE())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Re.update(()=>a[r](s,o))};return Gn(t.current,n,i,{passive:!t.getProps()[r]})}class T2 extends Xr{mount(){this.unmount=Dr(C0(this.node,!0),C0(this.node,!1))}unmount(){}}class x2 extends Xr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Dr(Wn(this.node.current,"focus",()=>this.onFocus()),Wn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const vE=(t,e)=>e?t===e?!0:vE(t,e.parentElement):!1;function Zh(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Mc(n))}class S2 extends Xr{constructor(){super(...arguments),this.removeStartListeners=Ge,this.removeEndListeners=Ge,this.removeAccessibleListeners=Ge,this.startPointerPress=(e,n)=>{if(this.removeEndListeners(),this.isPressing)return;const r=this.node.getProps(),s=Gn(window,"pointerup",(a,u)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:h}=this.node.getProps();Re.update(()=>{vE(this.node.current,a.target)?c&&c(a,u):h&&h(a,u)})},{passive:!(r.onTap||r.onPointerUp)}),o=Gn(window,"pointercancel",(a,u)=>this.cancelPress(a,u),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Dr(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Zh("up",(u,c)=>{const{onTap:h}=this.node.getProps();h&&Re.update(()=>h(u,c))})};this.removeEndListeners(),this.removeEndListeners=Wn(this.node.current,"keyup",o),Zh("down",(a,u)=>{this.startPress(a,u)})},n=Wn(this.node.current,"keydown",e),r=()=>{this.isPressing&&Zh("cancel",(s,o)=>this.cancelPress(s,o))},i=Wn(this.node.current,"blur",r);this.removeAccessibleListeners=Dr(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Re.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!yE()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Re.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Gn(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Wn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Dr(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Cf=new WeakMap,ed=new WeakMap,A2=t=>{const e=Cf.get(t.target);e&&e(t)},C2=t=>{t.forEach(A2)};function P2({root:t,...e}){const n=t||document;ed.has(n)||ed.set(n,{});const r=ed.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(C2,{root:t,...e})),r[i]}function I2(t,e,n){const r=P2(e);return Cf.set(t,n),r.observe(t),()=>{Cf.delete(t),r.unobserve(t)}}const k2={some:0,all:1};class R2 extends Xr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:k2[i]},a=u=>{const{isIntersecting:c}=u;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),m=c?h:f;m&&m(u)};return I2(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(b2(e,n))&&this.startObserver()}unmount(){}}function b2({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const D2={inView:{Feature:R2},tap:{Feature:S2},focus:{Feature:x2},hover:{Feature:T2}};function wE(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function N2(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function V2(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function Lc(t,e,n){const r=t.getProps();return Ep(r,e,n!==void 0?n:r.custom,N2(t),V2(t))}const M2="framerAppearId",L2="data-"+wp(M2);let Uu=Ge;const Nr=t=>t*1e3,Dn=t=>t/1e3,O2={current:!1},_E=t=>Array.isArray(t)&&typeof t[0]=="number";function EE(t){return!!(!t||typeof t=="string"&&TE[t]||_E(t)||Array.isArray(t)&&t.every(EE))}const No=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,TE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:No([0,.65,.55,1]),circOut:No([.55,0,1,.45]),backIn:No([.31,.01,.66,-.59]),backOut:No([.33,1.53,.69,.99])};function xE(t){if(t)return _E(t)?No(t):Array.isArray(t)?t.map(xE):TE[t]}function F2(t,e,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:u}={}){const c={[e]:n};u&&(c.offset=u);const h=xE(a);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function j2(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const SE=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,B2=1e-7,$2=12;function U2(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=SE(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>B2&&++a<$2);return o}function za(t,e,n,r){if(t===e&&n===r)return Ge;const i=s=>U2(s,0,1,t,n);return s=>s===0||s===1?s:SE(i(s),e,r)}const z2=za(.42,0,1,1),W2=za(0,0,.58,1),AE=za(.42,0,.58,1),CE=t=>Array.isArray(t)&&typeof t[0]!="number",PE=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,IE=t=>e=>1-t(1-e),kE=t=>1-Math.sin(Math.acos(t)),Tp=IE(kE),H2=PE(Tp),RE=za(.33,1.53,.69,.99),xp=IE(RE),q2=PE(xp),G2=t=>(t*=2)<1?.5*xp(t):.5*(2-Math.pow(2,-10*(t-1))),P0={linear:Ge,easeIn:z2,easeInOut:AE,easeOut:W2,circIn:kE,circInOut:H2,circOut:Tp,backIn:xp,backInOut:q2,backOut:RE,anticipate:G2},I0=t=>{if(Array.isArray(t)){Uu(t.length===4);const[e,n,r,i]=t;return za(e,n,r,i)}else if(typeof t=="string")return Uu(P0[t]!==void 0),P0[t];return t},Sp=(t,e)=>n=>!!($a(n)&&QP.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),bE=(t,e,n)=>r=>{if(!$a(r))return r;const[i,s,o,a]=r.match(Vc);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},K2=t=>Br(0,255,t),td={...Vi,transform:t=>Math.round(K2(t))},yi={test:Sp("rgb","red"),parse:bE("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+td.transform(t)+", "+td.transform(e)+", "+td.transform(n)+", "+Qo(Ko.transform(r))+")"};function Q2(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Pf={test:Sp("#"),parse:Q2,transform:yi.transform},hs={test:Sp("hsl","hue"),parse:bE("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+bn.transform(Qo(e))+", "+bn.transform(Qo(n))+", "+Qo(Ko.transform(r))+")"},It={test:t=>yi.test(t)||Pf.test(t)||hs.test(t),parse:t=>yi.test(t)?yi.parse(t):hs.test(t)?hs.parse(t):Pf.parse(t),transform:t=>$a(t)?t:t.hasOwnProperty("red")?yi.transform(t):hs.transform(t)},Fe=(t,e,n)=>-n*t+n*e+t;function nd(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Y2({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,u=2*n-a;i=nd(u,a,t+1/3),s=nd(u,a,t),o=nd(u,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const rd=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},X2=[Pf,yi,hs],J2=t=>X2.find(e=>e.test(t));function k0(t){const e=J2(t);let n=e.parse(t);return e===hs&&(n=Y2(n)),n}const DE=(t,e)=>{const n=k0(t),r=k0(e),i={...n};return s=>(i.red=rd(n.red,r.red,s),i.green=rd(n.green,r.green,s),i.blue=rd(n.blue,r.blue,s),i.alpha=Fe(n.alpha,r.alpha,s),yi.transform(i))};function Z2(t){var e,n;return isNaN(t)&&$a(t)&&(((e=t.match(Vc))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(rE))===null||n===void 0?void 0:n.length)||0)>0}const NE={regex:GP,countKey:"Vars",token:"${v}",parse:Ge},VE={regex:rE,countKey:"Colors",token:"${c}",parse:It.parse},ME={regex:Vc,countKey:"Numbers",token:"${n}",parse:Vi.parse};function id(t,{regex:e,countKey:n,token:r,parse:i}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...s.map(i)))}function zu(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&id(n,NE),id(n,VE),id(n,ME),n}function LE(t){return zu(t).values}function OE(t){const{values:e,numColors:n,numVars:r,tokenised:i}=zu(t),s=e.length;return o=>{let a=i;for(let u=0;u<s;u++)u<r?a=a.replace(NE.token,o[u]):u<r+n?a=a.replace(VE.token,It.transform(o[u])):a=a.replace(ME.token,Qo(o[u]));return a}}const eI=t=>typeof t=="number"?0:t;function tI(t){const e=LE(t);return OE(t)(e.map(eI))}const $r={test:Z2,parse:LE,createTransformer:OE,getAnimatableNone:tI},FE=(t,e)=>n=>`${n>0?e:t}`;function jE(t,e){return typeof t=="number"?n=>Fe(t,e,n):It.test(t)?DE(t,e):t.startsWith("var(")?FE(t,e):$E(t,e)}const BE=(t,e)=>{const n=[...t],r=n.length,i=t.map((s,o)=>jE(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},nI=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=jE(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},$E=(t,e)=>{const n=$r.createTransformer(e),r=zu(t),i=zu(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Dr(BE(r.values,i.values),n):FE(t,e)},ks=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},R0=(t,e)=>n=>Fe(t,e,n);function rI(t){return typeof t=="number"?R0:typeof t=="string"?It.test(t)?DE:$E:Array.isArray(t)?BE:typeof t=="object"?nI:R0}function iI(t,e,n){const r=[],i=n||rI(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||Ge:e;a=Dr(u,a)}r.push(a)}return r}function UE(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Uu(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=iI(e,r,i),a=o.length,u=c=>{let h=0;if(a>1)for(;h<t.length-2&&!(c<t[h+1]);h++);const f=ks(t[h],t[h+1],c);return o[h](f)};return n?c=>u(Br(t[0],t[s-1],c)):u}function zE(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=ks(0,e,r);t.push(Fe(n,1,i))}}function WE(t){const e=[0];return zE(e,t.length-1),e}function sI(t,e){return t.map(n=>n*e)}function oI(t,e){return t.map(()=>e||AE).splice(0,t.length-1)}function Wu({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=CE(r)?r.map(I0):I0(r),s={done:!1,value:e[0]},o=sI(n&&n.length===e.length?n:WE(e),t),a=UE(o,e,{ease:Array.isArray(i)?i:oI(e,i)});return{calculatedDuration:t,next:u=>(s.value=a(u),s.done=u>=t,s)}}function HE(t,e){return e?t*(1e3/e):0}const aI=5;function qE(t,e,n){const r=Math.max(e-aI,0);return HE(n-t(r),e-r)}const sd=.001,lI=.01,uI=10,cI=.05,hI=1;function dI({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s,o=1-e;o=Br(cI,hI,o),t=Br(lI,uI,Dn(t)),o<1?(i=c=>{const h=c*o,f=h*t,m=h-n,g=If(c,o),v=Math.exp(-f);return sd-m/g*v},s=c=>{const f=c*o*t,m=f*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,v=Math.exp(-f),E=If(Math.pow(c,2),o);return(-i(c)+sd>0?-1:1)*((m-g)*v)/E}):(i=c=>{const h=Math.exp(-c*t),f=(c-n)*t+1;return-sd+h*f},s=c=>{const h=Math.exp(-c*t),f=(n-c)*(t*t);return h*f});const a=5/t,u=mI(i,s,a);if(t=Nr(t),isNaN(u))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(u,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const fI=12;function mI(t,e,n){let r=n;for(let i=1;i<fI;i++)r=r-t(r)/e(r);return r}function If(t,e){return t*Math.sqrt(1-e*e)}const pI=["duration","bounce"],gI=["stiffness","damping","mass"];function b0(t,e){return e.some(n=>t[n]!==void 0)}function yI(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!b0(t,gI)&&b0(t,pI)){const n=dI(t);e={...e,...n,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function Ap({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:u,mass:c,velocity:h,duration:f,isResolvedFromDuration:m}=yI(r),g=h?-Dn(h):0,v=u/(2*Math.sqrt(a*c)),E=s-i,k=Dn(Math.sqrt(a/c)),A=Math.abs(E)<5;n||(n=A?.01:2),e||(e=A?.005:.5);let w;if(v<1){const _=If(k,v);w=V=>{const L=Math.exp(-v*k*V);return s-L*((g+v*k*E)/_*Math.sin(_*V)+E*Math.cos(_*V))}}else if(v===1)w=_=>s-Math.exp(-k*_)*(E+(g+k*E)*_);else{const _=k*Math.sqrt(v*v-1);w=V=>{const L=Math.exp(-v*k*V),F=Math.min(_*V,300);return s-L*((g+v*k*E)*Math.sinh(F)+_*E*Math.cosh(F))/_}}return{calculatedDuration:m&&f||null,next:_=>{const V=w(_);if(m)o.done=_>=f;else{let L=g;_!==0&&(v<1?L=qE(w,_,V):L=0);const F=Math.abs(L)<=n,S=Math.abs(s-V)<=e;o.done=F&&S}return o.value=o.done?s:V,o}}}function D0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:u,restDelta:c=.5,restSpeed:h}){const f=t[0],m={done:!1,value:f},g=y=>a!==void 0&&y<a||u!==void 0&&y>u,v=y=>a===void 0?u:u===void 0||Math.abs(a-y)<Math.abs(u-y)?a:u;let E=n*e;const k=f+E,A=o===void 0?k:o(k);A!==k&&(E=A-f);const w=y=>-E*Math.exp(-y/r),_=y=>A+w(y),V=y=>{const P=w(y),I=_(y);m.done=Math.abs(P)<=c,m.value=m.done?A:I};let L,F;const S=y=>{g(m.value)&&(L=y,F=Ap({keyframes:[m.value,v(m.value)],velocity:qE(_,y,m.value),damping:i,stiffness:s,restDelta:c,restSpeed:h}))};return S(0),{calculatedDuration:null,next:y=>{let P=!1;return!F&&L===void 0&&(P=!0,V(y),S(y)),L!==void 0&&y>L?F.next(y-L):(!P&&V(y),m)}}}const vI=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Re.update(e,!0),stop:()=>Mn(e),now:()=>it.isProcessing?it.timestamp:performance.now()}},kf=2e4;function Rf(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<kf;)e+=n,r=t.next(e);return e>=kf?1/0:e}const wI={decay:D0,inertia:D0,tween:Wu,keyframes:Wu,spring:Ap};function Hu({autoplay:t=!0,delay:e=0,driver:n=vI,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:u,onStop:c,onComplete:h,onUpdate:f,...m}){let g=1,v=!1,E,k;const A=()=>{k=new Promise(b=>{E=b})};A();let w;const _=wI[i]||Wu;let V;_!==Wu&&typeof r[0]!="number"&&(V=UE([0,100],r,{clamp:!1}),r=[0,100]);const L=_({...m,keyframes:r});let F;a==="mirror"&&(F=_({...m,keyframes:[...r].reverse(),velocity:-(m.velocity||0)}));let S="idle",y=null,P=null,I=null;L.calculatedDuration===null&&s&&(L.calculatedDuration=Rf(L));const{calculatedDuration:D}=L;let M=1/0,R=1/0;D!==null&&(M=D+o,R=M*(s+1)-o);let re=0;const ue=b=>{if(P===null)return;g>0&&(P=Math.min(P,b)),g<0&&(P=Math.min(b-R/g,P)),y!==null?re=y:re=Math.round(b-P)*g;const U=re-e*(g>=0?1:-1),W=g>=0?U<0:U>R;re=Math.max(U,0),S==="finished"&&y===null&&(re=R);let Z=re,te=L;if(s){const se=re/M;let de=Math.floor(se),ie=se%1;!ie&&se>=1&&(ie=1),ie===1&&de--,de=Math.min(de,s+1);const ve=!!(de%2);ve&&(a==="reverse"?(ie=1-ie,o&&(ie-=o/M)):a==="mirror"&&(te=F));let Me=Br(0,1,ie);re>R&&(Me=a==="reverse"&&ve?1:0),Z=Me*M}const ee=W?{done:!1,value:r[0]}:te.next(Z);V&&(ee.value=V(ee.value));let{done:Q}=ee;!W&&D!==null&&(Q=g>=0?re>=R:re<=0);const he=y===null&&(S==="finished"||S==="running"&&Q);return f&&f(ee.value),he&&H(),ee},Ae=()=>{w&&w.stop(),w=void 0},Ce=()=>{S="idle",Ae(),E(),A(),P=I=null},H=()=>{S="finished",h&&h(),Ae(),E()},Y=()=>{if(v)return;w||(w=n(ue));const b=w.now();u&&u(),y!==null?P=b-y:(!P||S==="finished")&&(P=b),S==="finished"&&A(),I=P,y=null,S="running",w.start()};t&&Y();const N={then(b,U){return k.then(b,U)},get time(){return Dn(re)},set time(b){b=Nr(b),re=b,y!==null||!w||g===0?y=b:P=w.now()-b/g},get duration(){const b=L.calculatedDuration===null?Rf(L):L.calculatedDuration;return Dn(b)},get speed(){return g},set speed(b){b===g||!w||(g=b,N.time=Dn(re))},get state(){return S},play:Y,pause:()=>{S="paused",y=re},stop:()=>{v=!0,S!=="idle"&&(S="idle",c&&c(),Ce())},cancel:()=>{I!==null&&ue(I),Ce()},complete:()=>{S="finished"},sample:b=>(P=0,ue(b))};return N}function GE(t){let e;return()=>(e===void 0&&(e=t()),e)}const _I=GE(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),EI=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Ll=10,TI=2e4,xI=(t,e)=>e.type==="spring"||t==="backgroundColor"||!EE(e.ease);function SI(t,e,{onUpdate:n,onComplete:r,...i}){if(!(_I()&&EI.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,u;const c=()=>{u=new Promise(w=>{a=w})};c();let{keyframes:h,duration:f=300,ease:m,times:g}=i;if(xI(e,i)){const w=Hu({...i,repeat:0,delay:0});let _={done:!1,value:h[0]};const V=[];let L=0;for(;!_.done&&L<TI;)_=w.sample(L),V.push(_.value),L+=Ll;g=void 0,h=V,f=L-Ll,m="linear"}const v=F2(t.owner.current,e,h,{...i,duration:f,ease:m,times:g});i.syncStart&&(v.startTime=it.isProcessing?it.timestamp:document.timeline?document.timeline.currentTime:performance.now());const E=()=>v.cancel(),k=()=>{Re.update(E),a(),c()};return v.onfinish=()=>{t.set(j2(h,i)),r&&r(),k()},{then(w,_){return u.then(w,_)},attachTimeline(w){return v.timeline=w,v.onfinish=null,Ge},get time(){return Dn(v.currentTime||0)},set time(w){v.currentTime=Nr(w)},get speed(){return v.playbackRate},set speed(w){v.playbackRate=w},get duration(){return Dn(f)},play:()=>{o||(v.play(),Mn(E))},pause:()=>v.pause(),stop:()=>{if(o=!0,v.playState==="idle")return;const{currentTime:w}=v;if(w){const _=Hu({...i,autoplay:!1});t.setWithVelocity(_.sample(w-Ll).value,_.sample(w).value,Ll)}k()},complete:()=>v.finish(),cancel:k}}function AI({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Ge,pause:Ge,stop:Ge,then:s=>(s(),Promise.resolve()),cancel:Ge,complete:Ge});return e?Hu({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const CI={type:"spring",stiffness:500,damping:25,restSpeed:10},PI=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),II={type:"keyframes",duration:.8},kI={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},RI=(t,{keyframes:e})=>e.length>2?II:Ni.has(t)?t.startsWith("scale")?PI(e[1]):CI:kI,bf=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&($r.test(e)||e==="0")&&!e.startsWith("url(")),bI=new Set(["brightness","contrast","saturate","opacity"]);function DI(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Vc)||[];if(!r)return t;const i=n.replace(r,"");let s=bI.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const NI=/([a-z-]*)\(.*?\)/g,Df={...$r,getAnimatableNone:t=>{const e=t.match(NI);return e?e.map(DI).join(" "):t}},VI={...iE,color:It,backgroundColor:It,outlineColor:It,fill:It,stroke:It,borderColor:It,borderTopColor:It,borderRightColor:It,borderBottomColor:It,borderLeftColor:It,filter:Df,WebkitFilter:Df},Cp=t=>VI[t];function KE(t,e){let n=Cp(t);return n!==Df&&(n=$r),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const QE=t=>/^0[^.\s]+$/.test(t);function MI(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||QE(t)}function LI(t,e,n,r){const i=bf(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const u=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?o:s[c-1]),MI(s[c])&&u.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(a=s[c]);if(i&&u.length&&a)for(let c=0;c<u.length;c++){const h=u[c];s[h]=KE(e,a)}return s}function OI({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:u,elapsed:c,...h}){return!!Object.keys(h).length}function YE(t,e){return t[e]||t.default||t}const Pp=(t,e,n,r={})=>i=>{const s=YE(r,t)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Nr(o);const u=LI(e,t,n,s),c=u[0],h=u[u.length-1],f=bf(t,c),m=bf(t,h);let g={keyframes:u,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:v=>{e.set(v),s.onUpdate&&s.onUpdate(v)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(OI(s)||(g={...g,...RI(t,g)}),g.duration&&(g.duration=Nr(g.duration)),g.repeatDelay&&(g.repeatDelay=Nr(g.repeatDelay)),!f||!m||O2.current||s.type===!1)return AI(g);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const v=SI(e,t,g);if(v)return v}return Hu(g)};function qu(t){return!!(Ct(t)&&t.add)}const XE=t=>/^\-?\d*\.?\d+$/.test(t);function Ip(t,e){t.indexOf(e)===-1&&t.push(e)}function Oc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class kp{constructor(){this.subscriptions=[]}add(e){return Ip(this.subscriptions,e),()=>Oc(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const FI=t=>!isNaN(parseFloat(t));class jI{constructor(e,n={}){this.version="10.16.4",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=it;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Re.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Re.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=FI(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new kp);const r=this.events[e].add(n);return e==="change"?()=>{r(),Re.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?HE(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Rs(t,e){return new jI(t,e)}const JE=t=>e=>e.test(t),BI={test:t=>t==="auto",parse:t=>t},ZE=[Vi,oe,bn,hr,XP,YP,BI],_o=t=>ZE.find(JE(t)),$I=[...ZE,It,$r],UI=t=>$I.find(JE(t));function zI(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Rs(n))}function WI(t,e){const n=Lc(t,e);let{transitionEnd:r={},transition:i={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const a=h2(s[o]);zI(t,o,a)}}function HI(t,e,n){var r,i;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const u=s[a],c=e[u];let h=null;Array.isArray(c)&&(h=c[0]),h===null&&(h=(i=(r=n[u])!==null&&r!==void 0?r:t.readValue(u))!==null&&i!==void 0?i:e[u]),h!=null&&(typeof h=="string"&&(XE(h)||QE(h))?h=parseFloat(h):!UI(h)&&$r.test(c)&&(h=KE(u,c)),t.addValue(u,Rs(h,{owner:t})),n[u]===void 0&&(n[u]=h),h!==null&&t.setBaseTarget(u,h))}}function qI(t,e){return e?(e[t]||e.default||e).from:void 0}function GI(t,e,n){const r={};for(const i in t){const s=qI(i,e);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function KI({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Rp(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const u=t.getValue("willChange");r&&(s=r);const c=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const f in a){const m=t.getValue(f),g=a[f];if(!m||g===void 0||h&&KI(h,f))continue;const v={delay:n,elapsed:0,...s};if(window.HandoffAppearAnimations&&!m.hasAnimated){const k=t.getProps()[L2];k&&(v.elapsed=window.HandoffAppearAnimations(k,f,m,Re),v.syncStart=!0)}m.start(Pp(f,m,g,t.shouldReduceMotion&&Ni.has(f)?{type:!1}:v));const E=m.animation;qu(u)&&(u.add(f),E.then(()=>u.remove(f))),c.push(E)}return o&&Promise.all(c).then(()=>{o&&WI(t,o)}),c}function Nf(t,e,n={}){const r=Lc(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(Rp(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:f}=i;return QI(t,e,c+u,h,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[u,c]=a==="beforeChildren"?[s,o]:[o,s];return u().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function QI(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,u=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(YI).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(Nf(c,e,{...s,delay:n+u(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function YI(t,e){return t.sortNodePosition(e)}function XI(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Nf(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Nf(t,e,n);else{const i=typeof e=="function"?Lc(t,e,n.custom):e;r=Promise.all(Rp(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const JI=[...hp].reverse(),ZI=hp.length;function ek(t){return e=>Promise.all(e.map(({animation:n,options:r})=>XI(t,n,r)))}function tk(t){let e=ek(t);const n=rk();let r=!0;const i=(u,c)=>{const h=Lc(t,c);if(h){const{transition:f,transitionEnd:m,...g}=h;u={...u,...g,...m}}return u};function s(u){e=u(t)}function o(u,c){const h=t.getProps(),f=t.getVariantContext(!0)||{},m=[],g=new Set;let v={},E=1/0;for(let A=0;A<ZI;A++){const w=JI[A],_=n[w],V=h[w]!==void 0?h[w]:f[w],L=_a(V),F=w===c?_.isActive:null;F===!1&&(E=A);let S=V===f[w]&&V!==h[w]&&L;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),_.protectedKeys={...v},!_.isActive&&F===null||!V&&!_.prevProp||Dc(V)||typeof V=="boolean")continue;const y=nk(_.prevProp,V);let P=y||w===c&&_.isActive&&!S&&L||A>E&&L;const I=Array.isArray(V)?V:[V];let D=I.reduce(i,{});F===!1&&(D={});const{prevResolvedValues:M={}}=_,R={...M,...D},re=ue=>{P=!0,g.delete(ue),_.needsAnimating[ue]=!0};for(const ue in R){const Ae=D[ue],Ce=M[ue];v.hasOwnProperty(ue)||(Ae!==Ce?$u(Ae)&&$u(Ce)?!wE(Ae,Ce)||y?re(ue):_.protectedKeys[ue]=!0:Ae!==void 0?re(ue):g.add(ue):Ae!==void 0&&g.has(ue)?re(ue):_.protectedKeys[ue]=!0)}_.prevProp=V,_.prevResolvedValues=D,_.isActive&&(v={...v,...D}),r&&t.blockInitialAnimation&&(P=!1),P&&!S&&m.push(...I.map(ue=>({animation:ue,options:{type:w,...u}})))}if(g.size){const A={};g.forEach(w=>{const _=t.getBaseTarget(w);_!==void 0&&(A[w]=_)}),m.push({animation:A})}let k=!!m.length;return r&&h.initial===!1&&!t.manuallyAnimateOnMount&&(k=!1),r=!1,k?e(m):Promise.resolve()}function a(u,c,h){var f;if(n[u].isActive===c)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(g=>{var v;return(v=g.animationState)===null||v===void 0?void 0:v.setActive(u,c)}),n[u].isActive=c;const m=o(h,u);for(const g in n)n[g].protectedKeys={};return m}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function nk(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!wE(e,t):!1}function oi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function rk(){return{animate:oi(!0),whileInView:oi(),whileHover:oi(),whileTap:oi(),whileDrag:oi(),whileFocus:oi(),exit:oi()}}class ik extends Xr{constructor(e){super(e),e.animationState||(e.animationState=tk(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Dc(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let sk=0;class ok extends Xr{constructor(){super(...arguments),this.id=sk++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const ak={animation:{Feature:ik},exit:{Feature:ok}},N0=(t,e)=>Math.abs(t-e);function lk(t,e){const n=N0(t.x,e.x),r=N0(t.y,e.y);return Math.sqrt(n**2+r**2)}class eT{constructor(e,n,{transformPagePoint:r}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const c=ad(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,f=lk(c.offset,{x:0,y:0})>=3;if(!h&&!f)return;const{point:m}=c,{timestamp:g}=it;this.history.push({...m,timestamp:g});const{onStart:v,onMove:E}=this.handlers;h||(v&&v(this.lastMoveEvent,c),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,c)},this.handlePointerMove=(c,h)=>{this.lastMoveEvent=c,this.lastMoveEventInfo=od(h,this.transformPagePoint),Re.update(this.updatePoint,!0)},this.handlePointerUp=(c,h)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:f,onSessionEnd:m}=this.handlers,g=ad(c.type==="pointercancel"?this.lastMoveEventInfo:od(h,this.transformPagePoint),this.history);this.startEvent&&f&&f(c,g),m&&m(c,g)},!mE(e))return;this.handlers=n,this.transformPagePoint=r;const i=Mc(e),s=od(i,this.transformPagePoint),{point:o}=s,{timestamp:a}=it;this.history=[{...o,timestamp:a}];const{onSessionStart:u}=n;u&&u(e,ad(s,this.history)),this.removeListeners=Dr(Gn(window,"pointermove",this.handlePointerMove),Gn(window,"pointerup",this.handlePointerUp),Gn(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Mn(this.updatePoint)}}function od(t,e){return e?{point:e(t.point)}:t}function V0(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ad({point:t},e){return{point:t,delta:V0(t,tT(e)),offset:V0(t,uk(e)),velocity:ck(e,.1)}}function uk(t){return t[0]}function tT(t){return t[t.length-1]}function ck(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=tT(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Nr(e)));)n--;if(!r)return{x:0,y:0};const s=Dn(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Zt(t){return t.max-t.min}function Vf(t,e=0,n=.01){return Math.abs(t-e)<=n}function M0(t,e,n,r=.5){t.origin=r,t.originPoint=Fe(e.min,e.max,t.origin),t.scale=Zt(n)/Zt(e),(Vf(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Fe(n.min,n.max,t.origin)-t.originPoint,(Vf(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Yo(t,e,n,r){M0(t.x,e.x,n.x,r?r.originX:void 0),M0(t.y,e.y,n.y,r?r.originY:void 0)}function L0(t,e,n){t.min=n.min+e.min,t.max=t.min+Zt(e)}function hk(t,e,n){L0(t.x,e.x,n.x),L0(t.y,e.y,n.y)}function O0(t,e,n){t.min=e.min-n.min,t.max=t.min+Zt(e)}function Xo(t,e,n){O0(t.x,e.x,n.x),O0(t.y,e.y,n.y)}function dk(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Fe(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Fe(n,t,r.max):Math.min(t,n)),t}function F0(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function fk(t,{top:e,left:n,bottom:r,right:i}){return{x:F0(t.x,n,i),y:F0(t.y,e,r)}}function j0(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function mk(t,e){return{x:j0(t.x,e.x),y:j0(t.y,e.y)}}function pk(t,e){let n=.5;const r=Zt(t),i=Zt(e);return i>r?n=ks(e.min,e.max-r,t.min):r>i&&(n=ks(t.min,t.max-i,e.min)),Br(0,1,n)}function gk(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Mf=.35;function yk(t=Mf){return t===!1?t=0:t===!0&&(t=Mf),{x:B0(t,"left","right"),y:B0(t,"top","bottom")}}function B0(t,e,n){return{min:$0(t,e),max:$0(t,n)}}function $0(t,e){return typeof t=="number"?t:t[e]||0}const U0=()=>({translate:0,scale:1,origin:0,originPoint:0}),ds=()=>({x:U0(),y:U0()}),z0=()=>({min:0,max:0}),Qe=()=>({x:z0(),y:z0()});function Pn(t){return[t("x"),t("y")]}function nT({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function vk({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function wk(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ld(t){return t===void 0||t===1}function Lf({scale:t,scaleX:e,scaleY:n}){return!ld(t)||!ld(e)||!ld(n)}function ui(t){return Lf(t)||rT(t)||t.z||t.rotate||t.rotateX||t.rotateY}function rT(t){return W0(t.x)||W0(t.y)}function W0(t){return t&&t!=="0%"}function Gu(t,e,n){const r=t-n,i=e*r;return n+i}function H0(t,e,n,r,i){return i!==void 0&&(t=Gu(t,i,r)),Gu(t,n,r)+e}function Of(t,e=0,n=1,r,i){t.min=H0(t.min,e,n,r,i),t.max=H0(t.max,e,n,r,i)}function iT(t,{x:e,y:n}){Of(t.x,e.translate,e.scale,e.originPoint),Of(t.y,n.translate,n.scale,n.originPoint)}function _k(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const u=s.instance;u&&u.style&&u.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&fs(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,iT(t,o)),r&&ui(s.latestValues)&&fs(t,s.latestValues))}e.x=q0(e.x),e.y=q0(e.y)}function q0(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function mr(t,e){t.min=t.min+e,t.max=t.max+e}function G0(t,e,[n,r,i]){const s=e[i]!==void 0?e[i]:.5,o=Fe(t.min,t.max,s);Of(t,e[n],e[r],o,e.scale)}const Ek=["x","scaleX","originX"],Tk=["y","scaleY","originY"];function fs(t,e){G0(t.x,e,Ek),G0(t.y,e,Tk)}function sT(t,e){return nT(wk(t.getBoundingClientRect(),e))}function xk(t,e,n){const r=sT(t,n),{scroll:i}=e;return i&&(mr(r.x,i.offset.x),mr(r.y,i.offset.y)),r}const Sk=new WeakMap;class Ak{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Qe(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{this.stopAnimation(),n&&this.snapToCursor(Mc(u,"page").point)},s=(u,c)=>{const{drag:h,dragPropagation:f,onDragStart:m}=this.getProps();if(h&&!f&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=gE(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Pn(v=>{let E=this.getAxisMotionValue(v).get()||0;if(bn.test(E)){const{projection:k}=this.visualElement;if(k&&k.layout){const A=k.layout.layoutBox[v];A&&(E=Zt(A)*(parseFloat(E)/100))}}this.originPoint[v]=E}),m&&Re.update(()=>m(u,c),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(u,c)=>{const{dragPropagation:h,dragDirectionLock:f,onDirectionLock:m,onDrag:g}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:v}=c;if(f&&this.currentDirection===null){this.currentDirection=Ck(v),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",c.point,v),this.updateAxis("y",c.point,v),this.visualElement.render(),g&&g(u,c)},a=(u,c)=>this.stop(u,c);this.panSession=new eT(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Re.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Ol(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=dk(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),{layout:r}=this.visualElement.projection||{},i=this.constraints;e&&cs(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=fk(r.layoutBox,e):this.constraints=!1,this.elastic=yk(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Pn(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=gk(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!cs(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=xk(r,i.root,this.visualElement.getTransformPagePoint());let o=mk(i.layout.layoutBox,s);if(n){const a=n(vk(o));this.hasMutatedConstraints=!!a,a&&(o=nT(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),u=this.constraints||{},c=Pn(h=>{if(!Ol(h,n,this.currentDirection))return;let f=u[h]||{};o&&(f={min:0,max:0});const m=i?200:1e6,g=i?40:1e7,v={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(h,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(Pp(e,r,0,n))}stopAnimation(){Pn(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Pn(n=>{const{drag:r}=this.getProps();if(!Ol(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Fe(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!cs(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Pn(o=>{const a=this.getAxisMotionValue(o);if(a){const u=a.get();i[o]=pk({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Pn(o=>{if(!Ol(o,e,null))return;const a=this.getAxisMotionValue(o),{min:u,max:c}=this.constraints[o];a.set(Fe(u,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;Sk.set(this.visualElement,this);const e=this.visualElement.current,n=Gn(e,"pointerdown",u=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();cs(u)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=Wn(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:c})=>{this.isDragging&&c&&(Pn(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=u[h].translate,f.set(f.get()+u[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Mf,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Ol(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Ck(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Pk extends Xr{constructor(e){super(e),this.removeGroupControls=Ge,this.removeListeners=Ge,this.controls=new Ak(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ge}unmount(){this.removeGroupControls(),this.removeListeners()}}const K0=t=>(e,n)=>{t&&Re.update(()=>t(e,n))};class Ik extends Xr{constructor(){super(...arguments),this.removePointerDownListener=Ge}onPointerDown(e){this.session=new eT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:K0(e),onStart:K0(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Re.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=Gn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function kk(){const t=T.useContext(Rc);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=T.useId();return T.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const ou={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Q0(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Eo={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(oe.test(t))t=parseFloat(t);else return t;const n=Q0(t,e.target.x),r=Q0(t,e.target.y);return`${n}% ${r}%`}},Rk={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=$r.parse(t);if(i.length>5)return r;const s=$r.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=u;const c=Fe(a,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class bk extends X.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;zP(Dk),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),ou.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Re.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function oT(t){const[e,n]=kk(),r=T.useContext(fp);return X.createElement(bk,{...t,layoutGroup:r,switchLayoutGroup:T.useContext(Z_),isPresent:e,safeToRemove:n})}const Dk={borderRadius:{...Eo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Eo,borderTopRightRadius:Eo,borderBottomLeftRadius:Eo,borderBottomRightRadius:Eo,boxShadow:Rk},aT=["TopLeft","TopRight","BottomLeft","BottomRight"],Nk=aT.length,Y0=t=>typeof t=="string"?parseFloat(t):t,X0=t=>typeof t=="number"||oe.test(t);function Vk(t,e,n,r,i,s){i?(t.opacity=Fe(0,n.opacity!==void 0?n.opacity:1,Mk(r)),t.opacityExit=Fe(e.opacity!==void 0?e.opacity:1,0,Lk(r))):s&&(t.opacity=Fe(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<Nk;o++){const a=`border${aT[o]}Radius`;let u=J0(e,a),c=J0(n,a);if(u===void 0&&c===void 0)continue;u||(u=0),c||(c=0),u===0||c===0||X0(u)===X0(c)?(t[a]=Math.max(Fe(Y0(u),Y0(c),r),0),(bn.test(c)||bn.test(u))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Fe(e.rotate||0,n.rotate||0,r))}function J0(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Mk=lT(0,.5,Tp),Lk=lT(.5,.95,Ge);function lT(t,e,n){return r=>r<t?0:r>e?1:n(ks(t,e,r))}function Z0(t,e){t.min=e.min,t.max=e.max}function sn(t,e){Z0(t.x,e.x),Z0(t.y,e.y)}function ev(t,e,n,r,i){return t-=e,t=Gu(t,1/n,r),i!==void 0&&(t=Gu(t,1/i,r)),t}function Ok(t,e=0,n=1,r=.5,i,s=t,o=t){if(bn.test(e)&&(e=parseFloat(e),e=Fe(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Fe(s.min,s.max,r);t===s&&(a-=e),t.min=ev(t.min,e,n,a,i),t.max=ev(t.max,e,n,a,i)}function tv(t,e,[n,r,i],s,o){Ok(t,e[n],e[r],e[i],e.scale,s,o)}const Fk=["x","scaleX","originX"],jk=["y","scaleY","originY"];function nv(t,e,n,r){tv(t.x,e,Fk,n?n.x:void 0,r?r.x:void 0),tv(t.y,e,jk,n?n.y:void 0,r?r.y:void 0)}function rv(t){return t.translate===0&&t.scale===1}function uT(t){return rv(t.x)&&rv(t.y)}function Bk(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function cT(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function iv(t){return Zt(t.x)/Zt(t.y)}class $k{constructor(){this.members=[]}add(e){Ip(this.members,e),e.scheduleRender()}remove(e){if(Oc(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function sv(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:u,rotateX:c,rotateY:h}=n;u&&(r+=`rotate(${u}deg) `),c&&(r+=`rotateX(${c}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const Uk=(t,e)=>t.depth-e.depth;class zk{constructor(){this.children=[],this.isDirty=!1}add(e){Ip(this.children,e),this.isDirty=!0}remove(e){Oc(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Uk),this.isDirty=!1,this.children.forEach(e)}}function Wk(t,e){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Mn(r),t(s-e))};return Re.read(r,!0),()=>Mn(r)}function Hk(t){window.MotionDebug&&window.MotionDebug.record(t)}function hT(t){return t instanceof SVGElement&&t.tagName!=="svg"}function bp(t,e,n){const r=Ct(t)?t:Rs(t);return r.start(Pp("",r,e,n)),r.animation}const ov=["","X","Y","Z"],av=1e3;let qk=0;const ci={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function dT({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=qk++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{ci.totalNodes=ci.resolvedTargetDeltas=ci.recalculatedProjection=0,this.nodes.forEach(Qk),this.nodes.forEach(eR),this.nodes.forEach(tR),this.nodes.forEach(Yk),Hk(ci)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new zk)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new kp),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const u=this.eventHandlers.get(o);u&&u.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=hT(o),this.instance=o;const{layoutId:u,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||u)&&(this.isLayoutDirty=!0),t){let f;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Wk(m,250),ou.hasAnimatedSinceResize&&(ou.hasAnimatedSinceResize=!1,this.nodes.forEach(uv))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&h&&(u||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeTargetChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||h.getDefaultTransition()||oR,{onLayoutAnimationStart:k,onLayoutAnimationComplete:A}=h.getProps(),w=!this.targetLayout||!cT(this.targetLayout,v)||g,_=!m&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||m&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,_);const V={...YE(E,"layout"),onPlay:k,onComplete:A};(h.shouldReduceMotion||this.options.layoutRoot)&&(V.delay=0,V.type=!1),this.startAnimation(V)}else m||uv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Mn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(nR),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:u}=this.options;if(a===void 0&&!u)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(lv);return}this.isUpdating||this.nodes.forEach(Jk),this.isUpdating=!1,this.nodes.forEach(Zk),this.nodes.forEach(Gk),this.nodes.forEach(Kk),this.clearAllSnapshots();const a=performance.now();it.delta=Br(0,1e3/60,a-it.timestamp),it.timestamp=a,it.isProcessing=!0,Jh.update.process(it),Jh.preRender.process(it),Jh.render.process(it),it.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Xk),this.sharedNodes.forEach(rR)}scheduleUpdateProjection(){Re.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){Re.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Qe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!uT(this.projectionDelta),u=this.getTransformTemplate(),c=u?u(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||ui(this.latestValues)||h)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let u=this.removeElementScroll(a);return o&&(u=this.removeTransform(u)),aR(u),{animationId:this.root.animationId,measuredBox:a,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Qe();const a=o.measureViewportBox(),{scroll:u}=this.root;return u&&(mr(a.x,u.offset.x),mr(a.y,u.offset.y)),a}removeElementScroll(o){const a=Qe();sn(a,o);for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:h,options:f}=c;if(c!==this.root&&h&&f.layoutScroll){if(h.isRoot){sn(a,o);const{scroll:m}=this.root;m&&(mr(a.x,-m.offset.x),mr(a.y,-m.offset.y))}mr(a.x,h.offset.x),mr(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const u=Qe();sn(u,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&fs(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),ui(h.latestValues)&&fs(u,h.latestValues)}return ui(this.latestValues)&&fs(u,this.latestValues),u}removeTransform(o){const a=Qe();sn(a,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];if(!c.instance||!ui(c.latestValues))continue;Lf(c.latestValues)&&c.updateSnapshot();const h=Qe(),f=c.measurePageBox();sn(h,f),nv(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return ui(this.latestValues)&&nv(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==it.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=it.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qe(),this.relativeTargetOrigin=Qe(),Xo(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),sn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Qe(),this.targetWithTransforms=Qe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hk(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):sn(this.target,this.layout.layoutBox),iT(this.target,this.targetDelta)):sn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qe(),this.relativeTargetOrigin=Qe(),Xo(this.relativeTargetOrigin,this.target,g.target),sn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ci.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Lf(this.parent.latestValues)||rT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),u=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===it.timestamp&&(c=!1),c)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;sn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;_k(this.layoutCorrected,this.treeScale,this.path,u),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:v}=a;if(!v){this.projectionTransform&&(this.projectionDelta=ds(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ds(),this.projectionDeltaWithTransform=ds());const E=this.projectionTransform;Yo(this.projectionDelta,this.layoutCorrected,v,this.latestValues),this.projectionTransform=sv(this.projectionDelta,this.treeScale),(this.projectionTransform!==E||this.treeScale.x!==m||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),ci.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const u=this.snapshot,c=u?u.latestValues:{},h={...this.latestValues},f=ds();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=Qe(),g=u?u.source:void 0,v=this.layout?this.layout.source:void 0,E=g!==v,k=this.getStack(),A=!k||k.members.length<=1,w=!!(E&&!A&&this.options.crossfade===!0&&!this.path.some(sR));this.animationProgress=0;let _;this.mixTargetDelta=V=>{const L=V/1e3;cv(f.x,o.x,L),cv(f.y,o.y,L),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xo(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),iR(this.relativeTarget,this.relativeTargetOrigin,m,L),_&&Bk(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=Qe()),sn(_,this.relativeTarget)),E&&(this.animationValues=h,Vk(h,c,this.latestValues,L,w,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Mn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Re.update(()=>{ou.hasAnimatedSinceResize=!0,this.currentAnimation=bp(0,av,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(av),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:u,layout:c,latestValues:h}=o;if(!(!a||!u||!c)){if(this!==o&&this.layout&&c&&fT(this.options.animationType,this.layout.layoutBox,c.layoutBox)){u=this.target||Qe();const f=Zt(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+f;const m=Zt(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}sn(a,u),fs(a,h),Yo(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new $k),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:u}={}){const c=this.getStack();c&&c.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:u}=o;if((u.rotate||u.rotateX||u.rotateY||u.rotateZ)&&(a=!0),!a)return;const c={};for(let h=0;h<ov.length;h++){const f="rotate"+ov[h];u[f]&&(c[f]=u[f],o.setStaticValue(f,0))}o.render();for(const h in c)o.setStaticValue(h,c[h]);o.scheduleRender()}getProjectionStyles(o={}){var a,u;const c={};if(!this.instance||this.isSVG)return c;if(this.isVisible)c.visibility="";else return{visibility:"hidden"};const h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=su(o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const E={};return this.options.layoutId&&(E.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,E.pointerEvents=su(o.pointerEvents)||""),this.hasProjected&&!ui(this.latestValues)&&(E.transform=h?h({},""):"none",this.hasProjected=!1),E}const m=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=sv(this.projectionDeltaWithTransform,this.treeScale,m),h&&(c.transform=h(m,c.transform));const{x:g,y:v}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,f.animationValues?c.opacity=f===this?(u=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const E in ju){if(m[E]===void 0)continue;const{correct:k,applyTo:A}=ju[E],w=c.transform==="none"?m[E]:k(m[E],f);if(A){const _=A.length;for(let V=0;V<_;V++)c[A[V]]=w}else c[E]=w}return this.options.layoutId&&(c.pointerEvents=f===this?su(o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(lv),this.root.sharedNodes.clear()}}}function Gk(t){t.updateLayout()}function Kk(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Pn(f=>{const m=o?n.measuredBox[f]:n.layoutBox[f],g=Zt(m);m.min=r[f].min,m.max=m.min+g}):fT(s,n.layoutBox,r)&&Pn(f=>{const m=o?n.measuredBox[f]:n.layoutBox[f],g=Zt(r[f]);m.max=m.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const a=ds();Yo(a,r,n.layoutBox);const u=ds();o?Yo(u,t.applyTransform(i,!0),n.measuredBox):Yo(u,r,n.layoutBox);const c=!uT(a);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:g}=f;if(m&&g){const v=Qe();Xo(v,n.layoutBox,m.layoutBox);const E=Qe();Xo(E,r,g.layoutBox),cT(v,E)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=E,t.relativeTargetOrigin=v,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Qk(t){ci.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Yk(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Xk(t){t.clearSnapshot()}function lv(t){t.clearMeasurements()}function Jk(t){t.isLayoutDirty=!1}function Zk(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function uv(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function eR(t){t.resolveTargetDelta()}function tR(t){t.calcProjection()}function nR(t){t.resetRotation()}function rR(t){t.removeLeadSnapshot()}function cv(t,e,n){t.translate=Fe(e.translate,0,n),t.scale=Fe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function hv(t,e,n,r){t.min=Fe(e.min,n.min,r),t.max=Fe(e.max,n.max,r)}function iR(t,e,n,r){hv(t.x,e.x,n.x,r),hv(t.y,e.y,n.y,r)}function sR(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const oR={duration:.45,ease:[.4,0,.1,1]},dv=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),fv=dv("applewebkit/")&&!dv("chrome/")?Math.round:Ge;function mv(t){t.min=fv(t.min),t.max=fv(t.max)}function aR(t){mv(t.x),mv(t.y)}function fT(t,e,n){return t==="position"||t==="preserve-aspect"&&!Vf(iv(e),iv(n),.2)}const lR=dT({attachResizeListener:(t,e)=>Wn(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ud={current:void 0},mT=dT({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ud.current){const t=new lR({});t.mount(window),t.setOptions({layoutScroll:!0}),ud.current=t}return ud.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),uR={pan:{Feature:Ik},drag:{Feature:Pk,ProjectionNode:mT,MeasureLayout:oT}},cR=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function hR(t){const e=cR.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function Ff(t,e,n=1){const[r,i]=hR(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return XE(o)?parseFloat(o):o}else return Af(i)?Ff(i,e,n+1):i}function dR(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const s=i.get();if(!Af(s))return;const o=Ff(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!Af(s))continue;const o=Ff(s,r);o&&(e[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:e,transitionEnd:n}}const fR=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),pT=t=>fR.has(t),mR=t=>Object.keys(t).some(pT),pv=t=>t===Vi||t===oe,gv=(t,e)=>parseFloat(t.split(", ")[e]),yv=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return gv(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?gv(s[1],t):0}},pR=new Set(["x","y","z"]),gR=Ba.filter(t=>!pR.has(t));function yR(t){const e=[];return gR.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const bs={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:yv(4,13),y:yv(5,14)};bs.translateX=bs.x;bs.translateY=bs.y;const vR=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=bs[c](r,s)}),e.render();const u=e.measureViewportBox();return n.forEach(c=>{const h=e.getValue(c);h&&h.jump(a[c]),t[c]=bs[c](u,s)}),t},wR=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(pT);let s=[],o=!1;const a=[];if(i.forEach(u=>{const c=t.getValue(u);if(!t.hasValue(u))return;let h=n[u],f=_o(h);const m=e[u];let g;if($u(m)){const v=m.length,E=m[0]===null?1:0;h=m[E],f=_o(h);for(let k=E;k<v&&m[k]!==null;k++)g?Uu(_o(m[k])===g):g=_o(m[k])}else g=_o(m);if(f!==g)if(pv(f)&&pv(g)){const v=c.get();typeof v=="string"&&c.set(parseFloat(v)),typeof m=="string"?e[u]=parseFloat(m):Array.isArray(m)&&g===oe&&(e[u]=m.map(parseFloat))}else f!=null&&f.transform&&(g!=null&&g.transform)&&(h===0||m===0)?h===0?c.set(g.transform(h)):e[u]=f.transform(m):(o||(s=yR(t),o=!0),a.push(u),r[u]=r[u]!==void 0?r[u]:e[u],c.jump(m))}),a.length){const u=a.indexOf("height")>=0?window.pageYOffset:null,c=vR(e,t,a);return s.length&&s.forEach(([h,f])=>{t.getValue(h).set(f)}),t.render(),bc&&u!==null&&window.scrollTo({top:u}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function _R(t,e,n,r){return mR(e)?wR(t,e,n,r):{target:e,transitionEnd:r}}const ER=(t,e,n,r)=>{const i=dR(t,e,r);return e=i.target,r=i.transitionEnd,_R(t,e,n,r)},jf={current:null},gT={current:!1};function TR(){if(gT.current=!0,!!bc)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>jf.current=t.matches;t.addListener(e),e()}else jf.current=!1}function xR(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],o=n[i];if(Ct(s))t.addValue(i,s),qu(r)&&r.add(i);else if(Ct(o))t.addValue(i,Rs(s,{owner:t})),qu(r)&&r.remove(i);else if(o!==s)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,Rs(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const Ta=new WeakMap,yT=Object.keys(Ea),SR=yT.length,vv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],AR=dp.length;class CR{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Re.render(this.render,!1,!0);const{latestValues:a,renderState:u}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=Nc(n),this.isVariantNode=J_(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(n,{});for(const f in h){const m=h[f];a[f]!==void 0&&Ct(m)&&(m.set(a[f],!1),qu(c)&&c.add(f))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Ta.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),gT.current||TR(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:jf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Ta.delete(this.current),this.projection&&this.projection.unmount(),Mn(this.notifyUpdate),Mn(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Ni.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Re.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,s){let o,a;for(let u=0;u<SR;u++){const c=yT[u],{isEnabled:h,Feature:f,ProjectionNode:m,MeasureLayout:g}=Ea[c];m&&(o=m),h(n)&&(!this.features[c]&&f&&(this.features[c]=new f(this)),g&&(a=g))}if(!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:u,layout:c,drag:h,dragConstraints:f,layoutScroll:m,layoutRoot:g}=n;this.projection.setOptions({layoutId:u,layout:c,alwaysMeasureLayout:!!h||f&&cs(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:m,layoutRoot:g})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Qe()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<vv.length;r++){const i=vv[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=xR(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<AR;r++){const i=dp[r],s=this.props[i];(_a(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Rs(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=Ep(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ct(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new kp),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class vT extends CR{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},s){let o=GI(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){HI(this,r,o);const a=ER(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function PR(t){return window.getComputedStyle(t)}class wT extends vT{readValueFromInstance(e,n){if(Ni.has(n)){const r=Cp(n);return r&&r.default||0}else{const r=PR(e),i=(nE(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return sT(e,n)}build(e,n,r,i){pp(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return _p(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ct(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){lE(e,n,r,i)}}class _T extends vT{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ni.has(n)){const r=Cp(n);return r&&r.default||0}return n=uE.has(n)?n:wp(n),e.getAttribute(n)}measureInstanceViewportBox(){return Qe()}scrapeMotionValuesFromProps(e,n){return hE(e,n)}build(e,n,r,i){yp(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){cE(e,n,r,i)}mount(e){this.isSVGTag=vp(e.tagName),super.mount(e)}}const IR=(t,e)=>mp(t)?new _T(e,{enableHardwareAcceleration:!1}):new wT(e,{enableHardwareAcceleration:!0}),kR={layout:{ProjectionNode:mT,MeasureLayout:oT}},RR={...ak,...D2,...uR,...kR},me=$P((t,e)=>w2(t,e,RR,IR));function ET(){const t=T.useRef(!1);return cp(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function bR(){const t=ET(),[e,n]=T.useState(0),r=T.useCallback(()=>{t.current&&n(e+1)},[e]);return[T.useCallback(()=>Re.postRender(r),[r]),e]}class DR extends T.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function NR({children:t,isPresent:e}){const n=T.useId(),r=T.useRef(null),i=T.useRef({width:0,height:0,top:0,left:0});return T.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:u}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),T.createElement(DR,{isPresent:e,childRef:r,sizeRef:i},T.cloneElement(t,{ref:r}))}const cd=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=dE(VR),u=T.useId(),c=T.useMemo(()=>({id:u,initial:e,isPresent:n,custom:i,onExitComplete:h=>{a.set(h,!0);for(const f of a.values())if(!f)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),s?void 0:[n]);return T.useMemo(()=>{a.forEach((h,f)=>a.set(f,!1))},[n]),T.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=T.createElement(NR,{isPresent:n},t)),T.createElement(Rc.Provider,{value:c},t)};function VR(){return new Map}function MR(t){return T.useEffect(()=>()=>t(),[])}const Gi=t=>t.key||"";function LR(t,e){t.forEach(n=>{const r=Gi(n);e.set(r,n)})}function OR(t){const e=[];return T.Children.forEach(t,n=>{T.isValidElement(n)&&e.push(n)}),e}const Dp=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=T.useContext(fp).forceRender||bR()[0],u=ET(),c=OR(t);let h=c;const f=T.useRef(new Map).current,m=T.useRef(h),g=T.useRef(new Map).current,v=T.useRef(!0);if(cp(()=>{v.current=!1,LR(c,g),m.current=h}),MR(()=>{v.current=!0,g.clear(),f.clear()}),v.current)return T.createElement(T.Fragment,null,h.map(w=>T.createElement(cd,{key:Gi(w),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o},w)));h=[...h];const E=m.current.map(Gi),k=c.map(Gi),A=E.length;for(let w=0;w<A;w++){const _=E[w];k.indexOf(_)===-1&&!f.has(_)&&f.set(_,void 0)}return o==="wait"&&f.size&&(h=[]),f.forEach((w,_)=>{if(k.indexOf(_)!==-1)return;const V=g.get(_);if(!V)return;const L=E.indexOf(_);let F=w;if(!F){const S=()=>{g.delete(_),f.delete(_);const y=m.current.findIndex(P=>P.key===_);if(m.current.splice(y,1),!f.size){if(m.current=c,u.current===!1)return;a(),r&&r()}};F=T.createElement(cd,{key:Gi(V),isPresent:!1,onExitComplete:S,custom:e,presenceAffectsLayout:s,mode:o},V),f.set(_,F)}h.splice(L,0,F)}),h=h.map(w=>{const _=w.key;return f.has(_)?w:T.createElement(cd,{key:Gi(w),isPresent:!0,presenceAffectsLayout:s,mode:o},w)}),T.createElement(T.Fragment,null,f.size?h:h.map(w=>T.cloneElement(w)))};function TT(t,e,n){var r;if(typeof t=="string"){let i=document;n?((r=n[t])!==null&&r!==void 0||(n[t]=i.querySelectorAll(t)),t=n[t]):t=i.querySelectorAll(t)}else t instanceof Element&&(t=[t]);return Array.from(t||[])}function FR(t,e){let n;const r=()=>{const{currentTime:i}=e,o=(i===null?0:i.value)/100;n!==o&&t(o),n=o};return Re.update(r,!0),()=>Mn(r)}const jR=GE(()=>window.ScrollTimeline!==void 0);class xT{constructor(e){this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e){const n=this.animations.map(r=>{if(jR()&&r.attachTimeline)r.attachTimeline(e);else return r.pause(),FR(i=>{r.time=r.duration*i},e)});return()=>{n.forEach((r,i)=>{r&&r(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}stop(){this.runAll("stop")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function BR(t){return typeof t=="object"&&!Array.isArray(t)}function $R(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=hT(t)?new _T(e,{enableHardwareAcceleration:!1}):new wT(e,{enableHardwareAcceleration:!0});n.mount(t),Ta.set(t,n)}function UR(t,e=100){const n=Ap({keyframes:[0,e],...t}),r=Math.min(Rf(n),kf);return{type:"keyframes",ease:i=>n.next(r*i).value/e,duration:Dn(r)}}function wv(t,e,n,r){var i;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?n:(i=r.get(e))!==null&&i!==void 0?i:t}const zR=(t,e,n)=>{const r=e-t;return((n-t)%r+r)%r+t};function WR(t,e){return CE(t)?t[zR(0,t.length,e)]:t}function HR(t,e,n){for(let r=0;r<t.length;r++){const i=t[r];i.at>e&&i.at<n&&(Oc(t,i),r--)}}function qR(t,e,n,r,i,s){HR(t,i,s);for(let o=0;o<e.length;o++)t.push({value:e[o],at:Fe(i,s,r[o]),easing:WR(n,o)})}function GR(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const KR="easeInOut";function QR(t,{defaultTransition:e={},...n}={},r){const i=e.duration||.3,s=new Map,o=new Map,a={},u=new Map;let c=0,h=0,f=0;for(let m=0;m<t.length;m++){const g=t[m];if(typeof g=="string"){u.set(g,h);continue}else if(!Array.isArray(g)){u.set(g.name,wv(h,g.at,c,u));continue}let[v,E,k={}]=g;k.at!==void 0&&(h=wv(h,k.at,c,u));let A=0;const w=(_,V,L,F=0,S=0)=>{const y=YR(_),{delay:P=0,times:I=WE(y),type:D="keyframes",...M}=V;let{ease:R=e.ease||"easeOut",duration:re}=V;const ue=typeof P=="function"?P(F,S):P,Ae=y.length;if(Ae<=2&&D==="spring"){let N=100;if(Ae===2&&ZR(y)){const W=y[1]-y[0];N=Math.abs(W)}const b={...M};re!==void 0&&(b.duration=Nr(re));const U=UR(b,N);R=U.ease,re=U.duration}re??(re=i);const Ce=h+ue,H=Ce+re;I.length===1&&I[0]===0&&(I[1]=1);const Y=I.length-y.length;Y>0&&zE(I,Y),y.length===1&&y.unshift(null),qR(L,y,R,I,Ce,H),A=Math.max(ue+re,A),f=Math.max(H,f)};if(Ct(v)){const _=_v(v,o);w(E,k,Ev("default",_))}else{const _=TT(v,r,a),V=_.length;for(let L=0;L<V;L++){E=E,k=k;const F=_[L],S=_v(F,o);for(const y in E)w(E[y],XR(k,y),Ev(y,S),L,V)}c=h,h+=A}}return o.forEach((m,g)=>{for(const v in m){const E=m[v];E.sort(GR);const k=[],A=[],w=[];for(let V=0;V<E.length;V++){const{at:L,value:F,easing:S}=E[V];k.push(F),A.push(ks(0,f,L)),w.push(S||"easeOut")}A[0]!==0&&(A.unshift(0),k.unshift(k[0]),w.unshift(KR)),A[A.length-1]!==1&&(A.push(1),k.push(null)),s.has(g)||s.set(g,{keyframes:{},transition:{}});const _=s.get(g);_.keyframes[v]=k,_.transition[v]={...e,duration:f,ease:w,times:A,...n}}}),s}function _v(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function Ev(t,e){return e[t]||(e[t]=[]),e[t]}function YR(t){return Array.isArray(t)?t:[t]}function XR(t,e){return t[e]?{...t,...t[e]}:{...t}}const JR=t=>typeof t=="number",ZR=t=>t.every(JR);function ST(t,e,n,r){const i=TT(t),s=i.length,o=[];for(let a=0;a<s;a++){const u=i[a];Ta.has(u)||$R(u);const c=Ta.get(u),h={...n};typeof h.delay=="function"&&(h.delay=h.delay(a,s)),o.push(...Rp(c,{...e,transition:h},{}))}return new xT(o)}const eb=t=>Array.isArray(t)&&Array.isArray(t[0]);function tb(t,e,n){const r=[];return QR(t,e,n).forEach(({keyframes:s,transition:o},a)=>{let u;Ct(a)?u=bp(a,s.default,o.default):u=ST(a,s,o),r.push(u)}),new xT(r)}const nb=t=>{function e(n,r,i){let s;return eb(n)?s=tb(n,r,t):BR(r)?s=ST(n,r,i):s=bp(n,r,i),s}return e},rb=nb(),ib=()=>C.jsx(me.div,{className:"fixed inset-0 flex items-center justify-center bg-primary-50",initial:{opacity:1},animate:{opacity:0},transition:{duration:2,delay:2},onAnimationComplete:()=>{document.body.style.overflow="auto"},children:C.jsxs(me.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20,duration:1.5},className:"text-center",children:[C.jsx(me.h1,{className:"text-4xl md:text-6xl font-display text-primary-600",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},children:"Together Time Evening"}),C.jsx(me.p,{className:"mt-4 text-lg text-primary-400",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8},children:"Let's make every moment special "})]})}),sb="modulepreload",ob=function(t){return"/new-year-2025/"+t},Tv={},ab=function(e,n,r){let i=Promise.resolve();return n&&n.length>0&&(document.getElementsByTagName("link"),i=Promise.all(n.map(s=>{if(s=ob(s),s in Tv)return;Tv[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":sb,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((c,h)=>{u.addEventListener("load",c),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})}))),i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function Ku(){return Ku=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ku.apply(null,arguments)}function lb(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ub(t){T.useEffect(t,[])}var cb=["id","volume","playbackRate","soundEnabled","interrupt","onload"];function pr(t,e){var n=e===void 0?{}:e,r=n.volume,i=r===void 0?1:r,s=n.playbackRate,o=s===void 0?1:s,a=n.soundEnabled,u=a===void 0?!0:a,c=n.interrupt,h=c===void 0?!1:c,f=n.onload,m=lb(n,cb),g=X.useRef(null),v=X.useRef(!1),E=X.useState(null),k=E[0],A=E[1],w=X.useState(null),_=w[0],V=w[1],L=function(){typeof f=="function"&&f.call(this),v.current&&A(this.duration()*1e3),V(this)};ub(function(){return ab(()=>import("./howler-C1a5XMaE.js").then(I=>I.h),__vite__mapDeps([])).then(function(I){if(!v.current){var D;g.current=(D=I.Howl)!==null&&D!==void 0?D:I.default.Howl,v.current=!0,new g.current(Ku({src:Array.isArray(t)?t:[t],volume:i,rate:o,onload:L},m))}}),function(){v.current=!1}}),X.useEffect(function(){g.current&&_&&V(new g.current(Ku({src:Array.isArray(t)?t:[t],volume:i,onload:L},m)))},[JSON.stringify(t)]),X.useEffect(function(){_&&(_.volume(i),_.rate(o))},[i,o]);var F=X.useCallback(function(I){typeof I>"u"&&(I={}),!(!_||!u&&!I.forceSoundEnabled)&&(h&&_.stop(),I.playbackRate&&_.rate(I.playbackRate),_.play(I.id))},[_,u,h]),S=X.useCallback(function(I){_&&_.stop(I)},[_]),y=X.useCallback(function(I){_&&_.pause(I)},[_]),P=[F,{sound:_,stop:S,pause:y,duration:k}];return P}const gr={SPIN:"/sounds/spin.mp3",WIN:"/sounds/win.mp3",CLICK:"/sounds/click.mp3",HOVER:"/sounds/hover.mp3",SELECT:"/sounds/select.mp3",START:"/sounds/start.mp3"},Wa=()=>{const{settings:t}=ja(),e=t.soundEnabled?.5:0,[n]=pr(gr.CLICK,{volume:e*.5}),[r]=pr(gr.HOVER,{volume:e*.3}),[i]=pr(gr.SELECT,{volume:e}),[s]=pr(gr.START,{volume:e}),[o]=pr(gr.WIN,{volume:e}),[a]=pr(gr.SPIN,{volume:e});return{playClick:n,playHover:r,playSelect:i,playStart:s,playWin:o,playSpin:a}},Hi=[{title:"Welcome to Together Time Quest! ",description:"Let's make choosing activities fun and exciting together.",image:""},{title:"Spin the Wheel ",description:"Add your favorite activities and let the wheel decide what to do next!",image:""},{title:"Customize Activities ",description:"Create and manage your own list of activities to keep things fresh.",image:""}],hb=({onComplete:t})=>{const[e,n]=T.useState(0),{playSelect:r}=Wa(),{updateSettings:i}=ja(),s=()=>{r(),e===Hi.length-1?(i({hasCompletedOnboarding:!0}),t()):n(o=>o+1)};return C.jsx("div",{className:"fixed inset-0 bg-white dark:bg-gray-900 z-50 flex items-center justify-center",children:C.jsx(Dp,{mode:"wait",children:C.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-md mx-auto px-4 text-center space-y-8",children:[C.jsx(me.div,{className:"text-8xl",animate:{scale:[1,1.2,1]},transition:{duration:.5},children:Hi[e].image}),C.jsxs("div",{className:"space-y-4",children:[C.jsx("h2",{className:"text-2xl font-display text-primary-800 dark:text-primary-200",children:Hi[e].title}),C.jsx("p",{className:"text-primary-600 dark:text-primary-400",children:Hi[e].description})]}),C.jsxs("div",{className:"space-y-4",children:[C.jsx("div",{className:"flex justify-center space-x-2",children:Hi.map((o,a)=>C.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${a===e?"bg-primary-600 dark:bg-primary-400":"bg-primary-200 dark:bg-primary-800"}`},a))}),C.jsx(me.button,{onClick:s,className:"px-8 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 dark:bg-primary-500 dark:hover:bg-primary-600",whileHover:{scale:1.05},whileTap:{scale:.95},children:e===Hi.length-1?"Get Started":"Next"})]})]},e)})})};function db({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const AT=T.forwardRef(db);function fb({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"}))}const CT=T.forwardRef(fb);function mb({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const pb=T.forwardRef(mb);function gb({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const yb=T.forwardRef(gb);function vb({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const wb=T.forwardRef(vb);function _b({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Eb=T.forwardRef(_b);function Tb({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"}))}const xb=T.forwardRef(Tb);function Sb({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"}))}const Ab=T.forwardRef(Sb);function Cb({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"}))}const Pb=T.forwardRef(Cb);function Ib({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"}))}const PT=T.forwardRef(Ib);function kb({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Rb=T.forwardRef(kb);function bb({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Db=T.forwardRef(bb);function Nb({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"}))}const Vb=T.forwardRef(Nb);function Mb({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const Lb=T.forwardRef(Mb);function Ob({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"}))}const Fb=T.forwardRef(Ob);function jb({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const Bb=T.forwardRef(jb);function $b({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const IT=T.forwardRef($b),Ub=[{id:"home",label:"Home",icon:Eb},{id:"activities",label:"Activities",icon:xb},{id:"wheel",label:"Wheel",icon:AT},{id:"calendar",label:"Calendar",icon:CT},{id:"settings",label:"Settings",icon:wb}],zb=({activeTab:t,onTabChange:e})=>C.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-t border-primary-100 dark:border-primary-800",children:C.jsx("div",{className:"max-w-screen-xl mx-auto px-4",children:C.jsx("div",{className:"flex justify-around items-center h-16",children:Ub.map(n=>C.jsxs("button",{onClick:()=>e(n.id),className:`relative flex flex-col items-center justify-center w-16 h-full ${t===n.id?"text-primary-600":"text-primary-400 hover:text-primary-500"}`,children:[t===n.id&&C.jsx(me.div,{layoutId:"activeTab",className:"absolute inset-0 bg-primary-100 rounded-lg",initial:!1,transition:{type:"spring",stiffness:500,damping:30}}),C.jsx("span",{className:"relative",children:C.jsx(n.icon,{className:"w-6 h-6"})}),C.jsx("span",{className:"relative text-xs mt-1",children:n.label})]},n.id))})})});var xv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Wb=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},RT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,g=c&63;u||(g=64,o||(m=64)),r.push(n[h],n[f],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Wb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new Hb;const m=s<<2|a>>4;if(r.push(m),c!==64){const g=a<<4&240|c>>2;if(r.push(g),f!==64){const v=c<<6&192|f;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Hb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qb=function(t){const e=kT(t);return RT.encodeByteArray(e,!0)},Qu=function(t){return qb(t).replace(/\./g,"")},Gb=function(t){try{return RT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=()=>Kb().__FIREBASE_DEFAULTS__,Yb=()=>{if(typeof process>"u"||typeof xv>"u")return;const t=xv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Xb=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Gb(t[1]);return e&&JSON.parse(e)},Np=()=>{try{return Qb()||Yb()||Xb()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Jb=t=>{var e,n;return(n=(e=Np())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Zb=t=>{const e=Jb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},bT=()=>{var t;return(t=Np())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Qu(JSON.stringify(n)),Qu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rD(){var t;const e=(t=Np())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iD(){return!rD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sD(){try{return typeof indexedDB=="object"}catch{return!1}}function oD(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD="FirebaseError";class Us extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=aD,Object.setPrototypeOf(this,Us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,DT.prototype.create)}}class DT{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?lD(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Us(i,a,r)}}function lD(t,e){return t.replace(uD,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const uD=/\{\$([^}]+)}/g;function Bf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Sv(s)&&Sv(o)){if(!Bf(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Sv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(t){return t&&t._delegate?t._delegate:t}class xa{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new eD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dD(e))try{this.getOrInitializeService({instanceIdentifier:hi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=hi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hi){return this.instances.has(e)}getOptions(e=hi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=hi){return this.component?this.component.multipleInstances?e:hi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hD(t){return t===hi?void 0:t}function dD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const mD={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},pD=_e.INFO,gD={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},yD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=gD[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class NT{constructor(e){this.name=e,this._logLevel=pD,this._logHandler=yD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const vD=(t,e)=>e.some(n=>t instanceof n);let Av,Cv;function wD(){return Av||(Av=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _D(){return Cv||(Cv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VT=new WeakMap,$f=new WeakMap,MT=new WeakMap,hd=new WeakMap,Vp=new WeakMap;function ED(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Vr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&VT.set(n,t)}).catch(()=>{}),Vp.set(e,t),e}function TD(t){if($f.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});$f.set(t,e)}let Uf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $f.get(t);if(e==="objectStoreNames")return t.objectStoreNames||MT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xD(t){Uf=t(Uf)}function SD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(dd(this),e,...n);return MT.set(r,e.sort?e.sort():[e]),Vr(r)}:_D().includes(t)?function(...e){return t.apply(dd(this),e),Vr(VT.get(this))}:function(...e){return Vr(t.apply(dd(this),e))}}function AD(t){return typeof t=="function"?SD(t):(t instanceof IDBTransaction&&TD(t),vD(t,wD())?new Proxy(t,Uf):t)}function Vr(t){if(t instanceof IDBRequest)return ED(t);if(hd.has(t))return hd.get(t);const e=AD(t);return e!==t&&(hd.set(t,e),Vp.set(e,t)),e}const dd=t=>Vp.get(t);function CD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Vr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Vr(o.result),u.oldVersion,u.newVersion,Vr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const PD=["get","getKey","getAll","getAllKeys","count"],ID=["put","add","delete","clear"],fd=new Map;function Pv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fd.get(e))return fd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ID.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||PD.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return fd.set(e,s),s}xD(t=>({...t,get:(e,n,r)=>Pv(e,n)||t.get(e,n,r),has:(e,n)=>!!Pv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function RD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zf="@firebase/app",Iv="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new NT("@firebase/app"),bD="@firebase/app-compat",DD="@firebase/analytics-compat",ND="@firebase/analytics",VD="@firebase/app-check-compat",MD="@firebase/app-check",LD="@firebase/auth",OD="@firebase/auth-compat",FD="@firebase/database",jD="@firebase/data-connect",BD="@firebase/database-compat",$D="@firebase/functions",UD="@firebase/functions-compat",zD="@firebase/installations",WD="@firebase/installations-compat",HD="@firebase/messaging",qD="@firebase/messaging-compat",GD="@firebase/performance",KD="@firebase/performance-compat",QD="@firebase/remote-config",YD="@firebase/remote-config-compat",XD="@firebase/storage",JD="@firebase/storage-compat",ZD="@firebase/firestore",eN="@firebase/vertexai",tN="@firebase/firestore-compat",nN="firebase",rN="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="[DEFAULT]",iN={[zf]:"fire-core",[bD]:"fire-core-compat",[ND]:"fire-analytics",[DD]:"fire-analytics-compat",[MD]:"fire-app-check",[VD]:"fire-app-check-compat",[LD]:"fire-auth",[OD]:"fire-auth-compat",[FD]:"fire-rtdb",[jD]:"fire-data-connect",[BD]:"fire-rtdb-compat",[$D]:"fire-fn",[UD]:"fire-fn-compat",[zD]:"fire-iid",[WD]:"fire-iid-compat",[HD]:"fire-fcm",[qD]:"fire-fcm-compat",[GD]:"fire-perf",[KD]:"fire-perf-compat",[QD]:"fire-rc",[YD]:"fire-rc-compat",[XD]:"fire-gcs",[JD]:"fire-gcs-compat",[ZD]:"fire-fst",[tN]:"fire-fst-compat",[eN]:"fire-vertex","fire-js":"fire-js",[nN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=new Map,sN=new Map,Hf=new Map;function kv(t,e){try{t.container.addComponent(e)}catch(n){er.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xu(t){const e=t.name;if(Hf.has(e))return er.debug(`There were multiple attempts to register component ${e}.`),!1;Hf.set(e,t);for(const n of Yu.values())kv(n,t);for(const n of sN.values())kv(n,t);return!0}function oN(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mr=new DT("app","Firebase",aN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=rN;function LT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Wf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Mr.create("bad-app-name",{appName:String(i)});if(n||(n=bT()),!n)throw Mr.create("no-options");const s=Yu.get(i);if(s){if(Bf(n,s.options)&&Bf(r,s.config))return s;throw Mr.create("duplicate-app",{appName:i})}const o=new fD(i);for(const u of Hf.values())o.addComponent(u);const a=new lN(n,r,o);return Yu.set(i,a),a}function cN(t=Wf){const e=Yu.get(t);if(!e&&t===Wf&&bT())return LT();if(!e)throw Mr.create("no-app",{appName:t});return e}function _s(t,e,n){var r;let i=(r=iN[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),er.warn(a.join(" "));return}Xu(new xa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN="firebase-heartbeat-database",dN=1,Sa="firebase-heartbeat-store";let md=null;function OT(){return md||(md=CD(hN,dN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Sa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Mr.create("idb-open",{originalErrorMessage:t.message})})),md}async function fN(t){try{const n=(await OT()).transaction(Sa),r=await n.objectStore(Sa).get(FT(t));return await n.done,r}catch(e){if(e instanceof Us)er.warn(e.message);else{const n=Mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});er.warn(n.message)}}}async function Rv(t,e){try{const r=(await OT()).transaction(Sa,"readwrite");await r.objectStore(Sa).put(e,FT(t)),await r.done}catch(n){if(n instanceof Us)er.warn(n.message);else{const r=Mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});er.warn(r.message)}}}function FT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=1024,pN=30*24*60*60*1e3;class gN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=bv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=pN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){er.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=bv(),{heartbeatsToSend:r,unsentEntries:i}=yN(this._heartbeatsCache.heartbeats),s=Qu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return er.warn(n),""}}}function bv(){return new Date().toISOString().substring(0,10)}function yN(t,e=mN){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Dv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Dv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sD()?oD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Rv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Rv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Dv(t){return Qu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(t){Xu(new xa("platform-logger",e=>new kD(e),"PRIVATE")),Xu(new xa("heartbeat",e=>new gN(e),"PRIVATE")),_s(zf,Iv,t),_s(zf,Iv,"esm2017"),_s("fire-js","")}wN("");var Nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ti,jT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,y){function P(){}P.prototype=y.prototype,S.D=y.prototype,S.prototype=new P,S.prototype.constructor=S,S.C=function(I,D,M){for(var R=Array(arguments.length-2),re=2;re<arguments.length;re++)R[re-2]=arguments[re];return y.prototype[D].apply(I,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,y,P){P||(P=0);var I=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)I[D]=y.charCodeAt(P++)|y.charCodeAt(P++)<<8|y.charCodeAt(P++)<<16|y.charCodeAt(P++)<<24;else for(D=0;16>D;++D)I[D]=y[P++]|y[P++]<<8|y[P++]<<16|y[P++]<<24;y=S.g[0],P=S.g[1],D=S.g[2];var M=S.g[3],R=y+(M^P&(D^M))+I[0]+3614090360&4294967295;y=P+(R<<7&4294967295|R>>>25),R=M+(D^y&(P^D))+I[1]+3905402710&4294967295,M=y+(R<<12&4294967295|R>>>20),R=D+(P^M&(y^P))+I[2]+606105819&4294967295,D=M+(R<<17&4294967295|R>>>15),R=P+(y^D&(M^y))+I[3]+3250441966&4294967295,P=D+(R<<22&4294967295|R>>>10),R=y+(M^P&(D^M))+I[4]+4118548399&4294967295,y=P+(R<<7&4294967295|R>>>25),R=M+(D^y&(P^D))+I[5]+1200080426&4294967295,M=y+(R<<12&4294967295|R>>>20),R=D+(P^M&(y^P))+I[6]+2821735955&4294967295,D=M+(R<<17&4294967295|R>>>15),R=P+(y^D&(M^y))+I[7]+4249261313&4294967295,P=D+(R<<22&4294967295|R>>>10),R=y+(M^P&(D^M))+I[8]+1770035416&4294967295,y=P+(R<<7&4294967295|R>>>25),R=M+(D^y&(P^D))+I[9]+2336552879&4294967295,M=y+(R<<12&4294967295|R>>>20),R=D+(P^M&(y^P))+I[10]+4294925233&4294967295,D=M+(R<<17&4294967295|R>>>15),R=P+(y^D&(M^y))+I[11]+2304563134&4294967295,P=D+(R<<22&4294967295|R>>>10),R=y+(M^P&(D^M))+I[12]+1804603682&4294967295,y=P+(R<<7&4294967295|R>>>25),R=M+(D^y&(P^D))+I[13]+4254626195&4294967295,M=y+(R<<12&4294967295|R>>>20),R=D+(P^M&(y^P))+I[14]+2792965006&4294967295,D=M+(R<<17&4294967295|R>>>15),R=P+(y^D&(M^y))+I[15]+1236535329&4294967295,P=D+(R<<22&4294967295|R>>>10),R=y+(D^M&(P^D))+I[1]+4129170786&4294967295,y=P+(R<<5&4294967295|R>>>27),R=M+(P^D&(y^P))+I[6]+3225465664&4294967295,M=y+(R<<9&4294967295|R>>>23),R=D+(y^P&(M^y))+I[11]+643717713&4294967295,D=M+(R<<14&4294967295|R>>>18),R=P+(M^y&(D^M))+I[0]+3921069994&4294967295,P=D+(R<<20&4294967295|R>>>12),R=y+(D^M&(P^D))+I[5]+3593408605&4294967295,y=P+(R<<5&4294967295|R>>>27),R=M+(P^D&(y^P))+I[10]+38016083&4294967295,M=y+(R<<9&4294967295|R>>>23),R=D+(y^P&(M^y))+I[15]+3634488961&4294967295,D=M+(R<<14&4294967295|R>>>18),R=P+(M^y&(D^M))+I[4]+3889429448&4294967295,P=D+(R<<20&4294967295|R>>>12),R=y+(D^M&(P^D))+I[9]+568446438&4294967295,y=P+(R<<5&4294967295|R>>>27),R=M+(P^D&(y^P))+I[14]+3275163606&4294967295,M=y+(R<<9&4294967295|R>>>23),R=D+(y^P&(M^y))+I[3]+4107603335&4294967295,D=M+(R<<14&4294967295|R>>>18),R=P+(M^y&(D^M))+I[8]+1163531501&4294967295,P=D+(R<<20&4294967295|R>>>12),R=y+(D^M&(P^D))+I[13]+2850285829&4294967295,y=P+(R<<5&4294967295|R>>>27),R=M+(P^D&(y^P))+I[2]+4243563512&4294967295,M=y+(R<<9&4294967295|R>>>23),R=D+(y^P&(M^y))+I[7]+1735328473&4294967295,D=M+(R<<14&4294967295|R>>>18),R=P+(M^y&(D^M))+I[12]+2368359562&4294967295,P=D+(R<<20&4294967295|R>>>12),R=y+(P^D^M)+I[5]+4294588738&4294967295,y=P+(R<<4&4294967295|R>>>28),R=M+(y^P^D)+I[8]+2272392833&4294967295,M=y+(R<<11&4294967295|R>>>21),R=D+(M^y^P)+I[11]+1839030562&4294967295,D=M+(R<<16&4294967295|R>>>16),R=P+(D^M^y)+I[14]+4259657740&4294967295,P=D+(R<<23&4294967295|R>>>9),R=y+(P^D^M)+I[1]+2763975236&4294967295,y=P+(R<<4&4294967295|R>>>28),R=M+(y^P^D)+I[4]+1272893353&4294967295,M=y+(R<<11&4294967295|R>>>21),R=D+(M^y^P)+I[7]+4139469664&4294967295,D=M+(R<<16&4294967295|R>>>16),R=P+(D^M^y)+I[10]+3200236656&4294967295,P=D+(R<<23&4294967295|R>>>9),R=y+(P^D^M)+I[13]+681279174&4294967295,y=P+(R<<4&4294967295|R>>>28),R=M+(y^P^D)+I[0]+3936430074&4294967295,M=y+(R<<11&4294967295|R>>>21),R=D+(M^y^P)+I[3]+3572445317&4294967295,D=M+(R<<16&4294967295|R>>>16),R=P+(D^M^y)+I[6]+76029189&4294967295,P=D+(R<<23&4294967295|R>>>9),R=y+(P^D^M)+I[9]+3654602809&4294967295,y=P+(R<<4&4294967295|R>>>28),R=M+(y^P^D)+I[12]+3873151461&4294967295,M=y+(R<<11&4294967295|R>>>21),R=D+(M^y^P)+I[15]+530742520&4294967295,D=M+(R<<16&4294967295|R>>>16),R=P+(D^M^y)+I[2]+3299628645&4294967295,P=D+(R<<23&4294967295|R>>>9),R=y+(D^(P|~M))+I[0]+4096336452&4294967295,y=P+(R<<6&4294967295|R>>>26),R=M+(P^(y|~D))+I[7]+1126891415&4294967295,M=y+(R<<10&4294967295|R>>>22),R=D+(y^(M|~P))+I[14]+2878612391&4294967295,D=M+(R<<15&4294967295|R>>>17),R=P+(M^(D|~y))+I[5]+4237533241&4294967295,P=D+(R<<21&4294967295|R>>>11),R=y+(D^(P|~M))+I[12]+1700485571&4294967295,y=P+(R<<6&4294967295|R>>>26),R=M+(P^(y|~D))+I[3]+2399980690&4294967295,M=y+(R<<10&4294967295|R>>>22),R=D+(y^(M|~P))+I[10]+4293915773&4294967295,D=M+(R<<15&4294967295|R>>>17),R=P+(M^(D|~y))+I[1]+2240044497&4294967295,P=D+(R<<21&4294967295|R>>>11),R=y+(D^(P|~M))+I[8]+1873313359&4294967295,y=P+(R<<6&4294967295|R>>>26),R=M+(P^(y|~D))+I[15]+4264355552&4294967295,M=y+(R<<10&4294967295|R>>>22),R=D+(y^(M|~P))+I[6]+2734768916&4294967295,D=M+(R<<15&4294967295|R>>>17),R=P+(M^(D|~y))+I[13]+1309151649&4294967295,P=D+(R<<21&4294967295|R>>>11),R=y+(D^(P|~M))+I[4]+4149444226&4294967295,y=P+(R<<6&4294967295|R>>>26),R=M+(P^(y|~D))+I[11]+3174756917&4294967295,M=y+(R<<10&4294967295|R>>>22),R=D+(y^(M|~P))+I[2]+718787259&4294967295,D=M+(R<<15&4294967295|R>>>17),R=P+(M^(D|~y))+I[9]+3951481745&4294967295,S.g[0]=S.g[0]+y&4294967295,S.g[1]=S.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+M&4294967295}r.prototype.u=function(S,y){y===void 0&&(y=S.length);for(var P=y-this.blockSize,I=this.B,D=this.h,M=0;M<y;){if(D==0)for(;M<=P;)i(this,S,M),M+=this.blockSize;if(typeof S=="string"){for(;M<y;)if(I[D++]=S.charCodeAt(M++),D==this.blockSize){i(this,I),D=0;break}}else for(;M<y;)if(I[D++]=S[M++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var y=1;y<S.length-8;++y)S[y]=0;var P=8*this.o;for(y=S.length-8;y<S.length;++y)S[y]=P&255,P/=256;for(this.u(S),S=Array(16),y=P=0;4>y;++y)for(var I=0;32>I;I+=8)S[P++]=this.g[y]>>>I&255;return S};function s(S,y){var P=a;return Object.prototype.hasOwnProperty.call(P,S)?P[S]:P[S]=y(S)}function o(S,y){this.h=y;for(var P=[],I=!0,D=S.length-1;0<=D;D--){var M=S[D]|0;I&&M==y||(P[D]=M,I=!1)}this.g=P}var a={};function u(S){return-128<=S&&128>S?s(S,function(y){return new o([y|0],0>y?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return k(c(-S));for(var y=[],P=1,I=0;S>=P;I++)y[I]=S/P|0,P*=4294967296;return new o(y,0)}function h(S,y){if(S.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(S.charAt(0)=="-")return k(h(S.substring(1),y));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=c(Math.pow(y,8)),I=f,D=0;D<S.length;D+=8){var M=Math.min(8,S.length-D),R=parseInt(S.substring(D,D+M),y);8>M?(M=c(Math.pow(y,M)),I=I.j(M).add(c(R))):(I=I.j(P),I=I.add(c(R)))}return I}var f=u(0),m=u(1),g=u(16777216);t=o.prototype,t.m=function(){if(E(this))return-k(this).m();for(var S=0,y=1,P=0;P<this.g.length;P++){var I=this.i(P);S+=(0<=I?I:4294967296+I)*y,y*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(v(this))return"0";if(E(this))return"-"+k(this).toString(S);for(var y=c(Math.pow(S,6)),P=this,I="";;){var D=V(P,y).g;P=A(P,D.j(y));var M=((0<P.g.length?P.g[0]:P.h)>>>0).toString(S);if(P=D,v(P))return M+I;for(;6>M.length;)M="0"+M;I=M+I}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function v(S){if(S.h!=0)return!1;for(var y=0;y<S.g.length;y++)if(S.g[y]!=0)return!1;return!0}function E(S){return S.h==-1}t.l=function(S){return S=A(this,S),E(S)?-1:v(S)?0:1};function k(S){for(var y=S.g.length,P=[],I=0;I<y;I++)P[I]=~S.g[I];return new o(P,~S.h).add(m)}t.abs=function(){return E(this)?k(this):this},t.add=function(S){for(var y=Math.max(this.g.length,S.g.length),P=[],I=0,D=0;D<=y;D++){var M=I+(this.i(D)&65535)+(S.i(D)&65535),R=(M>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);I=R>>>16,M&=65535,R&=65535,P[D]=R<<16|M}return new o(P,P[P.length-1]&-2147483648?-1:0)};function A(S,y){return S.add(k(y))}t.j=function(S){if(v(this)||v(S))return f;if(E(this))return E(S)?k(this).j(k(S)):k(k(this).j(S));if(E(S))return k(this.j(k(S)));if(0>this.l(g)&&0>S.l(g))return c(this.m()*S.m());for(var y=this.g.length+S.g.length,P=[],I=0;I<2*y;I++)P[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<S.g.length;D++){var M=this.i(I)>>>16,R=this.i(I)&65535,re=S.i(D)>>>16,ue=S.i(D)&65535;P[2*I+2*D]+=R*ue,w(P,2*I+2*D),P[2*I+2*D+1]+=M*ue,w(P,2*I+2*D+1),P[2*I+2*D+1]+=R*re,w(P,2*I+2*D+1),P[2*I+2*D+2]+=M*re,w(P,2*I+2*D+2)}for(I=0;I<y;I++)P[I]=P[2*I+1]<<16|P[2*I];for(I=y;I<2*y;I++)P[I]=0;return new o(P,0)};function w(S,y){for(;(S[y]&65535)!=S[y];)S[y+1]+=S[y]>>>16,S[y]&=65535,y++}function _(S,y){this.g=S,this.h=y}function V(S,y){if(v(y))throw Error("division by zero");if(v(S))return new _(f,f);if(E(S))return y=V(k(S),y),new _(k(y.g),k(y.h));if(E(y))return y=V(S,k(y)),new _(k(y.g),y.h);if(30<S.g.length){if(E(S)||E(y))throw Error("slowDivide_ only works with positive integers.");for(var P=m,I=y;0>=I.l(S);)P=L(P),I=L(I);var D=F(P,1),M=F(I,1);for(I=F(I,2),P=F(P,2);!v(I);){var R=M.add(I);0>=R.l(S)&&(D=D.add(P),M=R),I=F(I,1),P=F(P,1)}return y=A(S,D.j(y)),new _(D,y)}for(D=f;0<=S.l(y);){for(P=Math.max(1,Math.floor(S.m()/y.m())),I=Math.ceil(Math.log(P)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),M=c(P),R=M.j(y);E(R)||0<R.l(S);)P-=I,M=c(P),R=M.j(y);v(M)&&(M=m),D=D.add(M),S=A(S,R)}return new _(D,S)}t.A=function(S){return V(this,S).h},t.and=function(S){for(var y=Math.max(this.g.length,S.g.length),P=[],I=0;I<y;I++)P[I]=this.i(I)&S.i(I);return new o(P,this.h&S.h)},t.or=function(S){for(var y=Math.max(this.g.length,S.g.length),P=[],I=0;I<y;I++)P[I]=this.i(I)|S.i(I);return new o(P,this.h|S.h)},t.xor=function(S){for(var y=Math.max(this.g.length,S.g.length),P=[],I=0;I<y;I++)P[I]=this.i(I)^S.i(I);return new o(P,this.h^S.h)};function L(S){for(var y=S.g.length+1,P=[],I=0;I<y;I++)P[I]=S.i(I)<<1|S.i(I-1)>>>31;return new o(P,S.h)}function F(S,y){var P=y>>5;y%=32;for(var I=S.g.length-P,D=[],M=0;M<I;M++)D[M]=0<y?S.i(M+P)>>>y|S.i(M+P+1)<<32-y:S.i(M+P);return new o(D,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Ti=o}).apply(typeof Nv<"u"?Nv:typeof self<"u"?self:typeof window<"u"?window:{});var Fl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var BT,Vo,$T,au,qf,UT,zT,WT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,p){return l==Array.prototype||l==Object.prototype||(l[d]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fl=="object"&&Fl];for(var d=0;d<l.length;++d){var p=l[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(l,d){if(d)e:{var p=r;l=l.split(".");for(var x=0;x<l.length-1;x++){var O=l[x];if(!(O in p))break e;p=p[O]}l=l[l.length-1],x=p[l],d=d(x),d!=x&&d!=null&&e(p,l,{configurable:!0,writable:!0,value:d})}}function s(l,d){l instanceof String&&(l+="");var p=0,x=!1,O={next:function(){if(!x&&p<l.length){var j=p++;return{value:d(j,l[j]),done:!1}}return x=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(l){return l||function(){return s(this,function(d,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function c(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function h(l,d,p){return l.call.apply(l.bind,arguments)}function f(l,d,p){if(!l)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,x),l.apply(d,O)}}return function(){return l.apply(d,arguments)}}function m(l,d,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function g(l,d){var p=Array.prototype.slice.call(arguments,1);return function(){var x=p.slice();return x.push.apply(x,arguments),l.apply(this,x)}}function v(l,d){function p(){}p.prototype=d.prototype,l.aa=d.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(x,O,j){for(var q=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)q[ke-2]=arguments[ke];return d.prototype[O].apply(x,q)}}function E(l){const d=l.length;if(0<d){const p=Array(d);for(let x=0;x<d;x++)p[x]=l[x];return p}return[]}function k(l,d){for(let p=1;p<arguments.length;p++){const x=arguments[p];if(u(x)){const O=l.length||0,j=x.length||0;l.length=O+j;for(let q=0;q<j;q++)l[O+q]=x[q]}else l.push(x)}}class A{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function w(l){return/^[\s\xa0]*$/.test(l)}function _(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function V(l){return V[" "](l),l}V[" "]=function(){};var L=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function F(l,d,p){for(const x in l)d.call(p,l[x],x,l)}function S(l,d){for(const p in l)d.call(void 0,l[p],p,l)}function y(l){const d={};for(const p in l)d[p]=l[p];return d}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(l,d){let p,x;for(let O=1;O<arguments.length;O++){x=arguments[O];for(p in x)l[p]=x[p];for(let j=0;j<P.length;j++)p=P[j],Object.prototype.hasOwnProperty.call(x,p)&&(l[p]=x[p])}}function D(l){var d=1;l=l.split(":");const p=[];for(;0<d&&l.length;)p.push(l.shift()),d--;return l.length&&p.push(l.join(":")),p}function M(l){a.setTimeout(()=>{throw l},0)}function R(){var l=Y;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class re{constructor(){this.h=this.g=null}add(d,p){const x=ue.get();x.set(d,p),this.h?this.h.next=x:this.g=x,this.h=x}}var ue=new A(()=>new Ae,l=>l.reset());class Ae{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,H=!1,Y=new re,N=()=>{const l=a.Promise.resolve(void 0);Ce=()=>{l.then(b)}};var b=()=>{for(var l;l=R();){try{l.h.call(l.g)}catch(p){M(p)}var d=ue;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}H=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};a.addEventListener("test",p,d),a.removeEventListener("test",p,d)}catch{}return l}();function te(l,d){if(W.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,x=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(L){e:{try{V(d.nodeName);var O=!0;break e}catch{}O=!1}O||(d=null)}}else p=="mouseover"?d=l.fromElement:p=="mouseout"&&(d=l.toElement);this.relatedTarget=d,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ee[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&te.aa.h.call(this)}}v(te,W);var ee={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Q="closure_listenable_"+(1e6*Math.random()|0),he=0;function se(l,d,p,x,O){this.listener=l,this.proxy=null,this.src=d,this.type=p,this.capture=!!x,this.ha=O,this.key=++he,this.da=this.fa=!1}function de(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ie(l){this.src=l,this.g={},this.h=0}ie.prototype.add=function(l,d,p,x,O){var j=l.toString();l=this.g[j],l||(l=this.g[j]=[],this.h++);var q=Me(l,d,x,O);return-1<q?(d=l[q],p||(d.fa=!1)):(d=new se(d,this.src,j,!!x,O),d.fa=p,l.push(d)),d};function ve(l,d){var p=d.type;if(p in l.g){var x=l.g[p],O=Array.prototype.indexOf.call(x,d,void 0),j;(j=0<=O)&&Array.prototype.splice.call(x,O,1),j&&(de(d),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Me(l,d,p,x){for(var O=0;O<l.length;++O){var j=l[O];if(!j.da&&j.listener==d&&j.capture==!!p&&j.ha==x)return O}return-1}var fe="closure_lm_"+(1e6*Math.random()|0),rt={};function Lt(l,d,p,x,O){if(Array.isArray(d)){for(var j=0;j<d.length;j++)Lt(l,d[j],p,x,O);return null}return p=el(p),l&&l[Q]?l.K(d,p,c(x)?!!x.capture:!!x,O):Ht(l,d,p,!1,x,O)}function Ht(l,d,p,x,O,j){if(!d)throw Error("Invalid event type");var q=c(O)?!!O.capture:!!O,ke=Qs(l);if(ke||(l[fe]=ke=new ie(l)),p=ke.add(d,p,x,q,j),p.proxy)return p;if(x=mn(),p.proxy=x,x.src=l,x.listener=p,l.addEventListener)Z||(O=q),O===void 0&&(O=!1),l.addEventListener(d.toString(),x,O);else if(l.attachEvent)l.attachEvent(Za(d.toString()),x);else if(l.addListener&&l.removeListener)l.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return p}function mn(){function l(p){return d.call(l.src,l.listener,p)}const d=uh;return l}function Sn(l,d,p,x,O){if(Array.isArray(d))for(var j=0;j<d.length;j++)Sn(l,d[j],p,x,O);else x=c(x)?!!x.capture:!!x,p=el(p),l&&l[Q]?(l=l.i,d=String(d).toString(),d in l.g&&(j=l.g[d],p=Me(j,p,x,O),-1<p&&(de(j[p]),Array.prototype.splice.call(j,p,1),j.length==0&&(delete l.g[d],l.h--)))):l&&(l=Qs(l))&&(d=l.g[d.toString()],l=-1,d&&(l=Me(d,p,x,O)),(p=-1<l?d[l]:null)&&Ot(p))}function Ot(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[Q])ve(d.i,l);else{var p=l.type,x=l.proxy;d.removeEventListener?d.removeEventListener(p,x,l.capture):d.detachEvent?d.detachEvent(Za(p),x):d.addListener&&d.removeListener&&d.removeListener(x),(p=Qs(d))?(ve(p,l),p.h==0&&(p.src=null,d[fe]=null)):de(l)}}}function Za(l){return l in rt?rt[l]:rt[l]="on"+l}function uh(l,d){if(l.da)l=!0;else{d=new te(d,this);var p=l.listener,x=l.ha||l.src;l.fa&&Ot(l),l=p.call(x,d)}return l}function Qs(l){return l=l[fe],l instanceof ie?l:null}var Fi="__closure_events_fn_"+(1e9*Math.random()>>>0);function el(l){return typeof l=="function"?l:(l[Fi]||(l[Fi]=function(d){return l.handleEvent(d)}),l[Fi])}function Xe(){U.call(this),this.i=new ie(this),this.M=this,this.F=null}v(Xe,U),Xe.prototype[Q]=!0,Xe.prototype.removeEventListener=function(l,d,p,x){Sn(this,l,d,p,x)};function lt(l,d){var p,x=l.F;if(x)for(p=[];x;x=x.F)p.push(x);if(l=l.M,x=d.type||d,typeof d=="string")d=new W(d,l);else if(d instanceof W)d.target=d.target||l;else{var O=d;d=new W(x,l),I(d,O)}if(O=!0,p)for(var j=p.length-1;0<=j;j--){var q=d.g=p[j];O=ji(q,x,!0,d)&&O}if(q=d.g=l,O=ji(q,x,!0,d)&&O,O=ji(q,x,!1,d)&&O,p)for(j=0;j<p.length;j++)q=d.g=p[j],O=ji(q,x,!1,d)&&O}Xe.prototype.N=function(){if(Xe.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var p=l.g[d],x=0;x<p.length;x++)de(p[x]);delete l.g[d],l.h--}}this.F=null},Xe.prototype.K=function(l,d,p,x){return this.i.add(String(l),d,!1,p,x)},Xe.prototype.L=function(l,d,p,x){return this.i.add(String(l),d,!0,p,x)};function ji(l,d,p,x){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var O=!0,j=0;j<d.length;++j){var q=d[j];if(q&&!q.da&&q.capture==p){var ke=q.listener,ut=q.ha||q.src;q.fa&&ve(l.i,q),O=ke.call(ut,x)!==!1&&O}}return O&&!x.defaultPrevented}function Ys(l,d,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(l,d||0)}function Xs(l){l.g=Ys(()=>{l.g=null,l.i&&(l.i=!1,Xs(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class Js extends U{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Xs(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ti(l){U.call(this),this.h=l,this.g={}}v(ti,U);var tl=[];function yg(l){F(l.g,function(d,p){this.g.hasOwnProperty(p)&&Ot(d)},l),l.g={}}ti.prototype.N=function(){ti.aa.N.call(this),yg(this)},ti.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ch=a.JSON.stringify,MS=a.JSON.parse,LS=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function hh(){}hh.prototype.h=null;function vg(l){return l.h||(l.h=l.i())}function wg(){}var Zs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dh(){W.call(this,"d")}v(dh,W);function fh(){W.call(this,"c")}v(fh,W);var ni={},_g=null;function nl(){return _g=_g||new Xe}ni.La="serverreachability";function Eg(l){W.call(this,ni.La,l)}v(Eg,W);function eo(l){const d=nl();lt(d,new Eg(d))}ni.STAT_EVENT="statevent";function Tg(l,d){W.call(this,ni.STAT_EVENT,l),this.stat=d}v(Tg,W);function Pt(l){const d=nl();lt(d,new Tg(d,l))}ni.Ma="timingevent";function xg(l,d){W.call(this,ni.Ma,l),this.size=d}v(xg,W);function to(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},d)}function no(){this.g=!0}no.prototype.xa=function(){this.g=!1};function OS(l,d,p,x,O,j){l.info(function(){if(l.g)if(j)for(var q="",ke=j.split("&"),ut=0;ut<ke.length;ut++){var Te=ke[ut].split("=");if(1<Te.length){var gt=Te[0];Te=Te[1];var yt=gt.split("_");q=2<=yt.length&&yt[1]=="type"?q+(gt+"="+Te+"&"):q+(gt+"=redacted&")}}else q=null;else q=j;return"XMLHTTP REQ ("+x+") [attempt "+O+"]: "+d+`
`+p+`
`+q})}function FS(l,d,p,x,O,j,q){l.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+O+"]: "+d+`
`+p+`
`+j+" "+q})}function Bi(l,d,p,x){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+BS(l,p)+(x?" "+x:"")})}function jS(l,d){l.info(function(){return"TIMEOUT: "+d})}no.prototype.info=function(){};function BS(l,d){if(!l.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var x=p[l];if(!(2>x.length)){var O=x[1];if(Array.isArray(O)&&!(1>O.length)){var j=O[0];if(j!="noop"&&j!="stop"&&j!="close")for(var q=1;q<O.length;q++)O[q]=""}}}}return ch(p)}catch{return d}}var rl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mh;function il(){}v(il,hh),il.prototype.g=function(){return new XMLHttpRequest},il.prototype.i=function(){return{}},mh=new il;function sr(l,d,p,x){this.j=l,this.i=d,this.l=p,this.R=x||1,this.U=new ti(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ag}function Ag(){this.i=null,this.g="",this.h=!1}var Cg={},ph={};function gh(l,d,p){l.L=1,l.v=ll(Fn(d)),l.m=p,l.P=!0,Pg(l,null)}function Pg(l,d){l.F=Date.now(),sl(l),l.A=Fn(l.v);var p=l.A,x=l.R;Array.isArray(x)||(x=[String(x)]),$g(p.i,"t",x),l.C=0,p=l.j.J,l.h=new Ag,l.g=sy(l.j,p?d:null,!l.m),0<l.O&&(l.M=new Js(m(l.Y,l,l.g),l.O)),d=l.U,p=l.g,x=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(tl[0]=O.toString()),O=tl);for(var j=0;j<O.length;j++){var q=Lt(p,O[j],x||d.handleEvent,!1,d.h||d);if(!q)break;d.g[q.key]=q}d=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),eo(),OS(l.i,l.u,l.A,l.l,l.R,l.m)}sr.prototype.ca=function(l){l=l.target;const d=this.M;d&&jn(l)==3?d.j():this.Y(l)},sr.prototype.Y=function(l){try{if(l==this.g)e:{const yt=jn(this.g);var d=this.g.Ba();const zi=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||Kg(this.g)))){this.J||yt!=4||d==7||(d==8||0>=zi?eo(3):eo(2)),yh(this);var p=this.g.Z();this.X=p;t:if(Ig(this)){var x=Kg(this.g);l="";var O=x.length,j=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ri(this),ro(this);var q="";break t}this.h.i=new a.TextDecoder}for(d=0;d<O;d++)this.h.h=!0,l+=this.h.i.decode(x[d],{stream:!(j&&d==O-1)});x.length=0,this.h.g+=l,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=p==200,FS(this.i,this.u,this.A,this.l,this.R,yt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,ut=this.g;if((ke=ut.g?ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(ke)){var Te=ke;break t}}Te=null}if(p=Te)Bi(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vh(this,p);else{this.o=!1,this.s=3,Pt(12),ri(this),ro(this);break e}}if(this.P){p=!0;let pn;for(;!this.J&&this.C<q.length;)if(pn=$S(this,q),pn==ph){yt==4&&(this.s=4,Pt(14),p=!1),Bi(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==Cg){this.s=4,Pt(15),Bi(this.i,this.l,q,"[Invalid Chunk]"),p=!1;break}else Bi(this.i,this.l,pn,null),vh(this,pn);if(Ig(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||q.length!=0||this.h.h||(this.s=1,Pt(16),p=!1),this.o=this.o&&p,!p)Bi(this.i,this.l,q,"[Invalid Chunked Response]"),ri(this),ro(this);else if(0<q.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Sh(gt),gt.M=!0,Pt(11))}}else Bi(this.i,this.l,q,null),vh(this,q);yt==4&&ri(this),this.o&&!this.J&&(yt==4?ty(this.j,this):(this.o=!1,sl(this)))}else iA(this.g),p==400&&0<q.indexOf("Unknown SID")?(this.s=3,Pt(12)):(this.s=0,Pt(13)),ri(this),ro(this)}}}catch{}finally{}};function Ig(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function $S(l,d){var p=l.C,x=d.indexOf(`
`,p);return x==-1?ph:(p=Number(d.substring(p,x)),isNaN(p)?Cg:(x+=1,x+p>d.length?ph:(d=d.slice(x,x+p),l.C=x+p,d)))}sr.prototype.cancel=function(){this.J=!0,ri(this)};function sl(l){l.S=Date.now()+l.I,kg(l,l.I)}function kg(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=to(m(l.ba,l),d)}function yh(l){l.B&&(a.clearTimeout(l.B),l.B=null)}sr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(jS(this.i,this.A),this.L!=2&&(eo(),Pt(17)),ri(this),this.s=2,ro(this)):kg(this,this.S-l)};function ro(l){l.j.G==0||l.J||ty(l.j,l)}function ri(l){yh(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,yg(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function vh(l,d){try{var p=l.j;if(p.G!=0&&(p.g==l||wh(p.h,l))){if(!l.K&&wh(p.h,l)&&p.G==3){try{var x=p.Da.g.parse(d)}catch{x=null}if(Array.isArray(x)&&x.length==3){var O=x;if(O[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)ml(p),dl(p);else break e;xh(p),Pt(18)}}else p.za=O[1],0<p.za-p.T&&37500>O[2]&&p.F&&p.v==0&&!p.C&&(p.C=to(m(p.Za,p),6e3));if(1>=Dg(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else si(p,11)}else if((l.K||p.g==l)&&ml(p),!w(d))for(O=p.Da.g.parse(d),d=0;d<O.length;d++){let Te=O[d];if(p.T=Te[0],Te=Te[1],p.G==2)if(Te[0]=="c"){p.K=Te[1],p.ia=Te[2];const gt=Te[3];gt!=null&&(p.la=gt,p.j.info("VER="+p.la));const yt=Te[4];yt!=null&&(p.Aa=yt,p.j.info("SVER="+p.Aa));const zi=Te[5];zi!=null&&typeof zi=="number"&&0<zi&&(x=1.5*zi,p.L=x,p.j.info("backChannelRequestTimeoutMs_="+x)),x=p;const pn=l.g;if(pn){const gl=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gl){var j=x.h;j.g||gl.indexOf("spdy")==-1&&gl.indexOf("quic")==-1&&gl.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(_h(j,j.h),j.h=null))}if(x.D){const Ah=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ah&&(x.ya=Ah,De(x.I,x.D,Ah))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),x=p;var q=l;if(x.qa=iy(x,x.J?x.ia:null,x.W),q.K){Ng(x.h,q);var ke=q,ut=x.L;ut&&(ke.I=ut),ke.B&&(yh(ke),sl(ke)),x.g=q}else Zg(x);0<p.i.length&&fl(p)}else Te[0]!="stop"&&Te[0]!="close"||si(p,7);else p.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?si(p,7):Th(p):Te[0]!="noop"&&p.l&&p.l.ta(Te),p.v=0)}}eo(4)}catch{}}var US=class{constructor(l,d){this.g=l,this.map=d}};function Rg(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bg(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Dg(l){return l.h?1:l.g?l.g.size:0}function wh(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function _h(l,d){l.g?l.g.add(d):l.h=d}function Ng(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}Rg.prototype.cancel=function(){if(this.i=Vg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Vg(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const p of l.g.values())d=d.concat(p.D);return d}return E(l.i)}function zS(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var d=[],p=l.length,x=0;x<p;x++)d.push(l[x]);return d}d=[],p=0;for(x in l)d[p++]=l[x];return d}function WS(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var d=[];l=l.length;for(var p=0;p<l;p++)d.push(p);return d}d=[],p=0;for(const x in l)d[p++]=x;return d}}}function Mg(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var p=WS(l),x=zS(l),O=x.length,j=0;j<O;j++)d.call(void 0,x[j],p&&p[j],l)}var Lg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function HS(l,d){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var x=l[p].indexOf("="),O=null;if(0<=x){var j=l[p].substring(0,x);O=l[p].substring(x+1)}else j=l[p];d(j,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function ii(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ii){this.h=l.h,ol(this,l.j),this.o=l.o,this.g=l.g,al(this,l.s),this.l=l.l;var d=l.i,p=new oo;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),Og(this,p),this.m=l.m}else l&&(d=String(l).match(Lg))?(this.h=!1,ol(this,d[1]||"",!0),this.o=io(d[2]||""),this.g=io(d[3]||"",!0),al(this,d[4]),this.l=io(d[5]||"",!0),Og(this,d[6]||"",!0),this.m=io(d[7]||"")):(this.h=!1,this.i=new oo(null,this.h))}ii.prototype.toString=function(){var l=[],d=this.j;d&&l.push(so(d,Fg,!0),":");var p=this.g;return(p||d=="file")&&(l.push("//"),(d=this.o)&&l.push(so(d,Fg,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(so(p,p.charAt(0)=="/"?KS:GS,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",so(p,YS)),l.join("")};function Fn(l){return new ii(l)}function ol(l,d,p){l.j=p?io(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function al(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Og(l,d,p){d instanceof oo?(l.i=d,XS(l.i,l.h)):(p||(d=so(d,QS)),l.i=new oo(d,l.h))}function De(l,d,p){l.i.set(d,p)}function ll(l){return De(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function io(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function so(l,d,p){return typeof l=="string"?(l=encodeURI(l).replace(d,qS),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function qS(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Fg=/[#\/\?@]/g,GS=/[#\?:]/g,KS=/[#\?]/g,QS=/[#\?@]/g,YS=/#/g;function oo(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function or(l){l.g||(l.g=new Map,l.h=0,l.i&&HS(l.i,function(d,p){l.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}t=oo.prototype,t.add=function(l,d){or(this),this.i=null,l=$i(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(d),this.h+=1,this};function jg(l,d){or(l),d=$i(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Bg(l,d){return or(l),d=$i(l,d),l.g.has(d)}t.forEach=function(l,d){or(this),this.g.forEach(function(p,x){p.forEach(function(O){l.call(d,O,x,this)},this)},this)},t.na=function(){or(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let x=0;x<d.length;x++){const O=l[x];for(let j=0;j<O.length;j++)p.push(d[x])}return p},t.V=function(l){or(this);let d=[];if(typeof l=="string")Bg(this,l)&&(d=d.concat(this.g.get($i(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)d=d.concat(l[p])}return d},t.set=function(l,d){return or(this),this.i=null,l=$i(this,l),Bg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function $g(l,d,p){jg(l,d),0<p.length&&(l.i=null,l.g.set($i(l,d),E(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var x=d[p];const j=encodeURIComponent(String(x)),q=this.V(x);for(x=0;x<q.length;x++){var O=j;q[x]!==""&&(O+="="+encodeURIComponent(String(q[x]))),l.push(O)}}return this.i=l.join("&")};function $i(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function XS(l,d){d&&!l.j&&(or(l),l.i=null,l.g.forEach(function(p,x){var O=x.toLowerCase();x!=O&&(jg(this,x),$g(this,O,p))},l)),l.j=d}function JS(l,d){const p=new no;if(a.Image){const x=new Image;x.onload=g(ar,p,"TestLoadImage: loaded",!0,d,x),x.onerror=g(ar,p,"TestLoadImage: error",!1,d,x),x.onabort=g(ar,p,"TestLoadImage: abort",!1,d,x),x.ontimeout=g(ar,p,"TestLoadImage: timeout",!1,d,x),a.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=l}else d(!1)}function ZS(l,d){const p=new no,x=new AbortController,O=setTimeout(()=>{x.abort(),ar(p,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:x.signal}).then(j=>{clearTimeout(O),j.ok?ar(p,"TestPingServer: ok",!0,d):ar(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(O),ar(p,"TestPingServer: error",!1,d)})}function ar(l,d,p,x,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),x(p)}catch{}}function eA(){this.g=new LS}function tA(l,d,p){const x=p||"";try{Mg(l,function(O,j){let q=O;c(O)&&(q=ch(O)),d.push(x+j+"="+encodeURIComponent(q))})}catch(O){throw d.push(x+"type="+encodeURIComponent("_badmap")),O}}function ul(l){this.l=l.Ub||null,this.j=l.eb||!1}v(ul,hh),ul.prototype.g=function(){return new cl(this.l,this.j)},ul.prototype.i=function(l){return function(){return l}}({});function cl(l,d){Xe.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(cl,Xe),t=cl.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,lo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ao(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,lo(this)),this.g&&(this.readyState=3,lo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ug(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ug(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?ao(this):lo(this),this.readyState==3&&Ug(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,ao(this))},t.Qa=function(l){this.g&&(this.response=l,ao(this))},t.ga=function(){this.g&&ao(this)};function ao(l){l.readyState=4,l.l=null,l.j=null,l.v=null,lo(l)}t.setRequestHeader=function(l,d){this.u.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=d.next();return l.join(`\r
`)};function lo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(cl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function zg(l){let d="";return F(l,function(p,x){d+=x,d+=":",d+=p,d+=`\r
`}),d}function Eh(l,d,p){e:{for(x in p){var x=!1;break e}x=!0}x||(p=zg(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):De(l,d,p))}function ze(l){Xe.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(ze,Xe);var nA=/^https?$/i,rA=["POST","PUT"];t=ze.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,d,p,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mh.g(),this.v=this.o?vg(this.o):vg(mh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(j){Wg(this,j);return}if(l=p||"",p=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var O in x)p.set(O,x[O]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const j of x.keys())p.set(j,x.get(j));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(p.keys()).find(j=>j.toLowerCase()=="content-type"),O=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(rA,d,void 0))||x||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,q]of p)this.g.setRequestHeader(j,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gg(this),this.u=!0,this.g.send(l),this.u=!1}catch(j){Wg(this,j)}};function Wg(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,Hg(l),hl(l)}function Hg(l){l.A||(l.A=!0,lt(l,"complete"),lt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,lt(this,"complete"),lt(this,"abort"),hl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hl(this,!0)),ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?qg(this):this.bb())},t.bb=function(){qg(this)};function qg(l){if(l.h&&typeof o<"u"&&(!l.v[1]||jn(l)!=4||l.Z()!=2)){if(l.u&&jn(l)==4)Ys(l.Ea,0,l);else if(lt(l,"readystatechange"),jn(l)==4){l.h=!1;try{const q=l.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var x;if(x=q===0){var O=String(l.D).match(Lg)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),x=!nA.test(O?O.toLowerCase():"")}p=x}if(p)lt(l,"complete"),lt(l,"success");else{l.m=6;try{var j=2<jn(l)?l.g.statusText:""}catch{j=""}l.l=j+" ["+l.Z()+"]",Hg(l)}}finally{hl(l)}}}}function hl(l,d){if(l.g){Gg(l);const p=l.g,x=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||lt(l,"ready");try{p.onreadystatechange=x}catch{}}}function Gg(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function jn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),MS(d)}};function Kg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function iA(l){const d={};l=(l.g&&2<=jn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<l.length;x++){if(w(l[x]))continue;var p=D(l[x]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const j=d[O]||[];d[O]=j,j.push(p)}S(d,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function uo(l,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||d}function Qg(l){this.Aa=0,this.i=[],this.j=new no,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=uo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=uo("baseRetryDelayMs",5e3,l),this.cb=uo("retryDelaySeedMs",1e4,l),this.Wa=uo("forwardChannelMaxRetries",2,l),this.wa=uo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Rg(l&&l.concurrentRequestLimit),this.Da=new eA,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Qg.prototype,t.la=8,t.G=1,t.connect=function(l,d,p,x){Pt(0),this.W=l,this.H=d||{},p&&x!==void 0&&(this.H.OSID=p,this.H.OAID=x),this.F=this.X,this.I=iy(this,null,this.W),fl(this)};function Th(l){if(Yg(l),l.G==3){var d=l.U++,p=Fn(l.I);if(De(p,"SID",l.K),De(p,"RID",d),De(p,"TYPE","terminate"),co(l,p),d=new sr(l,l.j,d),d.L=2,d.v=ll(Fn(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=d.v,p=!0),p||(d.g=sy(d.j,null),d.g.ea(d.v)),d.F=Date.now(),sl(d)}ry(l)}function dl(l){l.g&&(Sh(l),l.g.cancel(),l.g=null)}function Yg(l){dl(l),l.u&&(a.clearTimeout(l.u),l.u=null),ml(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function fl(l){if(!bg(l.h)&&!l.s){l.s=!0;var d=l.Ga;Ce||N(),H||(Ce(),H=!0),Y.add(d,l),l.B=0}}function sA(l,d){return Dg(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=to(m(l.Ga,l,d),ny(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new sr(this,this.j,l);let j=this.o;if(this.S&&(j?(j=y(j),I(j,this.S)):j=this.S),this.m!==null||this.O||(O.H=j,j=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var x=this.i[p];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(d+=x,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=Jg(this,O,d),p=Fn(this.I),De(p,"RID",l),De(p,"CVER",22),this.D&&De(p,"X-HTTP-Session-Id",this.D),co(this,p),j&&(this.O?d="headers="+encodeURIComponent(String(zg(j)))+"&"+d:this.m&&Eh(p,this.m,j)),_h(this.h,O),this.Ua&&De(p,"TYPE","init"),this.P?(De(p,"$req",d),De(p,"SID","null"),O.T=!0,gh(O,p,null)):gh(O,p,d),this.G=2}}else this.G==3&&(l?Xg(this,l):this.i.length==0||bg(this.h)||Xg(this))};function Xg(l,d){var p;d?p=d.l:p=l.U++;const x=Fn(l.I);De(x,"SID",l.K),De(x,"RID",p),De(x,"AID",l.T),co(l,x),l.m&&l.o&&Eh(x,l.m,l.o),p=new sr(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Jg(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),_h(l.h,p),gh(p,x,d)}function co(l,d){l.H&&F(l.H,function(p,x){De(d,x,p)}),l.l&&Mg({},function(p,x){De(d,x,p)})}function Jg(l,d,p){p=Math.min(l.i.length,p);var x=l.l?m(l.l.Na,l.l,l):null;e:{var O=l.i;let j=-1;for(;;){const q=["count="+p];j==-1?0<p?(j=O[0].g,q.push("ofs="+j)):j=0:q.push("ofs="+j);let ke=!0;for(let ut=0;ut<p;ut++){let Te=O[ut].g;const gt=O[ut].map;if(Te-=j,0>Te)j=Math.max(0,O[ut].g-100),ke=!1;else try{tA(gt,q,"req"+Te+"_")}catch{x&&x(gt)}}if(ke){x=q.join("&");break e}}}return l=l.i.splice(0,p),d.D=l,x}function Zg(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;Ce||N(),H||(Ce(),H=!0),Y.add(d,l),l.v=0}}function xh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=to(m(l.Fa,l),ny(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,ey(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=to(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pt(10),dl(this),ey(this))};function Sh(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function ey(l){l.g=new sr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=Fn(l.qa);De(d,"RID","rpc"),De(d,"SID",l.K),De(d,"AID",l.T),De(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&De(d,"TO",l.ja),De(d,"TYPE","xmlhttp"),co(l,d),l.m&&l.o&&Eh(d,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=ll(Fn(d)),p.m=null,p.P=!0,Pg(p,l)}t.Za=function(){this.C!=null&&(this.C=null,dl(this),xh(this),Pt(19))};function ml(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function ty(l,d){var p=null;if(l.g==d){ml(l),Sh(l),l.g=null;var x=2}else if(wh(l.h,d))p=d.D,Ng(l.h,d),x=1;else return;if(l.G!=0){if(d.o)if(x==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var O=l.B;x=nl(),lt(x,new xg(x,p)),fl(l)}else Zg(l);else if(O=d.s,O==3||O==0&&0<d.X||!(x==1&&sA(l,d)||x==2&&xh(l)))switch(p&&0<p.length&&(d=l.h,d.i=d.i.concat(p)),O){case 1:si(l,5);break;case 4:si(l,10);break;case 3:si(l,6);break;default:si(l,2)}}}function ny(l,d){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*d}function si(l,d){if(l.j.info("Error code "+d),d==2){var p=m(l.fb,l),x=l.Xa;const O=!x;x=new ii(x||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ol(x,"https"),ll(x),O?JS(x.toString(),p):ZS(x.toString(),p)}else Pt(2);l.G=0,l.l&&l.l.sa(d),ry(l),Yg(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function ry(l){if(l.G=0,l.ka=[],l.l){const d=Vg(l.h);(d.length!=0||l.i.length!=0)&&(k(l.ka,d),k(l.ka,l.i),l.h.i.length=0,E(l.i),l.i.length=0),l.l.ra()}}function iy(l,d,p){var x=p instanceof ii?Fn(p):new ii(p);if(x.g!="")d&&(x.g=d+"."+x.g),al(x,x.s);else{var O=a.location;x=O.protocol,d=d?d+"."+O.hostname:O.hostname,O=+O.port;var j=new ii(null);x&&ol(j,x),d&&(j.g=d),O&&al(j,O),p&&(j.l=p),x=j}return p=l.D,d=l.ya,p&&d&&De(x,p,d),De(x,"VER",l.la),co(l,x),x}function sy(l,d,p){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new ze(new ul({eb:p})):new ze(l.pa),d.Ha(l.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function oy(){}t=oy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function pl(){}pl.prototype.g=function(l,d){return new qt(l,d)};function qt(l,d){Xe.call(this),this.g=new Qg(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!w(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!w(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Ui(this)}v(qt,Xe),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){Th(this.g)},qt.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=ch(l),l=p);d.i.push(new US(d.Ya++,l)),d.G==3&&fl(d)},qt.prototype.N=function(){this.g.l=null,delete this.j,Th(this.g),delete this.g,qt.aa.N.call(this)};function ay(l){dh.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const p in d){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}v(ay,dh);function ly(){fh.call(this),this.status=1}v(ly,fh);function Ui(l){this.g=l}v(Ui,oy),Ui.prototype.ua=function(){lt(this.g,"a")},Ui.prototype.ta=function(l){lt(this.g,new ay(l))},Ui.prototype.sa=function(l){lt(this.g,new ly)},Ui.prototype.ra=function(){lt(this.g,"b")},pl.prototype.createWebChannel=pl.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,WT=function(){return new pl},zT=function(){return nl()},UT=ni,qf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rl.NO_ERROR=0,rl.TIMEOUT=8,rl.HTTP_ERROR=6,au=rl,Sg.COMPLETE="complete",$T=Sg,wg.EventType=Zs,Zs.OPEN="a",Zs.CLOSE="b",Zs.ERROR="c",Zs.MESSAGE="d",Xe.prototype.listen=Xe.prototype.K,Vo=wg,ze.prototype.listenOnce=ze.prototype.L,ze.prototype.getLastError=ze.prototype.Ka,ze.prototype.getLastErrorCode=ze.prototype.Ba,ze.prototype.getStatus=ze.prototype.Z,ze.prototype.getResponseJson=ze.prototype.Oa,ze.prototype.getResponseText=ze.prototype.oa,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Ha,BT=ze}).apply(typeof Fl<"u"?Fl:typeof self<"u"?self:typeof window<"u"?window:{});const Vv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zs="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new NT("@firebase/firestore");function Ki(){return ki.logLevel}function G(t,...e){if(ki.logLevel<=_e.DEBUG){const n=e.map(Mp);ki.debug(`Firestore (${zs}): ${t}`,...n)}}function tr(t,...e){if(ki.logLevel<=_e.ERROR){const n=e.map(Mp);ki.error(`Firestore (${zs}): ${t}`,...n)}}function Ds(t,...e){if(ki.logLevel<=_e.WARN){const n=e.map(Mp);ki.warn(`Firestore (${zs}): ${t}`,...n)}}function Mp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${zs}) INTERNAL ASSERTION FAILED: `+t;throw tr(e),new Error(e)}function Se(t,e){t||ae()}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Us{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _N{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Et.UNAUTHENTICATED))}shutdown(){}}class EN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class TN{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Se(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Lr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Lr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string"),new HT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string"),new Et(e)}}class xN{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class SN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new xN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Se(this.o===void 0);const r=s=>{s.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Se(typeof n.token=="string"),this.R=n.token,new AN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=PN(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ye(t,e){return t<e?-1:t>e?1:0}function Ns(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new tt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{static fromTimestamp(e){return new le(e)}static min(){return new le(new tt(0,0))}static max(){return new le(new tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Aa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Aa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Oe extends Aa{construct(e,n,r){return new Oe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Oe(n)}static emptyPath(){return new Oe([])}}const IN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends Aa{construct(e,n,r){return new dt(e,n,r)}static isValidIdentifier(e){return IN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new dt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new J($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new J($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new J($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new J($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(n)}static emptyPath(){return new dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Oe.fromString(e))}static fromName(e){return new ne(Oe.fromString(e).popFirst(5))}static empty(){return new ne(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Oe(e.slice()))}}function kN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new tt(n+1,0):new tt(n,r));return new zr(i,ne.empty(),e)}function RN(t){return new zr(t.readTime,t.key,-1)}class zr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new zr(le.min(),ne.empty(),-1)}static max(){return new zr(le.max(),ne.empty(),-1)}}function bN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ws(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==DN)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new B((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function VN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Hs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Fc.oe=-1;function jc(t){return t==null}function Ju(t){return t===0&&1/t==-1/0}function MN(t){return typeof t=="number"&&Number.isInteger(t)&&!Ju(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Mv(e)),e=ON(t.get(n),e);return Mv(e)}function ON(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Mv(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Jr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function GT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||ht.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ht.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jl(this.root,e,this.comparator,!1)}getReverseIterator(){return new jl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jl(this.root,e,this.comparator,!0)}}class jl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ht{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ht.RED,this.left=i??ht.EMPTY,this.right=s??ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ht(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ht.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}ht.EMPTY=null,ht.RED=!0,ht.BLACK=!1;ht.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ov(this.data.getIterator())}getIteratorFrom(e){return new Ov(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new nt(this.comparator);return n.data=e,n}}class Ov{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new Yt([])}unionWith(e){let n=new nt(dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ns(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new KT("Invalid base64 string: "+s):s}}(e);return new pt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pt.EMPTY_BYTE_STRING=new pt("");const FN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wr(t){if(Se(!!t),typeof t=="string"){let e=0;const n=FN.exec(t);if(Se(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(t.seconds),nanos:He(t.nanos)}}function He(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hr(t){return typeof t=="string"?pt.fromBase64String(t):pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Bc(t){const e=t.mapValue.fields.__previous_value__;return Lp(e)?Bc(e):e}function Ca(t){const e=Wr(t.mapValue.fields.__local_write_time__.timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Pa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Pa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Pa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function qr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lp(t)?4:$N(t)?9007199254740991:BN(t)?10:11:ae()}function Ln(t,e){if(t===e)return!0;const n=qr(t);if(n!==qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ca(t).isEqual(Ca(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Wr(i.timestampValue),a=Wr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Hr(i.bytesValue).isEqual(Hr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return He(i.geoPointValue.latitude)===He(s.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return He(i.integerValue)===He(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=He(i.doubleValue),a=He(s.doubleValue);return o===a?Ju(o)===Ju(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ns(t.arrayValue.values||[],e.arrayValue.values||[],Ln);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Lv(o)!==Lv(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Ln(o[u],a[u])))return!1;return!0}(t,e);default:return ae()}}function Ia(t,e){return(t.values||[]).find(n=>Ln(n,e))!==void 0}function Vs(t,e){if(t===e)return 0;const n=qr(t),r=qr(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=He(s.integerValue||s.doubleValue),u=He(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return Fv(t.timestampValue,e.timestampValue);case 4:return Fv(Ca(t),Ca(e));case 5:return ye(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Hr(s),u=Hr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=ye(a[c],u[c]);if(h!==0)return h}return ye(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ye(He(s.latitude),He(o.latitude));return a!==0?a:ye(He(s.longitude),He(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return jv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,c,h;const f=s.fields||{},m=o.fields||{},g=(a=f.value)===null||a===void 0?void 0:a.arrayValue,v=(u=m.value)===null||u===void 0?void 0:u.arrayValue,E=ye(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0);return E!==0?E:jv(g,v)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Bl.mapValue&&o===Bl.mapValue)return 0;if(s===Bl.mapValue)return 1;if(o===Bl.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const m=ye(u[f],h[f]);if(m!==0)return m;const g=Vs(a[u[f]],c[h[f]]);if(g!==0)return g}return ye(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ae()}}function Fv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=Wr(t),r=Wr(e),i=ye(n.seconds,r.seconds);return i!==0?i:ye(n.nanos,r.nanos)}function jv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Vs(n[i],r[i]);if(s)return s}return ye(n.length,r.length)}function Ms(t){return Gf(t)}function Gf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Wr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Hr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Gf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Gf(n.fields[o])}`;return i+"}"}(t.mapValue):ae()}function lu(t){switch(qr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bc(t);return e?16+lu(e):16;case 5:return 2*t.stringValue.length;case 6:return Hr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+lu(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Jr(r.fields,(s,o)=>{i+=s.length+lu(o)}),i}(t.mapValue);default:throw ae()}}function Kf(t){return!!t&&"integerValue"in t}function Op(t){return!!t&&"arrayValue"in t}function Bv(t){return!!t&&"nullValue"in t}function $v(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function uu(t){return!!t&&"mapValue"in t}function BN(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Jo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Jr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Jo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function $N(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.value=e}static empty(){return new Bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!uu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jo(n)}setAll(e){let n=dt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Jo(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());uu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ln(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];uu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Jr(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Bt(Jo(this.value))}}function QT(t){const e=[];return Jr(t.fields,(n,r)=>{const i=new dt([n]);if(uu(r)){const s=QT(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Yt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new xt(e,0,le.min(),le.min(),le.min(),Bt.empty(),0)}static newFoundDocument(e,n,r,i){return new xt(e,1,n,le.min(),r,i,0)}static newNoDocument(e,n){return new xt(e,2,n,le.min(),le.min(),Bt.empty(),0)}static newUnknownDocument(e,n){return new xt(e,3,n,le.min(),le.min(),Bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n){this.position=e,this.inclusive=n}}function Uv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=Vs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function zv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ln(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n="asc"){this.field=e,this.dir=n}}function UN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{}class Ze extends YT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new WN(e,n,r):n==="array-contains"?new GN(e,r):n==="in"?new KN(e,r):n==="not-in"?new QN(e,r):n==="array-contains-any"?new YN(e,r):new Ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new HN(e,r):new qN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Vs(n,this.value)):n!==null&&qr(this.value)===qr(n)&&this.matchesComparison(Vs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class On extends YT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new On(e,n)}matches(e){return XT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function XT(t){return t.op==="and"}function JT(t){return zN(t)&&XT(t)}function zN(t){for(const e of t.filters)if(e instanceof On)return!1;return!0}function Qf(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+Ms(t.value);if(JT(t))return t.filters.map(e=>Qf(e)).join(",");{const e=t.filters.map(n=>Qf(n)).join(",");return`${t.op}(${e})`}}function ZT(t,e){return t instanceof Ze?function(r,i){return i instanceof Ze&&r.op===i.op&&r.field.isEqual(i.field)&&Ln(r.value,i.value)}(t,e):t instanceof On?function(r,i){return i instanceof On&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&ZT(o,i.filters[a]),!0):!1}(t,e):void ae()}function ex(t){return t instanceof Ze?function(n){return`${n.field.canonicalString()} ${n.op} ${Ms(n.value)}`}(t):t instanceof On?function(n){return n.op.toString()+" {"+n.getFilters().map(ex).join(" ,")+"}"}(t):"Filter"}class WN extends Ze{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class HN extends Ze{constructor(e,n){super(e,"in",n),this.keys=tx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class qN extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=tx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function tx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class GN extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Op(n)&&Ia(n.arrayValue,this.value)}}class KN extends Ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ia(this.value.arrayValue,n)}}class QN extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ia(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ia(this.value.arrayValue,n)}}class YN extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Op(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ia(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Wv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new XN(t,e,n,r,i,s,o)}function Fp(t){const e=ce(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Qf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),jc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ms(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ms(r)).join(",")),e.ue=n}return e.ue}function jp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!UN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ZT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zv(t.startAt,e.startAt)&&zv(t.endAt,e.endAt)}function Yf(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function JN(t,e,n,r,i,s,o,a){return new $c(t,e,n,r,i,s,o,a)}function nx(t){return new $c(t)}function Hv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ZN(t){return t.collectionGroup!==null}function Zo(t){const e=ce(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new nt(dt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ec(s,r))}),n.has(dt.keyField().canonicalString())||e.ce.push(new ec(dt.keyField(),r))}return e.ce}function Nn(t){const e=ce(t);return e.le||(e.le=eV(e,Zo(t))),e.le}function eV(t,e){if(t.limitType==="F")return Wv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ec(i.field,s)});const n=t.endAt?new Zu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Zu(t.startAt.position,t.startAt.inclusive):null;return Wv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Xf(t,e,n){return new $c(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Uc(t,e){return jp(Nn(t),Nn(e))&&t.limitType===e.limitType}function rx(t){return`${Fp(Nn(t))}|lt:${t.limitType}`}function Qi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ex(i)).join(", ")}]`),jc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ms(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ms(i)).join(",")),`Target(${r})`}(Nn(t))}; limitType=${t.limitType})`}function zc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ne.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Zo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const c=Uv(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,Zo(r),i)||r.endAt&&!function(o,a,u){const c=Uv(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,Zo(r),i))}(t,e)}function tV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ix(t){return(e,n)=>{let r=!1;for(const i of Zo(t)){const s=nV(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function nV(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?Vs(u,c):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Jr(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return GT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV=new Ue(ne.comparator);function nr(){return rV}const sx=new Ue(ne.comparator);function Mo(...t){let e=sx;for(const n of t)e=e.insert(n.key,n);return e}function ox(t){let e=sx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function vi(){return ea()}function ax(){return ea()}function ea(){return new Mi(t=>t.toString(),(t,e)=>t.isEqual(e))}const iV=new Ue(ne.comparator),sV=new nt(ne.comparator);function pe(...t){let e=sV;for(const n of t)e=e.add(n);return e}const oV=new nt(ye);function aV(){return oV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(e)?"-0":e}}function lx(t){return{integerValue:""+t}}function ux(t,e){return MN(e)?lx(e):Bp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(){this._=void 0}}function lV(t,e,n){return t instanceof tc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Lp(s)&&(s=Bc(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ka?hx(t,e):t instanceof Ra?dx(t,e):function(i,s){const o=cx(i,s),a=qv(o)+qv(i.Pe);return Kf(o)&&Kf(i.Pe)?lx(a):Bp(i.serializer,a)}(t,e)}function uV(t,e,n){return t instanceof ka?hx(t,e):t instanceof Ra?dx(t,e):n}function cx(t,e){return t instanceof ba?function(r){return Kf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class tc extends Wc{}class ka extends Wc{constructor(e){super(),this.elements=e}}function hx(t,e){const n=fx(e);for(const r of t.elements)n.some(i=>Ln(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ra extends Wc{constructor(e){super(),this.elements=e}}function dx(t,e){let n=fx(e);for(const r of t.elements)n=n.filter(i=>!Ln(i,r));return{arrayValue:{values:n}}}class ba extends Wc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function qv(t){return He(t.integerValue||t.doubleValue)}function fx(t){return Op(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,n){this.field=e,this.transform=n}}function hV(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ka&&i instanceof ka||r instanceof Ra&&i instanceof Ra?Ns(r.elements,i.elements,Ln):r instanceof ba&&i instanceof ba?Ln(r.Pe,i.Pe):r instanceof tc&&i instanceof tc}(t.transform,e.transform)}class dV{constructor(e,n){this.version=e,this.transformResults=n}}class Tn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hc{}function mx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $p(t.key,Tn.none()):new Ha(t.key,t.data,Tn.none());{const n=t.data,r=Bt.empty();let i=new nt(dt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Zr(t.key,r,new Yt(i.toArray()),Tn.none())}}function fV(t,e,n){t instanceof Ha?function(i,s,o){const a=i.value.clone(),u=Kv(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Zr?function(i,s,o){if(!cu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Kv(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(px(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ta(t,e,n,r){return t instanceof Ha?function(s,o,a,u){if(!cu(s.precondition,o))return a;const c=s.value.clone(),h=Qv(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Zr?function(s,o,a,u){if(!cu(s.precondition,o))return a;const c=Qv(s.fieldTransforms,u,o),h=o.data;return h.setAll(px(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return cu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function mV(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=cx(r.transform,i||null);s!=null&&(n===null&&(n=Bt.empty()),n.set(r.field,s))}return n||null}function Gv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ns(r,i,(s,o)=>hV(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ha extends Hc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Zr extends Hc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function px(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Kv(t,e,n){const r=new Map;Se(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,uV(o,a,n[i]))}return r}function Qv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,lV(s,o,e))}return r}class $p extends Hc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pV extends Hc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&fV(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ta(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ta(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ax();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=mx(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&Ns(this.mutations,e.mutations,(n,r)=>Gv(n,r))&&Ns(this.baseMutations,e.baseMutations,(n,r)=>Gv(n,r))}}class Up{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Se(e.mutations.length===r.length);let i=function(){return iV}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Up(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke,we;function wV(t){switch(t){default:return ae();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function gx(t){if(t===void 0)return tr("GRPC error has no .code"),$.UNKNOWN;switch(t){case Ke.OK:return $.OK;case Ke.CANCELLED:return $.CANCELLED;case Ke.UNKNOWN:return $.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return $.INTERNAL;case Ke.UNAVAILABLE:return $.UNAVAILABLE;case Ke.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Ke.NOT_FOUND:return $.NOT_FOUND;case Ke.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Ke.ABORTED:return $.ABORTED;case Ke.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Ke.DATA_LOSS:return $.DATA_LOSS;default:return ae()}}(we=Ke||(Ke={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=new Ti([4294967295,4294967295],0);function Yv(t){const e=_V().encode(t),n=new jT;return n.update(e),new Uint8Array(n.digest())}function Xv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ti([n,r],0),new Ti([i,s],0)]}class zp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Lo(`Invalid padding: ${n}`);if(r<0)throw new Lo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Lo(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Ti.fromNumber(this.Te)}Ee(e,n,r){let i=e.add(n.multiply(Ti.fromNumber(r)));return i.compare(EV)===1&&(i=new Ti([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Yv(e),[r,i]=Xv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new zp(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=Yv(e),[r,i]=Xv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Lo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,qa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new qc(le.min(),i,new Ue(ye),nr(),pe())}}class qa{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new qa(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class yx{constructor(e,n){this.targetId=e,this.me=n}}class vx{constructor(e,n,r=pt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Jv{constructor(){this.fe=0,this.ge=Zv(),this.pe=pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),n=pe(),r=pe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ae()}}),new qa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Zv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Se(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class TV{constructor(e){this.Le=e,this.Be=new Map,this.ke=nr(),this.qe=$l(),this.Qe=$l(),this.Ke=new Ue(ye)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const s=i.target;if(Yf(s))if(r===0){const o=new ne(s.path);this.We(n,o,xt.newNoDocument(o,le.min()))}else Se(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),u=a?this.et(a,e,o):1;if(u!==0){this.He(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Hr(r).toUint8Array()}catch(u){if(u instanceof KT)return Ds("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new zp(o,i,s)}catch(u){return Ds(u instanceof Lo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Yf(a.target)){const u=new ne(a.target.path);this.st(u).has(o)||this.ot(o,u)||this.We(o,u,xt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=pe();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Ye(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new qc(e,n,this.Ke,this.ke,r);return this.ke=nr(),this.qe=$l(),this.Qe=$l(),this.Ke=new Ue(ye),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new Jv,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new nt(ye),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new nt(ye),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Jv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function $l(){return new Ue(ne.comparator)}function Zv(){return new Ue(ne.comparator)}const xV={asc:"ASCENDING",desc:"DESCENDING"},SV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AV={and:"AND",or:"OR"};class CV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Jf(t,e){return t.useProto3Json||jc(e)?e:{value:e}}function nc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function PV(t,e){return nc(t,e.toTimestamp())}function Vn(t){return Se(!!t),le.fromTimestamp(function(n){const r=Wr(n);return new tt(r.seconds,r.nanos)}(t))}function Wp(t,e){return Zf(t,e).canonicalString()}function Zf(t,e){const n=function(i){return new Oe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function _x(t){const e=Oe.fromString(t);return Se(Ax(e)),e}function em(t,e){return Wp(t.databaseId,e.path)}function pd(t,e){const n=_x(e);if(n.get(1)!==t.databaseId.projectId)throw new J($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(Tx(n))}function Ex(t,e){return Wp(t.databaseId,e)}function IV(t){const e=_x(t);return e.length===4?Oe.emptyPath():Tx(e)}function tm(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Tx(t){return Se(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function e1(t,e,n){return{name:em(t,e),fields:n.value.mapValue.fields}}function kV(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Se(h===void 0||typeof h=="string"),pt.fromBase64String(h||"")):(Se(h===void 0||h instanceof Buffer||h instanceof Uint8Array),pt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?$.UNKNOWN:gx(c.code);return new J(h,c.message||"")}(o);n=new vx(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=pd(t,r.document.name),s=Vn(r.document.updateTime),o=r.document.createTime?Vn(r.document.createTime):le.min(),a=new Bt({mapValue:{fields:r.document.fields}}),u=xt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new hu(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=pd(t,r.document),s=r.readTime?Vn(r.readTime):le.min(),o=xt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new hu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=pd(t,r.document),s=r.removedTargetIds||[];n=new hu([],s,i,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new vV(i,s),a=r.targetId;n=new yx(a,o)}}return n}function RV(t,e){let n;if(e instanceof Ha)n={update:e1(t,e.key,e.value)};else if(e instanceof $p)n={delete:em(t,e.key)};else if(e instanceof Zr)n={update:e1(t,e.key,e.data),updateMask:jV(e.fieldMask)};else{if(!(e instanceof pV))return ae();n={verify:em(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof tc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ka)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ra)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ba)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:PV(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae()}(t,e.precondition)),n}function bV(t,e){return t&&t.length>0?(Se(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Vn(i.updateTime):Vn(s);return o.isEqual(le.min())&&(o=Vn(s)),new dV(o,i.transformResults||[])}(n,e))):[]}function DV(t,e){return{documents:[Ex(t,e.path)]}}function NV(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ex(t,i);const s=function(c){if(c.length!==0)return Sx(On.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:Yi(m.field),direction:LV(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Jf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ct:n,parent:i}}function VV(t){let e=IV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Se(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const m=xx(f);return m instanceof On&&JT(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(v){return new ec(Xi(v.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,jc(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(f){const m=!!f.before,g=f.values||[];return new Zu(g,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,g=f.values||[];return new Zu(g,m)}(n.endAt)),JN(e,i,o,s,a,"F",u,c)}function MV(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Xi(n.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Xi(n.unaryFilter.field);return Ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Xi(n.unaryFilter.field);return Ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Xi(n.unaryFilter.field);return Ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return Ze.create(Xi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return On.create(n.compositeFilter.filters.map(r=>xx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function LV(t){return xV[t]}function OV(t){return SV[t]}function FV(t){return AV[t]}function Yi(t){return{fieldPath:t.canonicalString()}}function Xi(t){return dt.fromServerFormat(t.fieldPath)}function Sx(t){return t instanceof Ze?function(n){if(n.op==="=="){if($v(n.value))return{unaryFilter:{field:Yi(n.field),op:"IS_NAN"}};if(Bv(n.value))return{unaryFilter:{field:Yi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($v(n.value))return{unaryFilter:{field:Yi(n.field),op:"IS_NOT_NAN"}};if(Bv(n.value))return{unaryFilter:{field:Yi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yi(n.field),op:OV(n.op),value:n.value}}}(t):t instanceof On?function(n){const r=n.getFilters().map(i=>Sx(i));return r.length===1?r[0]:{compositeFilter:{op:FV(n.op),filters:r}}}(t):ae()}function jV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ax(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n,r,i,s=le.min(),o=le.min(),a=pt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e){this.ht=e}}function $V(t){const e=VV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(){this.ln=new zV}addToCollectionParentIndex(e,n){return this.ln.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(zr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(zr.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class zV{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new nt(Oe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new nt(Oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ft{static withCacheSize(e){return new Ft(e,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ft.DEFAULT_COLLECTION_PERCENTILE=10,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ft.DEFAULT=new Ft(41943040,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ft.DISABLED=new Ft(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Ls(0)}static Qn(){return new Ls(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1([t,e],[n,r]){const i=ye(t,n);return i===0?ye(e,r):i}class WV{constructor(e){this.Gn=e,this.buffer=new nt(n1),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();n1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class HV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){G("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Hs(n)?G("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Ws(n)}await this.Yn(3e5)})}}class qV{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Fc.oe);const r=new WV(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(t1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),t1):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,s,o,a,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),Ki()<=_e.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function GV(t,e){return new qV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(){this.changes=new Mi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ta(r.mutation,i,Yt.empty(),tt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const i=vi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Mo();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=vi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=nr();const o=ea(),a=function(){return ea()}();return n.forEach((u,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Zr)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),ta(h.mutation,c,h.mutation.getFieldMask(),tt.now())):o.set(c.key,Yt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new QV(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ea();let i=new Ue((o,a)=>o-a),s=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||Yt.empty();h=a.applyToLocalView(c,h),r.set(u,h);const f=(i.get(a.batchId)||pe()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,f=ax();h.forEach(m=>{if(!s.has(m)){const g=mx(n.get(m),r.get(m));g!==null&&f.set(m,g),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ZN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):B.resolve(vi());let a=-1,u=s;return o.next(c=>B.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,pe())).next(h=>({batchId:a,changes:ox(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let i=Mo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Mo();return this.indexManager.getCollectionParents(e,s).next(a=>B.forEach(a,u=>{const c=function(f,m){return new $c(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,xt.newInvalidDocument(h)))});let a=Mo();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&ta(h.mutation,c,Yt.empty(),tt.now()),zc(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return B.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Vn(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:$V(i.bundledQuery),readTime:Vn(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(){this.overlays=new Ue(ne.comparator),this.Er=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=vi();return B.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.Tt(e,n,s)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=vi(),s=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ue((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=vi(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=vi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return B.resolve(a)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new yV(n,r));let s=this.Er.get(n);s===void 0&&(s=pe(),this.Er.set(n,s)),this.Er.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(){this.sessionToken=pt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(){this.dr=new nt(st.Ar),this.Rr=new nt(st.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const r=new st(e,n);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new st(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new ne(new Oe([])),r=new st(n,e),i=new st(n,e+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new ne(new Oe([])),r=new st(n,e),i=new st(n,e+1);let s=pe();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new st(e,0),r=this.dr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class st{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return ne.comparator(e.key,n.key)||ye(e.br,n.br)}static Vr(e,n){return ye(e.br,n.br)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new nt(st.Ar)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new gV(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new st(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new st(n,0),i=new st(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new nt(ye);return n.forEach(i=>{const s=new st(i,0),o=new st(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),B.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ne.isDocumentKey(s)||(s=s.child(""));const o=new st(new ne(s),0);let a=new nt(ye);return this.vr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.br)),!0)},o),B.resolve(this.Mr(a))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Se(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return B.forEach(n.mutations,i=>{const s=new st(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,n){const r=new st(n,0),i=this.vr.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e){this.Nr=e,this.docs=function(){return new Ue(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():xt.newInvalidDocument(n))}getEntries(e,n){let r=nr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():xt.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=nr();const o=n.path,a=new ne(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||bN(RN(h),r)<=0||(i.has(h.key)||zc(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ae()}Lr(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new nM(this)}getSize(e){return B.resolve(this.size)}}class nM extends KV{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.persistence=e,this.Br=new Mi(n=>Fp(n),jp),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.kr=0,this.qr=new Hp,this.targetCount=0,this.Qr=Ls.qn()}forEachTarget(e,n){return this.Br.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),B.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new Ls(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Un(n),B.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Br.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),B.waitFor(s).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Br.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,n){this.Kr={},this.overlays={},this.$r=new Fc(0),this.Ur=!1,this.Ur=!0,this.Wr=new ZV,this.referenceDelegate=e(this),this.Gr=new rM(this),this.indexManager=new UV,this.remoteDocumentCache=function(i){return new tM(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new BV(n),this.jr=new XV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new JV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new eM(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const i=new iM(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,n){return B.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class iM extends NN{constructor(e){super(),this.currentSequenceNumber=e}}class qp{constructor(e){this.persistence=e,this.Zr=new Hp,this.Xr=null}static ei(e){return new qp(e)}get ti(){if(this.Xr)return this.Xr;throw ae()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),B.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.ti,r=>{const i=ne.fromPath(r);return this.ni(e,i).next(s=>{s||n.removeEntry(i,le.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return B.or([()=>B.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class rc{constructor(e,n){this.persistence=e,this.ri=new Mi(r=>LN(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=GV(this,n)}static ei(e,n){return new rc(e,n)}Hr(){}Jr(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return B.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?B.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Lr(e,o=>this.ir(e,o,n).next(a=>{a||(r++,s.removeEntry(o,le.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),B.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=lu(e.data.value)),n}ir(e,n,r){return B.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return B.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=pe(),i=pe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Gp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return iD()?8:VN(nD())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Xi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new sM;return this.ts(e,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(e,n,o,a.size)})}).next(()=>s.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(Ki()<=_e.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Qi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),B.resolve()):(Ki()<=_e.DEBUG&&G("QueryEngine","Query:",Qi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(Ki()<=_e.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Qi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nn(n))):B.resolve())}Xi(e,n){if(Hv(n))return B.resolve(null);let r=Nn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Xf(n,null,"F"),r=Nn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=pe(...s);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.rs(n,a);return this.ss(n,c,o,u.readTime)?this.Xi(e,Xf(n,null,"F")):this.os(e,c,n,u)}))})))}es(e,n,r,i){return Hv(n)||i.isEqual(le.min())?B.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?B.resolve(null):(Ki()<=_e.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qi(n)),this.os(e,o,n,kN(i,-1)).next(a=>a))})}rs(e,n){let r=new nt(ix(e));return n.forEach((i,s)=>{zc(e,s)&&(r=r.add(s))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,n,r){return Ki()<=_e.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Qi(n)),this.Zi.getDocumentsMatchingQuery(e,n,zr.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new Ue(ye),this.cs=new Mi(s=>Fp(s),jp),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YV(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function lM(t,e,n,r){return new aM(t,e,n,r)}async function Px(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=pe();for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Ts:c,removedBatchIds:o,addedBatchIds:a}))})})}function uM(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){const f=c.batch,m=f.keys();let g=B.resolve();return m.forEach(v=>{g=g.next(()=>h.getEntry(u,v)).next(E=>{const k=c.docVersions.get(v);Se(k!==null),E.version.compareTo(k)<0&&(f.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=pe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Ix(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function cM(t,e){const n=ce(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];e.targetChanges.forEach((h,f)=>{const m=i.get(f);if(!m)return;a.push(n.Gr.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Gr.addMatchingKeys(s,h.addedDocuments,f)));let g=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(pt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(f,g),function(E,k,A){return E.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(m,g,h)&&a.push(n.Gr.updateTargetData(s,g))});let u=nr(),c=pe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(hM(s,o,e.documentUpdates).next(h=>{u=h.Is,c=h.Es})),!r.isEqual(le.min())){const h=n.Gr.getLastRemoteSnapshotVersion(s).next(f=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return B.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.us=i,s))}function hM(t,e,n){let r=pe(),i=pe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=nr();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(le.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):G("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Is:o,Es:i}})}function dM(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fM(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(s=>s?(i=s,B.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new Tr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function nm(t,e,n){const r=ce(t),i=r.us.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Hs(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function r1(t,e,n){const r=ce(t);let i=le.min(),s=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const f=ce(u),m=f.cs.get(h);return m!==void 0?B.resolve(f.us.get(m)):f.Gr.getTargetData(c,h)}(r,o,Nn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,n?i:le.min(),n?s:pe())).next(a=>(mM(r,tV(e),a),{documents:a,ds:s})))}function mM(t,e,n){let r=t.ls.get(e)||le.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ls.set(e,r)}class i1{constructor(){this.activeTargetIds=aV()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pM{constructor(){this._o=new i1,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new i1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul=null;function gd(){return Ul===null?Ul=function(){return 268435456+Math.round(2147483648*Math.random())}():Ul++,"0x"+Ul.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="WebChannelConnection";class wM extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=gd(),u=this.No(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(c,s,o),this.Bo(n,u,c,i).then(h=>(G("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Ds("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Lo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=yM[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,r,i){const s=gd();return new Promise((o,a)=>{const u=new BT;u.setWithCredentials(!0),u.listenOnce($T.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case au.NO_ERROR:const h=u.getResponseJson();G(_t,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case au.TIMEOUT:G(_t,`RPC '${e}' ${s} timed out`),a(new J($.DEADLINE_EXCEEDED,"Request time out"));break;case au.HTTP_ERROR:const f=u.getStatus();if(G(_t,`RPC '${e}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const v=function(k){const A=k.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(A)>=0?A:$.UNKNOWN}(g.status);a(new J(v,g.message))}else a(new J($.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new J($.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{G(_t,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);G(_t,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}qo(e,n,r){const i=gd(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=WT(),a=zT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Lo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");G(_t,`Creating RPC '${e}' stream ${i}: ${h}`,u);const f=o.createWebChannel(h,u);let m=!1,g=!1;const v=new vM({Eo:k=>{g?G(_t,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(m||(G(_t,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),G(_t,`RPC '${e}' stream ${i} sending:`,k),f.send(k))},Ao:()=>f.close()}),E=(k,A,w)=>{k.listen(A,_=>{try{w(_)}catch(V){setTimeout(()=>{throw V},0)}})};return E(f,Vo.EventType.OPEN,()=>{g||(G(_t,`RPC '${e}' stream ${i} transport opened.`),v.So())}),E(f,Vo.EventType.CLOSE,()=>{g||(g=!0,G(_t,`RPC '${e}' stream ${i} transport closed`),v.Do())}),E(f,Vo.EventType.ERROR,k=>{g||(g=!0,Ds(_t,`RPC '${e}' stream ${i} transport errored:`,k),v.Do(new J($.UNAVAILABLE,"The operation could not be completed")))}),E(f,Vo.EventType.MESSAGE,k=>{var A;if(!g){const w=k.data[0];Se(!!w);const _=w,V=(_==null?void 0:_.error)||((A=_[0])===null||A===void 0?void 0:A.error);if(V){G(_t,`RPC '${e}' stream ${i} received error:`,V);const L=V.status;let F=function(P){const I=Ke[P];if(I!==void 0)return gx(I)}(L),S=V.message;F===void 0&&(F=$.INTERNAL,S="Unknown error status: "+L+" with message "+V.message),g=!0,v.Do(new J(F,S)),f.close()}else G(_t,`RPC '${e}' stream ${i} received:`,w),v.vo(w)}}),E(a,UT.STAT_EVENT,k=>{k.stat===qf.PROXY?G(_t,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===qf.NOPROXY&&G(_t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.bo()},0),v}}function yd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t){return new CV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,n,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n,r,i,s,o,a,u){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new kx(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(tr(n.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new J($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _M extends Rx{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=kV(this.serializer,e),r=function(s){if(!("targetChange"in s))return le.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?Vn(o.readTime):le.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=tm(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Yf(u)?{documents:DV(s,u)}:{query:NV(s,u).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=wx(s,o.resumeToken);const c=Jf(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=nc(s,o.snapshotVersion.toTimestamp());const c=Jf(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=MV(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=tm(this.serializer),n.removeTarget=e,this.c_(n)}}class EM extends Rx{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Se(!!e.streamToken),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=bV(e.writeResults,e.commitTime),r=Vn(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=tm(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>RV(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new J($.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,Zf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J($.UNKNOWN,s.toString())})}ko(e,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,Zf(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J($.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class xM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(tr(n),this.C_=!1):G("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{Li(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=ce(u);c.k_.add(4),await Ga(c),c.K_.set("Unknown"),c.k_.delete(4),await Kc(c)}(this))})}),this.K_=new xM(r,i)}}async function Kc(t){if(Li(t))for(const e of t.q_)await e(!0)}async function Ga(t){for(const e of t.q_)await e(!1)}function bx(t,e){const n=ce(t);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),Xp(n)?Yp(n):qs(n).s_()&&Qp(n,e))}function Kp(t,e){const n=ce(t),r=qs(n);n.B_.delete(e),r.s_()&&Dx(n,e),n.B_.size===0&&(r.s_()?r.a_():Li(n)&&n.K_.set("Unknown"))}function Qp(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qs(t).V_(e)}function Dx(t,e){t.U_.xe(e),qs(t).m_(e)}function Yp(t){t.U_=new TV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.B_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),qs(t).start(),t.K_.F_()}function Xp(t){return Li(t)&&!qs(t).i_()&&t.B_.size>0}function Li(t){return ce(t).k_.size===0}function Nx(t){t.U_=void 0}async function AM(t){t.K_.set("Online")}async function CM(t){t.B_.forEach((e,n)=>{Qp(t,e)})}async function PM(t,e){Nx(t),Xp(t)?(t.K_.O_(e),Yp(t)):t.K_.set("Unknown")}async function IM(t,e,n){if(t.K_.set("Online"),e instanceof vx&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.B_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.B_.delete(a),i.U_.removeTarget(a))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ic(t,r)}else if(e instanceof hu?t.U_.$e(e):e instanceof yx?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(le.min()))try{const r=await Ix(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.B_.get(c);h&&s.B_.set(c,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const h=s.B_.get(u);if(!h)return;s.B_.set(u,h.withResumeToken(pt.EMPTY_BYTE_STRING,h.snapshotVersion)),Dx(s,u);const f=new Tr(h.target,u,c,h.sequenceNumber);Qp(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await ic(t,r)}}async function ic(t,e,n){if(!Hs(e))throw e;t.k_.add(1),await Ga(t),t.K_.set("Offline"),n||(n=()=>Ix(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await Kc(t)})}function Vx(t,e){return e().catch(n=>ic(t,n,e))}async function Qc(t){const e=ce(t),n=Gr(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;kM(e);)try{const i=await dM(e.localStore,r);if(i===null){e.L_.length===0&&n.a_();break}r=i.batchId,RM(e,i)}catch(i){await ic(e,i)}Mx(e)&&Lx(e)}function kM(t){return Li(t)&&t.L_.length<10}function RM(t,e){t.L_.push(e);const n=Gr(t);n.s_()&&n.f_&&n.g_(e.mutations)}function Mx(t){return Li(t)&&!Gr(t).i_()&&t.L_.length>0}function Lx(t){Gr(t).start()}async function bM(t){Gr(t).w_()}async function DM(t){const e=Gr(t);for(const n of t.L_)e.g_(n.mutations)}async function NM(t,e,n){const r=t.L_.shift(),i=Up.from(r,e,n);await Vx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Qc(t)}async function VM(t,e){e&&Gr(t).f_&&await async function(r,i){if(function(o){return wV(o)&&o!==$.ABORTED}(i.code)){const s=r.L_.shift();Gr(r).__(),await Vx(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Qc(r)}}(t,e),Mx(t)&&Lx(t)}async function o1(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=Li(n);n.k_.add(3),await Ga(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Kc(n)}async function MM(t,e){const n=ce(t);e?(n.k_.delete(2),await Kc(n)):e||(n.k_.add(2),await Ga(n),n.K_.set("Unknown"))}function qs(t){return t.W_||(t.W_=function(n,r,i){const s=ce(n);return s.b_(),new _M(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:AM.bind(null,t),mo:CM.bind(null,t),po:PM.bind(null,t),R_:IM.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),Xp(t)?Yp(t):t.K_.set("Unknown")):(await t.W_.stop(),Nx(t))})),t.W_}function Gr(t){return t.G_||(t.G_=function(n,r,i){const s=ce(n);return s.b_(),new EM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:bM.bind(null,t),po:VM.bind(null,t),p_:DM.bind(null,t),y_:NM.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await Qc(t)):(await t.G_.stop(),t.L_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.L_.length} pending writes`),t.L_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Jp(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zp(t,e){if(tr("AsyncQueue",`${e}: ${t}`),Hs(t))return new J($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{static emptySet(e){return new Es(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=Mo(),this.sortedSet=new Ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Es)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Es;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(){this.z_=new Ue(ne.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):ae():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Os{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Os(e,n,Es.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class OM{constructor(){this.queries=l1(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=ce(n),s=i.queries;i.queries=l1(),s.forEach((o,a)=>{for(const u of a.J_)u.onError(r)})})(this,new J($.ABORTED,"Firestore shutting down"))}}function l1(){return new Mi(t=>rx(t),Uc)}async function FM(t,e){const n=ce(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new LM,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Zp(o,`Initialization of query '${Qi(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.J_.push(e),e.ea(n.onlineState),s.H_&&e.ta(s.H_)&&eg(n)}async function jM(t,e){const n=ce(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function BM(t,e){const n=ce(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&eg(n)}function $M(t,e,n){const r=ce(t),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(e)}function eg(t){t.X_.forEach(e=>{e.next()})}var rm,u1;(u1=rm||(rm={})).na="default",u1.Cache="cache";class UM{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Os(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Os.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==rm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e){this.key=e}}class Fx{constructor(e){this.key=e}}class zM{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=pe(),this.mutatedKeys=pe(),this.Va=ix(e),this.ma=new Es(this.Va)}get fa(){return this.da}ga(e,n){const r=n?n.pa:new a1,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const m=i.get(h),g=zc(this.query,f)?f:null,v=!!m&&this.mutatedKeys.has(m.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let k=!1;m&&g?m.data.isEqual(g.data)?v!==E&&(r.track({type:3,doc:g}),k=!0):this.ya(m,g)||(r.track({type:2,doc:g}),k=!0,(u&&this.Va(g,u)>0||c&&this.Va(g,c)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),k=!0):m&&!g&&(r.track({type:1,doc:m}),k=!0,(u||c)&&(a=!0)),k&&(g?(o=o.add(g),s=E?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((h,f)=>function(g,v){const E=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return E(g)-E(v)}(h.type,f.type)||this.Va(h.doc,f.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],u=this.Ra.size===0&&this.current&&!i?1:0,c=u!==this.Aa;return this.Aa=u,o.length!==0||c?{snapshot:new Os(this.query,e.ma,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new a1,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=pe(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new Fx(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new Ox(r))}),n}va(e){this.da=e.ds,this.Ra=pe();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Os.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class WM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class HM{constructor(e){this.key=e,this.Fa=!1}}class qM{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new Mi(a=>rx(a),Uc),this.Oa=new Map,this.Na=new Set,this.La=new Ue(ne.comparator),this.Ba=new Map,this.ka=new Hp,this.qa={},this.Qa=new Map,this.Ka=Ls.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function GM(t,e,n=!0){const r=Wx(t);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await jx(r,e,n,!0),i}async function KM(t,e){const n=Wx(t);await jx(n,e,!0,!1)}async function jx(t,e,n,r){const i=await fM(t.localStore,Nn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await QM(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&bx(t.remoteStore,i),a}async function QM(t,e,n,r,i){t.Ua=(f,m,g)=>async function(E,k,A,w){let _=k.view.ga(A);_.ss&&(_=await r1(E.localStore,k.query,!1).then(({documents:S})=>k.view.ga(S,_)));const V=w&&w.targetChanges.get(k.targetId),L=w&&w.targetMismatches.get(k.targetId)!=null,F=k.view.applyChanges(_,E.isPrimaryClient,V,L);return h1(E,k.targetId,F.ba),F.snapshot}(t,f,m,g);const s=await r1(t.localStore,e,!0),o=new zM(e,s.ds),a=o.ga(s.documents),u=qa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);h1(t,n,c.ba);const h=new WM(e,n,o);return t.xa.set(e,h),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),c.snapshot}async function YM(t,e,n){const r=ce(t),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!Uc(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await nm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Kp(r.remoteStore,i.targetId),im(r,i.targetId)}).catch(Ws)):(im(r,i.targetId),await nm(r.localStore,i.targetId,!0))}async function XM(t,e){const n=ce(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Kp(n.remoteStore,r.targetId))}async function JM(t,e,n){const r=sL(t);try{const i=await function(o,a){const u=ce(o),c=tt.now(),h=a.reduce((g,v)=>g.add(v.key),pe());let f,m;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=nr(),E=pe();return u.hs.getEntries(g,h).next(k=>{v=k,v.forEach((A,w)=>{w.isValidDocument()||(E=E.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,v)).next(k=>{f=k;const A=[];for(const w of a){const _=mV(w,f.get(w.key).overlayedDocument);_!=null&&A.push(new Zr(w.key,_,QT(_.value.mapValue),Tn.exists(!0)))}return u.mutationQueue.addMutationBatch(g,c,A,a)}).next(k=>{m=k;const A=k.applyToLocalDocumentSet(f,E);return u.documentOverlayCache.saveOverlays(g,k.batchId,A)})}).then(()=>({batchId:m.batchId,changes:ox(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.qa[o.currentUser.toKey()];c||(c=new Ue(ye)),c=c.insert(a,u),o.qa[o.currentUser.toKey()]=c}(r,i.batchId,n),await Ka(r,i.changes),await Qc(r.remoteStore)}catch(i){const s=Zp(i,"Failed to persist write");n.reject(s)}}async function Bx(t,e){const n=ce(t);try{const r=await cM(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ba.get(s);o&&(Se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?Se(o.Fa):i.removedDocuments.size>0&&(Se(o.Fa),o.Fa=!1))}),await Ka(n,r,e)}catch(r){await Ws(r)}}function c1(t,e,n){const r=ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=ce(o);u.onlineState=a;let c=!1;u.queries.forEach((h,f)=>{for(const m of f.J_)m.ea(a)&&(c=!0)}),c&&eg(u)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ZM(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ba.get(e),s=i&&i.key;if(s){let o=new Ue(ne.comparator);o=o.insert(s,xt.newNoDocument(s,le.min()));const a=pe().add(s),u=new qc(le.min(),new Map,new Ue(ye),o,a);await Bx(r,u),r.La=r.La.remove(s),r.Ba.delete(e),tg(r)}else await nm(r.localStore,e,!1).then(()=>im(r,e,n)).catch(Ws)}async function eL(t,e){const n=ce(t),r=e.batch.batchId;try{const i=await uM(n.localStore,e);Ux(n,r,null),$x(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ka(n,i)}catch(i){await Ws(i)}}async function tL(t,e,n){const r=ce(t);try{const i=await function(o,a){const u=ce(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(f=>(Se(f!==null),h=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);Ux(r,e,n),$x(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ka(r,i)}catch(i){await Ws(i)}}function $x(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function Ux(t,e,n){const r=ce(t);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function im(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||zx(t,r)})}function zx(t,e){t.Na.delete(e.path.canonicalString());const n=t.La.get(e);n!==null&&(Kp(t.remoteStore,n),t.La=t.La.remove(e),t.Ba.delete(n),tg(t))}function h1(t,e,n){for(const r of n)r instanceof Ox?(t.ka.addReference(r.key,e),nL(t,r)):r instanceof Fx?(G("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||zx(t,r.key)):ae()}function nL(t,e){const n=e.key,r=n.path.canonicalString();t.La.get(n)||t.Na.has(r)||(G("SyncEngine","New document in limbo: "+n),t.Na.add(r),tg(t))}function tg(t){for(;t.Na.size>0&&t.La.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new ne(Oe.fromString(e)),r=t.Ka.next();t.Ba.set(r,new HM(n)),t.La=t.La.insert(n,r),bx(t.remoteStore,new Tr(Nn(nx(n.path)),r,"TargetPurposeLimboResolution",Fc.oe))}}async function Ka(t,e,n){const r=ce(t),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,u)=>{o.push(r.Ua(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){i.push(c);const f=Gp.zi(u.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(u,c){const h=ce(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>B.forEach(c,m=>B.forEach(m.Wi,g=>h.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>B.forEach(m.Gi,g=>h.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!Hs(f))throw f;G("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const g=h.us.get(m),v=g.snapshotVersion,E=g.withLastLimboFreeSnapshotVersion(v);h.us=h.us.insert(m,E)}}}(r.localStore,s))}async function rL(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await Px(n.localStore,e);n.currentUser=e,function(s,o){s.Qa.forEach(a=>{a.forEach(u=>{u.reject(new J($.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ka(n,r.Ts)}}function iL(t,e){const n=ce(t),r=n.Ba.get(e);if(r&&r.Fa)return pe().add(r.key);{let i=pe();const s=n.Oa.get(e);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function Wx(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZM.bind(null,e),e.Ma.R_=BM.bind(null,e.eventManager),e.Ma.Wa=$M.bind(null,e.eventManager),e}function sL(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tL.bind(null,e),e}class sc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gc(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return lM(this.persistence,new oM,e.initialUser,this.serializer)}ja(e){return new Cx(qp.ei,this.serializer)}za(e){return new pM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sc.provider={build:()=>new sc};class oL extends sc{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Se(this.persistence.referenceDelegate instanceof rc);const r=this.persistence.referenceDelegate.garbageCollector;return new HV(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Ft.withCacheSize(this.cacheSizeBytes):Ft.DEFAULT;return new Cx(r=>rc.ei(r,n),this.serializer)}}class sm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>c1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rL.bind(null,this.syncEngine),await MM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new OM}()}createDatastore(e){const n=Gc(e.databaseInfo.databaseId),r=function(s){return new wM(s)}(e.databaseInfo);return function(s,o,a,u){return new TM(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new SM(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>c1(this.syncEngine,n,0),function(){return s1.p()?new s1:new gM}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,h){const f=new qM(i,s,o,a,u,c);return h&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ce(i);G("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await Ga(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}sm.provider={build:()=>new sm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Et.UNAUTHENTICATED,this.clientId=qT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{G("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Zp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function vd(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Px(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function d1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await uL(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>o1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>o1(e.remoteStore,i)),t._onlineComponents=e}async function uL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await vd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ds("Error using user provided cache. Falling back to memory cache: "+n),await vd(t,new sc)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await vd(t,new oL(void 0));return t._offlineComponents}async function Hx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await d1(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await d1(t,new sm))),t._onlineComponents}function cL(t){return Hx(t).then(e=>e.syncEngine)}async function hL(t){const e=await Hx(t),n=e.eventManager;return n.onListen=GM.bind(null,e.syncEngine),n.onUnlisten=YM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=KM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XM.bind(null,e.syncEngine),n}function dL(t,e,n={}){const r=new Lr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const h=new aL({next:m=>{h.eu(),o.enqueueAndForget(()=>jM(s,f)),m.fromCache&&u.source==="server"?c.reject(new J($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new UM(a,h,{includeMetadataChanges:!0,ua:!0});return FM(s,f)}(await hL(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t,e,n){if(!n)throw new J($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fL(t,e,n,r){if(e===!0&&r===!0)throw new J($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function m1(t){if(!ne.isDocumentKey(t))throw new J($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function p1(t){if(ne.isDocumentKey(t))throw new J($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ng(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function Ri(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ng(t);throw new J($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new J($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new J($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new J($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new g1({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new g1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new _N;switch(r.type){case"firstParty":return new SN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=f1.get(n);r&&(G("ComponentProvider","Removing Datastore"),f1.delete(n),r.terminate())}(this),Promise.resolve()}}function mL(t,e,n,r={}){var i;const s=(t=Ri(t,Yc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ds("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Et.MOCK_USER;else{a=tD(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new J($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Et(c)}t._authCredentials=new EN(new HT(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xc(this.firestore,e,this._query)}}class hn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Or(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hn(this.firestore,e,this._key)}}class Or extends Xc{constructor(e,n,r){super(e,n,nx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hn(this.firestore,null,new ne(e))}withConverter(e){return new Or(this.firestore,e,this._path)}}function y1(t,e,...n){if(t=Ur(t),Gx("collection","path",e),t instanceof Yc){const r=Oe.fromString(e,...n);return p1(r),new Or(t,null,r)}{if(!(t instanceof hn||t instanceof Or))throw new J($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return p1(r),new Or(t.firestore,null,r)}}function du(t,e,...n){if(t=Ur(t),arguments.length===1&&(e=qT.newId()),Gx("doc","path",e),t instanceof Yc){const r=Oe.fromString(e,...n);return m1(r),new hn(t,null,new ne(r))}{if(!(t instanceof hn||t instanceof Or))throw new J($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return m1(r),new hn(t.firestore,t instanceof Or?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new kx(this,"async_queue_retry"),this.fu=()=>{const r=yd();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=yd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=yd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new Lr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Hs(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw tr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=Jp.createAndSchedule(this,e,n,r,s=>this.Su(s));return this.du.push(i),i}pu(){this.Au&&ae()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}class Qa extends Yc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new v1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new v1(e),this._firestoreClient=void 0,await e}}}function pL(t,e){const n=typeof t=="object"?t:cN(),r=typeof t=="string"?t:"(default)",i=oN(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Zb("firestore");s&&mL(i,...s)}return i}function Kx(t){if(t._terminated)throw new J($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||gL(t),t._firestoreClient}function gL(t){var e,n,r;const i=t._freezeSettings(),s=function(a,u,c,h){return new jN(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,qx(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new lL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fs(pt.fromBase64String(e))}catch(n){throw new J($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Fs(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=/^__.*__$/;class vL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ha(e,this.data,n,this.fieldTransforms)}}class Qx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Zr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Yx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class sg{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new sg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return oc(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(Yx(this.Mu)&&yL.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class wL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gc(e)}$u(e,n,r,i=!1){return new sg({Mu:e,methodName:n,Ku:r,path:dt.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xx(t){const e=t._freezeSettings(),n=Gc(t._databaseId);return new wL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _L(t,e,n,r,i,s={}){const o=t.$u(s.merge||s.mergeFields?2:0,e,n,i);ag("Data must be an object, but it was:",o,r);const a=Jx(r,o);let u,c;if(s.merge)u=new Yt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const m=om(e,f,n);if(!o.contains(m))throw new J($.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);eS(h,m)||h.push(m)}u=new Yt(h),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new vL(new Bt(a),u,c)}class eh extends Zc{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eh}}class og extends Zc{constructor(e,n){super(e),this.Wu=n}_toFieldTransform(e){const n=new ba(e.serializer,ux(e.serializer,this.Wu));return new cV(e.path,n)}isEqual(e){return e instanceof og&&this.Wu===e.Wu}}function EL(t,e,n,r){const i=t.$u(1,e,n);ag("Data must be an object, but it was:",i,r);const s=[],o=Bt.empty();Jr(r,(u,c)=>{const h=lg(e,u,n);c=Ur(c);const f=i.Bu(h);if(c instanceof eh)s.push(h);else{const m=th(c,f);m!=null&&(s.push(h),o.set(h,m))}});const a=new Yt(s);return new Qx(o,a,i.fieldTransforms)}function TL(t,e,n,r,i,s){const o=t.$u(1,e,n),a=[om(e,r,n)],u=[i];if(s.length%2!=0)throw new J($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(om(e,s[m])),u.push(s[m+1]);const c=[],h=Bt.empty();for(let m=a.length-1;m>=0;--m)if(!eS(c,a[m])){const g=a[m];let v=u[m];v=Ur(v);const E=o.Bu(g);if(v instanceof eh)c.push(g);else{const k=th(v,E);k!=null&&(c.push(g),h.set(g,k))}}const f=new Yt(c);return new Qx(h,f,o.fieldTransforms)}function th(t,e){if(Zx(t=Ur(t)))return ag("Unsupported field value:",e,t),Jx(t,e);if(t instanceof Zc)return function(r,i){if(!Yx(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=th(a,i.ku(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ur(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ux(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=tt.fromDate(r);return{timestampValue:nc(i.serializer,s)}}if(r instanceof tt){const s=new tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nc(i.serializer,s)}}if(r instanceof rg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fs)return{bytesValue:wx(i.serializer,r._byteString)};if(r instanceof hn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Wp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ig)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.qu("VectorValues must only contain numeric values.");return Bp(a.serializer,u)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${ng(r)}`)}(t,e)}function Jx(t,e){const n={};return GT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jr(t,(r,i)=>{const s=th(i,e.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Zx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tt||t instanceof rg||t instanceof Fs||t instanceof hn||t instanceof Zc||t instanceof ig)}function ag(t,e,n){if(!Zx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=ng(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function om(t,e,n){if((e=Ur(e))instanceof Jc)return e._internalPath;if(typeof e=="string")return lg(t,e);throw oc("Field path arguments must be of type string or ",t,!1,void 0,n)}const xL=new RegExp("[~\\*/\\[\\]]");function lg(t,e,n){if(e.search(xL)>=0)throw oc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jc(...e.split("."))._internalPath}catch{throw oc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function oc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new J($.INVALID_ARGUMENT,a+t+u)}function eS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(nS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SL extends tS{data(){return super.data()}}function nS(t,e){return typeof e=="string"?lg(t,e):e instanceof Jc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class CL{convertValue(e,n="none"){switch(qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Jr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>He(o.doubleValue));return new ig(s)}convertGeoPoint(e){return new rg(He(e.latitude),He(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Bc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ca(e));default:return null}}convertTimestamp(e){const n=Wr(e);return new tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Oe.fromString(e);Se(Ax(r));const i=new Pa(r.get(1),r.get(3)),s=new ne(r.popFirst(5));return i.isEqual(n)||tr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class IL extends tS{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(nS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class fu extends IL{data(e={}){return super.data(e)}}class kL{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new zl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new fu(this._firestore,this._userDataWriter,r.key,r,new zl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new fu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new zl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new fu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new zl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:RL(a.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function RL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}class bL extends CL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new hn(this.firestore,null,n)}}function DL(t){t=Ri(t,Xc);const e=Ri(t.firestore,Qa),n=Kx(e),r=new bL(e);return AL(t._query),dL(n,t._query).then(i=>new kL(e,r,t,i))}function w1(t,e,n,...r){t=Ri(t,hn);const i=Ri(t.firestore,Qa),s=Xx(i);let o;return o=typeof(e=Ur(e))=="string"||e instanceof Jc?TL(s,"updateDoc",t._key,e,n,r):EL(s,"updateDoc",t._key,e),ug(i,[o.toMutation(t._key,Tn.exists(!0))])}function NL(t){return ug(Ri(t.firestore,Qa),[new $p(t._key,Tn.none())])}function VL(t,e){const n=Ri(t.firestore,Qa),r=du(t),i=PL(t.converter,e);return ug(n,[_L(Xx(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Tn.exists(!1))]).then(()=>r)}function ug(t,e){return function(r,i){const s=new Lr;return r.asyncQueue.enqueueAndForget(async()=>JM(await cL(r),i,s)),s.promise}(Kx(t),e)}function ML(t){return new og("increment",t)}(function(e,n=!0){(function(i){zs=i})(uN),Xu(new xa("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Qa(new TN(r.getProvider("auth-internal")),new CN(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new J($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pa(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),_s(Vv,"4.7.5",e),_s(Vv,"4.7.5","esm2017")})();var LL="firebase",OL="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_s(LL,OL,"app");const FL={apiKey:"AIzaSyD7x8_38o4UZNP6PFDScarlyc_BICnYZVw",authDomain:"together-time-evening.firebaseapp.com",projectId:"together-time-evening",storageBucket:"together-time-evening.firebasestorage.app",messagingSenderId:"648074298402",appId:"1:648074298402:web:ff53bb50cad716f0fcf67b"},jL=LT(FL),To=pL(jL),xo="activities",Oo={async getActivities(){return(await DL(y1(To,xo))).docs.map(e=>({id:e.id,...e.data()}))},async addActivity(t){return{id:(await VL(y1(To,xo),{...t,createdAt:new Date().toISOString()})).id,...t}},async updateActivity(t,e){const n=du(To,xo,t);await w1(n,{...e,updatedAt:new Date().toISOString()})},async deleteActivity(t){const e=du(To,xo,t);await NL(e)},async updateLastUsed(t){const e=du(To,xo,t);await w1(e,{lastUsedAt:new Date().toISOString(),usageCount:ML(1)})}},rS=T.createContext(void 0),BL=({children:t})=>{const[e,n]=T.useState([]);T.useEffect(()=>{(async()=>{const u=await Oo.getActivities();n(u)})()},[]);const r=async a=>{const u=await Oo.addActivity(a);n(c=>[...c,u])},i=async a=>{await Oo.deleteActivity(a),n(u=>u.filter(c=>c.id!==a))},s=async(a,u)=>{await Oo.updateActivity(a,u),n(c=>c.map(h=>h.id===a?{...u,id:a}:h))},o=()=>{n([])};return C.jsx(rS.Provider,{value:{activities:e,addActivity:r,removeActivity:i,updateActivity:s,resetActivities:o},children:t})},Gs=()=>{const t=T.useContext(rS);if(t===void 0)throw new Error("useActivities must be used within an ActivityProvider");return t},iS=T.createContext(void 0),$L=({children:t})=>{const[e,n]=T.useState("home");return C.jsx(iS.Provider,{value:{activeTab:e,setActiveTab:n},children:t})},UL=()=>{const t=T.useContext(iS);if(t===void 0)throw new Error("useNavigation must be used within a NavigationProvider");return t},nh=({children:t})=>C.jsx(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:t}),sS=6048e5,zL=864e5,oS=6e4,aS=36e5,_1=Symbol.for("constructDateFrom");function rr(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&_1 in t?t[_1](e):t instanceof Date?new t.constructor(e):new Date(e)}function en(t,e){return rr(e||t,t)}let WL={};function rh(){return WL}function Da(t,e){var a,u,c,h;const n=rh(),r=(e==null?void 0:e.weekStartsOn)??((u=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((h=(c=n.locale)==null?void 0:c.options)==null?void 0:h.weekStartsOn)??0,i=en(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function ac(t,e){return Da(t,{...e,weekStartsOn:1})}function lS(t,e){const n=en(t,e==null?void 0:e.in),r=n.getFullYear(),i=rr(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=ac(i),o=rr(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=ac(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function E1(t){const e=en(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function HL(t,...e){const n=rr.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function T1(t,e){const n=en(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function qL(t,e,n){const[r,i]=HL(n==null?void 0:n.in,t,e),s=T1(r),o=T1(i),a=+s-E1(s),u=+o-E1(o);return Math.round((a-u)/zL)}function GL(t,e){const n=lS(t,e),r=rr(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),ac(r)}function KL(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function QL(t){return!(!KL(t)&&typeof t!="number"||isNaN(+en(t)))}function YL(t,e){const n=en(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const XL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},JL=(t,e,n)=>{let r;const i=XL[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function wd(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const ZL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},e4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},t4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},n4={date:wd({formats:ZL,defaultWidth:"full"}),time:wd({formats:e4,defaultWidth:"full"}),dateTime:wd({formats:t4,defaultWidth:"full"})},r4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},i4=(t,e,n,r)=>r4[t];function So(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const s4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},o4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},a4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},l4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},u4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},c4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},h4=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},d4={ordinalNumber:h4,era:So({values:s4,defaultWidth:"wide"}),quarter:So({values:o4,defaultWidth:"wide",argumentCallback:t=>t-1}),month:So({values:a4,defaultWidth:"wide"}),day:So({values:l4,defaultWidth:"wide"}),dayPeriod:So({values:u4,defaultWidth:"wide",formattingValues:c4,defaultFormattingWidth:"wide"})};function Ao(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(a)?m4(a,f=>f.test(o)):f4(a,f=>f.test(o));let c;c=t.valueCallback?t.valueCallback(u):u,c=n.valueCallback?n.valueCallback(c):c;const h=e.slice(o.length);return{value:c,rest:h}}}function f4(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function m4(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function p4(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const g4=/^(\d+)(th|st|nd|rd)?/i,y4=/\d+/i,v4={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},w4={any:[/^b/i,/^(a|c)/i]},_4={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},E4={any:[/1/i,/2/i,/3/i,/4/i]},T4={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},x4={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},S4={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},A4={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},C4={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},P4={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},I4={ordinalNumber:p4({matchPattern:g4,parsePattern:y4,valueCallback:t=>parseInt(t,10)}),era:Ao({matchPatterns:v4,defaultMatchWidth:"wide",parsePatterns:w4,defaultParseWidth:"any"}),quarter:Ao({matchPatterns:_4,defaultMatchWidth:"wide",parsePatterns:E4,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ao({matchPatterns:T4,defaultMatchWidth:"wide",parsePatterns:x4,defaultParseWidth:"any"}),day:Ao({matchPatterns:S4,defaultMatchWidth:"wide",parsePatterns:A4,defaultParseWidth:"any"}),dayPeriod:Ao({matchPatterns:C4,defaultMatchWidth:"any",parsePatterns:P4,defaultParseWidth:"any"})},k4={code:"en-US",formatDistance:JL,formatLong:n4,formatRelative:i4,localize:d4,match:I4,options:{weekStartsOn:0,firstWeekContainsDate:1}};function R4(t,e){const n=en(t,e==null?void 0:e.in);return qL(n,YL(n))+1}function b4(t,e){const n=en(t,e==null?void 0:e.in),r=+ac(n)-+GL(n);return Math.round(r/sS)+1}function uS(t,e){var h,f,m,g;const n=en(t,e==null?void 0:e.in),r=n.getFullYear(),i=rh(),s=(e==null?void 0:e.firstWeekContainsDate)??((f=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(m=i.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=rr((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=Da(o,e),u=rr((e==null?void 0:e.in)||t,0);u.setFullYear(r,0,s),u.setHours(0,0,0,0);const c=Da(u,e);return+n>=+a?r+1:+n>=+c?r:r-1}function D4(t,e){var a,u,c,h;const n=rh(),r=(e==null?void 0:e.firstWeekContainsDate)??((u=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(c=n.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)??1,i=uS(t,e),s=rr((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Da(s,e)}function N4(t,e){const n=en(t,e==null?void 0:e.in),r=+Da(n,e)-+D4(n,e);return Math.round(r/sS)+1}function Pe(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ur={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Pe(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Pe(n+1,2)},d(t,e){return Pe(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Pe(t.getHours()%12||12,e.length)},H(t,e){return Pe(t.getHours(),e.length)},m(t,e){return Pe(t.getMinutes(),e.length)},s(t,e){return Pe(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Pe(i,e.length)}},qi={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},x1={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ur.y(t,e)},Y:function(t,e,n,r){const i=uS(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Pe(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Pe(s,e.length)},R:function(t,e){const n=lS(t);return Pe(n,e.length)},u:function(t,e){const n=t.getFullYear();return Pe(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Pe(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Pe(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ur.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Pe(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=N4(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Pe(i,e.length)},I:function(t,e,n){const r=b4(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Pe(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ur.d(t,e)},D:function(t,e,n){const r=R4(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Pe(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Pe(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Pe(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Pe(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=qi.noon:r===0?i=qi.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=qi.evening:r>=12?i=qi.afternoon:r>=4?i=qi.morning:i=qi.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ur.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ur.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Pe(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Pe(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ur.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ur.s(t,e)},S:function(t,e){return ur.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return A1(r);case"XXXX":case"XX":return di(r);case"XXXXX":case"XXX":default:return di(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return A1(r);case"xxxx":case"xx":return di(r);case"xxxxx":case"xxx":default:return di(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+S1(r,":");case"OOOO":default:return"GMT"+di(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+S1(r,":");case"zzzz":default:return"GMT"+di(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Pe(r,e.length)},T:function(t,e,n){return Pe(+t,e.length)}};function S1(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+Pe(s,2)}function A1(t,e){return t%60===0?(t>0?"-":"+")+Pe(Math.abs(t)/60,2):di(t,e)}function di(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Pe(Math.trunc(r/60),2),s=Pe(r%60,2);return n+i+e+s}const C1=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},cS=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},V4=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return C1(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",C1(r,e)).replace("{{time}}",cS(i,e))},M4={p:cS,P:V4},L4=/^D+$/,O4=/^Y+$/,F4=["D","DD","YY","YYYY"];function j4(t){return L4.test(t)}function B4(t){return O4.test(t)}function $4(t,e,n){const r=U4(t,e,n);if(console.warn(r),F4.includes(t))throw new RangeError(r)}function U4(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const z4=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,W4=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,H4=/^'([^]*?)'?$/,q4=/''/g,G4=/[a-zA-Z]/;function K4(t,e,n){var h,f,m,g;const r=rh(),i=r.locale??k4,s=r.firstWeekContainsDate??((f=(h=r.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,o=r.weekStartsOn??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??0,a=en(t,n==null?void 0:n.in);if(!QL(a))throw new RangeError("Invalid time value");let u=e.match(W4).map(v=>{const E=v[0];if(E==="p"||E==="P"){const k=M4[E];return k(v,i.formatLong)}return v}).join("").match(z4).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const E=v[0];if(E==="'")return{isToken:!1,value:Q4(v)};if(x1[E])return{isToken:!0,value:v};if(E.match(G4))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:v}});i.localize.preprocessor&&(u=i.localize.preprocessor(a,u));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return u.map(v=>{if(!v.isToken)return v.value;const E=v.value;(B4(E)||j4(E))&&$4(E,e,String(t));const k=x1[E[0]];return k(a,E,i.localize,c)}).join("")}function Q4(t){const e=t.match(H4);return e?e[1].replace(q4,"'"):t}function _d(t,e){const n=()=>rr(e==null?void 0:e.in,NaN),i=Z4(t);let s;if(i.date){const c=eO(i.date,2);s=tO(c.restDateString,c.year)}if(!s||isNaN(+s))return n();const o=+s;let a=0,u;if(i.time&&(a=nO(i.time),isNaN(a)))return n();if(i.timezone){if(u=rO(i.timezone),isNaN(u))return n()}else{const c=new Date(o+a),h=en(0,e==null?void 0:e.in);return h.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),h.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),h}return en(o+a+u,e==null?void 0:e.in)}const Wl={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Y4=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,X4=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,J4=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Z4(t){const e={},n=t.split(Wl.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],Wl.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Wl.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=Wl.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function eO(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function tO(t,e){if(e===null)return new Date(NaN);const n=t.match(Y4);if(!n)return new Date(NaN);const r=!!n[4],i=Co(n[1]),s=Co(n[2])-1,o=Co(n[3]),a=Co(n[4]),u=Co(n[5])-1;if(r)return lO(e,a,u)?iO(e,a,u):new Date(NaN);{const c=new Date(0);return!oO(e,s,o)||!aO(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function Co(t){return t?parseInt(t):1}function nO(t){const e=t.match(X4);if(!e)return NaN;const n=Ed(e[1]),r=Ed(e[2]),i=Ed(e[3]);return uO(n,r,i)?n*aS+r*oS+i*1e3:NaN}function Ed(t){return t&&parseFloat(t.replace(",","."))||0}function rO(t){if(t==="Z")return 0;const e=t.match(J4);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return cO(r,i)?n*(r*aS+i*oS):NaN}function iO(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const sO=[31,null,31,30,31,30,31,31,30,31,30,31];function hS(t){return t%400===0||t%4===0&&t%100!==0}function oO(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(sO[e]||(hS(t)?29:28))}function aO(t,e){return e>=1&&e<=(hS(t)?366:365)}function lO(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function uO(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function cO(t,e){return e>=0&&e<=59}const am={active:"bg-green-50 text-green-700 hover:bg-green-100",competitive:"bg-red-50 text-red-700 hover:bg-red-100",cozy:"bg-amber-50 text-amber-700 hover:bg-amber-100",creative:"bg-purple-50 text-purple-700 hover:bg-purple-100",energetic:"bg-orange-50 text-orange-700 hover:bg-orange-100",focused:"bg-gray-50 text-gray-700 hover:bg-gray-100",fun:"bg-yellow-50 text-yellow-700 hover:bg-yellow-100",intellectual:"bg-indigo-50 text-indigo-700 hover:bg-indigo-100",nostalgic:"bg-pink-50 text-pink-700 hover:bg-pink-100",peaceful:"bg-teal-50 text-teal-700 hover:bg-teal-100",productive:"bg-lime-50 text-lime-700 hover:bg-lime-100",relaxing:"bg-blue-50 text-blue-700 hover:bg-blue-100",romantic:"bg-rose-50 text-rose-700 hover:bg-rose-100",silly:"bg-fuchsia-50 text-fuchsia-700 hover:bg-fuchsia-100",teamwork:"bg-sky-50 text-sky-700 hover:bg-sky-100"},lm={active:"bg-red-50 text-red-700 hover:bg-red-100",budget:"bg-gray-50 text-gray-700 hover:bg-gray-100",cooking:"bg-yellow-50 text-yellow-700 hover:bg-yellow-100",creative:"bg-purple-50 text-purple-700 hover:bg-purple-100",food:"bg-orange-50 text-orange-700 hover:bg-orange-100",game:"bg-green-50 text-green-700 hover:bg-green-100",movie:"bg-indigo-50 text-indigo-700 hover:bg-indigo-100",music:"bg-cyan-50 text-cyan-700 hover:bg-cyan-100",outdoor:"bg-lime-50 text-lime-700 hover:bg-lime-100",planning:"bg-amber-50 text-amber-700 hover:bg-amber-100",reading:"bg-blue-50 text-blue-700 hover:bg-blue-100",relaxing:"bg-teal-50 text-teal-700 hover:bg-teal-100",seasonal:"bg-sky-50 text-sky-700 hover:bg-sky-100"},hO=({activities:t})=>{const e=T.useMemo(()=>t.filter(r=>r.lastUsedAt).sort((r,i)=>{const s=_d(r.lastUsedAt||"");return _d(i.lastUsedAt||"").getTime()-s.getTime()}).slice(0,5),[t]);if(e.length===0)return C.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No recent activities found"});const n=r=>{const i=_d(r);return K4(i,"EEEE, MMMM d 'at' h:mm a")};return C.jsx("div",{className:"space-y-4",children:e.map(r=>C.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-primary-100 dark:border-primary-800",children:C.jsxs("div",{className:"flex items-start gap-4",children:[C.jsx("span",{className:"text-3xl",children:r.emoji}),C.jsxs("div",{className:"flex-1",children:[C.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:r.name}),C.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[C.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${lm[r.category]}`,children:r.category}),C.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:n(r.lastUsedAt)})]})]})]})},`${r.id}-${r.lastUsedAt}`))})},P1=()=>{const{activities:t}=Gs(),{playSelect:e,playHover:n}=Wa(),{setActiveTab:r}=UL(),i=()=>{e(),r("wheel")};return C.jsx(nh,{children:C.jsxs("div",{className:"space-y-8",children:[C.jsxs("div",{className:"text-center space-y-4",children:[C.jsx("h1",{className:"text-4xl font-display text-primary-800 dark:text-primary-200",children:"Welcome Back! "}),C.jsx("p",{className:"text-primary-600 dark:text-primary-400",children:"Ready for your next adventure together?"})]}),C.jsxs(me.button,{onClick:i,onHoverStart:()=>n(),className:"w-full p-6 bg-white dark:bg-gray-800 rounded-xl border border-primary-100 dark:border-primary-800 text-left space-y-4 hover:shadow-lg transition-shadow",whileHover:{scale:1.02},whileTap:{scale:.98},children:[C.jsx(AT,{className:"w-8 h-8 text-primary-500"}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-lg font-medium text-primary-800 dark:text-primary-200",children:"Spin the Wheel"}),C.jsx("p",{className:"text-primary-600 dark:text-primary-400",children:"Let the wheel decide your next activity!"})]})]}),C.jsxs("section",{children:[C.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Recent Activities"}),C.jsx(hO,{activities:t})]})]})})};var dO=Object.defineProperty,fO=(t,e,n)=>e in t?dO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Td=(t,e,n)=>(fO(t,typeof e!="symbol"?e+"":e,n),n);let mO=class{constructor(){Td(this,"current",this.detect()),Td(this,"handoffState","pending"),Td(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Kn=new mO,bt=(t,e)=>{Kn.isServer?T.useEffect(t,e):T.useLayoutEffect(t,e)};function Qn(t){let e=T.useRef(t);return bt(()=>{e.current=t},[t]),e}function ih(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function Oi(){let t=[],e={addEventListener(n,r,i,s){return n.addEventListener(r,i,s),e.add(()=>n.removeEventListener(r,i,s))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return ih(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,i){let s=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:s})})},group(n){let r=Oi();return n(r),this.add(()=>r.dispose())},add(n){return t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let i of t.splice(r,1))i()}},dispose(){for(let n of t.splice(0))n()}};return e}function sh(){let[t]=T.useState(Oi);return T.useEffect(()=>()=>t.dispose(),[t]),t}let xe=function(t){let e=Qn(t);return X.useCallback((...n)=>e.current(...n),[e])};function pO(){let t=typeof document>"u";return"useSyncExternalStore"in na?(e=>e.useSyncExternalStore)(na)(()=>()=>{},()=>!1,()=>!t):!1}function Ks(){let t=pO(),[e,n]=T.useState(Kn.isHandoffComplete);return e&&Kn.isHandoffComplete===!1&&n(!1),T.useEffect(()=>{e!==!0&&n(!0)},[e]),T.useEffect(()=>Kn.handoff(),[]),t?!1:e}var I1;let ei=(I1=X.useId)!=null?I1:function(){let t=Ks(),[e,n]=X.useState(t?()=>Kn.nextId():null);return bt(()=>{e===null&&n(Kn.nextId())},[e]),e!=null?""+e:void 0};function St(t,e,...n){if(t in e){let i=e[t];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,St),r}function dS(t){return Kn.isServer?null:t instanceof Node?t.ownerDocument:t!=null&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}let um=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var fi=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(fi||{}),fS=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(fS||{}),gO=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(gO||{});function yO(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(um)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var mS=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(mS||{});function vO(t,e=0){var n;return t===((n=dS(t))==null?void 0:n.body)?!1:St(e,{0(){return t.matches(um)},1(){let r=t;for(;r!==null;){if(r.matches(um))return!0;r=r.parentElement}return!1}})}var wO=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(wO||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function xi(t){t==null||t.focus({preventScroll:!0})}let _O=["textarea","input"].join(",");function EO(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,_O))!=null?n:!1}function TO(t,e=n=>n){return t.slice().sort((n,r)=>{let i=e(n),s=e(r);if(i===null||s===null)return 0;let o=i.compareDocumentPosition(s);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function mu(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let s=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,o=Array.isArray(t)?n?TO(t):t:yO(t);i.length>0&&o.length>1&&(o=o.filter(g=>!i.includes(g))),r=r??s.activeElement;let a=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,o.indexOf(r))-1;if(e&4)return Math.max(0,o.indexOf(r))+1;if(e&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=e&32?{preventScroll:!0}:{},h=0,f=o.length,m;do{if(h>=f||h+f<=0)return 0;let g=u+h;if(e&16)g=(g+f)%f;else{if(g<0)return 3;if(g>=f)return 1}m=o[g],m==null||m.focus(c),h+=a}while(m!==s.activeElement);return e&6&&EO(m)&&m.select(),2}function Hl(t,e,n){let r=Qn(e);T.useEffect(()=>{function i(s){r.current(s)}return document.addEventListener(t,i,n),()=>document.removeEventListener(t,i,n)},[t,n])}function pS(t,e,n){let r=Qn(e);T.useEffect(()=>{function i(s){r.current(s)}return window.addEventListener(t,i,n),()=>window.removeEventListener(t,i,n)},[t,n])}function xO(t,e,n=!0){let r=T.useRef(!1);T.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function i(o,a){if(!r.current||o.defaultPrevented)return;let u=a(o);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let c=function h(f){return typeof f=="function"?h(f()):Array.isArray(f)||f instanceof Set?f:[f]}(t);for(let h of c){if(h===null)continue;let f=h instanceof HTMLElement?h:h.current;if(f!=null&&f.contains(u)||o.composed&&o.composedPath().includes(f))return}return!vO(u,mS.Loose)&&u.tabIndex!==-1&&o.preventDefault(),e(o,u)}let s=T.useRef(null);Hl("pointerdown",o=>{var a,u;r.current&&(s.current=((u=(a=o.composedPath)==null?void 0:a.call(o))==null?void 0:u[0])||o.target)},!0),Hl("mousedown",o=>{var a,u;r.current&&(s.current=((u=(a=o.composedPath)==null?void 0:a.call(o))==null?void 0:u[0])||o.target)},!0),Hl("click",o=>{s.current&&(i(o,()=>s.current),s.current=null)},!0),Hl("touchend",o=>i(o,()=>o.target instanceof HTMLElement?o.target:null),!0),pS("blur",o=>i(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function k1(t){var e;if(t.type)return t.type;let n=(e=t.as)!=null?e:"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function SO(t,e){let[n,r]=T.useState(()=>k1(t));return bt(()=>{r(k1(t))},[t.type,t.as]),bt(()=>{n||e.current&&e.current instanceof HTMLButtonElement&&!e.current.hasAttribute("type")&&r("button")},[n,e]),n}let gS=Symbol();function AO(t,e=!0){return Object.assign(t,{[gS]:e})}function rn(...t){let e=T.useRef(t);T.useEffect(()=>{e.current=t},[t]);let n=xe(r=>{for(let i of e.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return t.every(r=>r==null||(r==null?void 0:r[gS]))?void 0:n}function lc(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}var uc=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(uc||{}),xr=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(xr||{});function Vt({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:i,visible:s=!0,name:o}){let a=yS(e,t);if(s)return ql(a,n,r,o);let u=i??0;if(u&2){let{static:c=!1,...h}=a;if(c)return ql(h,n,r,o)}if(u&1){let{unmount:c=!0,...h}=a;return St(c?0:1,{0(){return null},1(){return ql({...h,hidden:!0,style:{display:"none"}},n,r,o)}})}return ql(a,n,r,o)}function ql(t,e={},n,r){let{as:i=n,children:s,refName:o="ref",...a}=xd(t,["unmount","static"]),u=t.ref!==void 0?{[o]:t.ref}:{},c=typeof s=="function"?s(e):s;"className"in a&&a.className&&typeof a.className=="function"&&(a.className=a.className(e));let h={};if(e){let f=!1,m=[];for(let[g,v]of Object.entries(e))typeof v=="boolean"&&(f=!0),v===!0&&m.push(g);f&&(h["data-headlessui-state"]=m.join(" "))}if(i===T.Fragment&&Object.keys(cm(a)).length>0){if(!T.isValidElement(c)||Array.isArray(c)&&c.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(a).map(v=>`  - ${v}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(v=>`  - ${v}`).join(`
`)].join(`
`));let f=c.props,m=typeof(f==null?void 0:f.className)=="function"?(...v)=>lc(f==null?void 0:f.className(...v),a.className):lc(f==null?void 0:f.className,a.className),g=m?{className:m}:{};return T.cloneElement(c,Object.assign({},yS(c.props,cm(xd(a,["ref"]))),h,u,CO(c.ref,u.ref),g))}return T.createElement(i,Object.assign({},xd(a,["ref"]),i!==T.Fragment&&u,i!==T.Fragment&&h),c)}function CO(...t){return{ref:t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}}function yS(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(e,{[r](i,...s){let o=n[r];for(let a of o){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;a(i,...s)}}});return e}function Mt(t){var e;return Object.assign(T.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function cm(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function xd(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function vS(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let r=(e==null?void 0:e.getAttribute("disabled"))==="";return r&&PO(n)?!1:r}function PO(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}function IO(t){var e,n;let r=(e=t==null?void 0:t.form)!=null?e:t.closest("form");if(r){for(let i of r.elements)if(i!==t&&(i.tagName==="INPUT"&&i.type==="submit"||i.tagName==="BUTTON"&&i.type==="submit"||i.nodeName==="INPUT"&&i.type==="image")){i.click();return}(n=r.requestSubmit)==null||n.call(r)}}let kO="div";var Na=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(Na||{});function RO(t,e){let{features:n=1,...r}=t,i={ref:e,"aria-hidden":(n&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return Vt({ourProps:i,theirProps:r,slot:{},defaultTag:kO,name:"Hidden"})}let cc=Mt(RO),cg=T.createContext(null);cg.displayName="OpenClosedContext";var Kt=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Kt||{});function hg(){return T.useContext(cg)}function bO({value:t,children:e}){return X.createElement(cg.Provider,{value:t},e)}var hc=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(hc||{});function DO(t,e,n){let[r,i]=T.useState(n),s=t!==void 0,o=T.useRef(s),a=T.useRef(!1),u=T.useRef(!1);return s&&!o.current&&!a.current?(a.current=!0,o.current=s,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!s&&o.current&&!u.current&&(u.current=!0,o.current=s,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[s?t:r,xe(c=>(s||i(c),e==null?void 0:e(c)))]}function dg(t,e){let n=T.useRef([]),r=xe(t);T.useEffect(()=>{let i=[...n.current];for(let[s,o]of e.entries())if(n.current[s]!==o){let a=r(e,i);return n.current=e,a}},[r,...e])}function NO(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Ya(...t){return T.useMemo(()=>dS(...t),[...t])}var Fo=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Fo||{});function VO(){let t=T.useRef(0);return pS("keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function Xa(){let t=T.useRef(!1);return bt(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function wS(t,e,n,r){let i=Qn(n);T.useEffect(()=>{t=t??window;function s(o){i.current(o)}return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s,r)},[t,e,r])}function MO(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}function _S(t){let e=xe(t),n=T.useRef(!1);T.useEffect(()=>(n.current=!1,()=>{n.current=!0,ih(()=>{n.current&&e()})}),[e])}function ES(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let n of t.current)n.current instanceof HTMLElement&&e.add(n.current);return e}let LO="div";var TS=(t=>(t[t.None=1]="None",t[t.InitialFocus=2]="InitialFocus",t[t.TabLock=4]="TabLock",t[t.FocusLock=8]="FocusLock",t[t.RestoreFocus=16]="RestoreFocus",t[t.All=30]="All",t))(TS||{});function OO(t,e){let n=T.useRef(null),r=rn(n,e),{initialFocus:i,containers:s,features:o=30,...a}=t;Ks()||(o=1);let u=Ya(n);BO({ownerDocument:u},!!(o&16));let c=$O({ownerDocument:u,container:n,initialFocus:i},!!(o&2));UO({ownerDocument:u,container:n,containers:s,previousActiveElement:c},!!(o&8));let h=VO(),f=xe(E=>{let k=n.current;k&&(A=>A())(()=>{St(h.current,{[Fo.Forwards]:()=>{mu(k,fi.First,{skipElements:[E.relatedTarget]})},[Fo.Backwards]:()=>{mu(k,fi.Last,{skipElements:[E.relatedTarget]})}})})}),m=sh(),g=T.useRef(!1),v={ref:r,onKeyDown(E){E.key=="Tab"&&(g.current=!0,m.requestAnimationFrame(()=>{g.current=!1}))},onBlur(E){let k=ES(s);n.current instanceof HTMLElement&&k.add(n.current);let A=E.relatedTarget;A instanceof HTMLElement&&A.dataset.headlessuiFocusGuard!=="true"&&(xS(k,A)||(g.current?mu(n.current,St(h.current,{[Fo.Forwards]:()=>fi.Next,[Fo.Backwards]:()=>fi.Previous})|fi.WrapAround,{relativeTo:E.target}):E.target instanceof HTMLElement&&xi(E.target)))}};return X.createElement(X.Fragment,null,!!(o&4)&&X.createElement(cc,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:Na.Focusable}),Vt({ourProps:v,theirProps:a,defaultTag:LO,name:"FocusTrap"}),!!(o&4)&&X.createElement(cc,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:Na.Focusable}))}let FO=Mt(OO),Po=Object.assign(FO,{features:TS}),wr=[];MO(()=>{function t(e){e.target instanceof HTMLElement&&e.target!==document.body&&wr[0]!==e.target&&(wr.unshift(e.target),wr=wr.filter(n=>n!=null&&n.isConnected),wr.splice(10))}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function jO(t=!0){let e=T.useRef(wr.slice());return dg(([n],[r])=>{r===!0&&n===!1&&ih(()=>{e.current.splice(0)}),r===!1&&n===!0&&(e.current=wr.slice())},[t,wr,e]),xe(()=>{var n;return(n=e.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function BO({ownerDocument:t},e){let n=jO(e);dg(()=>{e||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&xi(n())},[e]),_S(()=>{e&&xi(n())})}function $O({ownerDocument:t,container:e,initialFocus:n},r){let i=T.useRef(null),s=Xa();return dg(()=>{if(!r)return;let o=e.current;o&&ih(()=>{if(!s.current)return;let a=t==null?void 0:t.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===a){i.current=a;return}}else if(o.contains(a)){i.current=a;return}n!=null&&n.current?xi(n.current):mu(o,fi.First)===fS.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),i.current=t==null?void 0:t.activeElement})},[r]),i}function UO({ownerDocument:t,container:e,containers:n,previousActiveElement:r},i){let s=Xa();wS(t==null?void 0:t.defaultView,"focus",o=>{if(!i||!s.current)return;let a=ES(n);e.current instanceof HTMLElement&&a.add(e.current);let u=r.current;if(!u)return;let c=o.target;c&&c instanceof HTMLElement?xS(a,c)?(r.current=c,xi(c)):(o.preventDefault(),o.stopPropagation(),xi(u)):xi(r.current)},!0)}function xS(t,e){for(let n of t)if(n.contains(e))return!0;return!1}let SS=T.createContext(!1);function zO(){return T.useContext(SS)}function hm(t){return X.createElement(SS.Provider,{value:t.force},t.children)}function WO(t){let e=zO(),n=T.useContext(AS),r=Ya(t),[i,s]=T.useState(()=>{if(!e&&n!==null||Kn.isServer)return null;let o=r==null?void 0:r.getElementById("headlessui-portal-root");if(o)return o;if(r===null)return null;let a=r.createElement("div");return a.setAttribute("id","headlessui-portal-root"),r.body.appendChild(a)});return T.useEffect(()=>{i!==null&&(r!=null&&r.body.contains(i)||r==null||r.body.appendChild(i))},[i,r]),T.useEffect(()=>{e||n!==null&&s(n.current)},[n,s,e]),i}let HO=T.Fragment;function qO(t,e){let n=t,r=T.useRef(null),i=rn(AO(h=>{r.current=h}),e),s=Ya(r),o=WO(r),[a]=T.useState(()=>{var h;return Kn.isServer?null:(h=s==null?void 0:s.createElement("div"))!=null?h:null}),u=T.useContext(dm),c=Ks();return bt(()=>{!o||!a||o.contains(a)||(a.setAttribute("data-headlessui-portal",""),o.appendChild(a))},[o,a]),bt(()=>{if(a&&u)return u.register(a)},[u,a]),_S(()=>{var h;!o||!a||(a instanceof Node&&o.contains(a)&&o.removeChild(a),o.childNodes.length<=0&&((h=o.parentElement)==null||h.removeChild(o)))}),c?!o||!a?null:K_.createPortal(Vt({ourProps:{ref:i},theirProps:n,defaultTag:HO,name:"Portal"}),a):null}let GO=T.Fragment,AS=T.createContext(null);function KO(t,e){let{target:n,...r}=t,i={ref:rn(e)};return X.createElement(AS.Provider,{value:n},Vt({ourProps:i,theirProps:r,defaultTag:GO,name:"Popover.Group"}))}let dm=T.createContext(null);function QO(){let t=T.useContext(dm),e=T.useRef([]),n=xe(s=>(e.current.push(s),t&&t.register(s),()=>r(s))),r=xe(s=>{let o=e.current.indexOf(s);o!==-1&&e.current.splice(o,1),t&&t.unregister(s)}),i=T.useMemo(()=>({register:n,unregister:r,portals:e}),[n,r,e]);return[e,T.useMemo(()=>function({children:s}){return X.createElement(dm.Provider,{value:i},s)},[i])]}let YO=Mt(qO),XO=Mt(KO),fm=Object.assign(YO,{Group:XO}),CS=T.createContext(null);function PS(){let t=T.useContext(CS);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,PS),e}return t}function IS(){let[t,e]=T.useState([]);return[t.length>0?t.join(" "):void 0,T.useMemo(()=>function(n){let r=xe(s=>(e(o=>[...o,s]),()=>e(o=>{let a=o.slice(),u=a.indexOf(s);return u!==-1&&a.splice(u,1),a}))),i=T.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return X.createElement(CS.Provider,{value:i},n.children)},[e])]}let JO="p";function ZO(t,e){let n=ei(),{id:r=`headlessui-description-${n}`,...i}=t,s=PS(),o=rn(e);bt(()=>s.register(r),[r,s.register]);let a={ref:o,...s.props,id:r};return Vt({ourProps:a,theirProps:i,slot:s.slot||{},defaultTag:JO,name:s.name||"Description"})}let e5=Mt(ZO),kS=Object.assign(e5,{}),fg=T.createContext(()=>{});fg.displayName="StackContext";var mm=(t=>(t[t.Add=0]="Add",t[t.Remove=1]="Remove",t))(mm||{});function t5(){return T.useContext(fg)}function n5({children:t,onUpdate:e,type:n,element:r,enabled:i}){let s=t5(),o=xe((...a)=>{e==null||e(...a),s(...a)});return bt(()=>{let a=i===void 0||i===!0;return a&&o(0,n,r),()=>{a&&o(1,n,r)}},[o,n,r,i]),X.createElement(fg.Provider,{value:o},t)}function r5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const i5=typeof Object.is=="function"?Object.is:r5,{useState:s5,useEffect:o5,useLayoutEffect:a5,useDebugValue:l5}=na;function u5(t,e,n){const r=e(),[{inst:i},s]=s5({inst:{value:r,getSnapshot:e}});return a5(()=>{i.value=r,i.getSnapshot=e,Sd(i)&&s({inst:i})},[t,r,e]),o5(()=>(Sd(i)&&s({inst:i}),t(()=>{Sd(i)&&s({inst:i})})),[t]),l5(r),r}function Sd(t){const e=t.getSnapshot,n=t.value;try{const r=e();return!i5(n,r)}catch{return!0}}function c5(t,e,n){return e()}const h5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",d5=!h5,f5=d5?c5:u5,m5="useSyncExternalStore"in na?(t=>t.useSyncExternalStore)(na):f5;function p5(t){return m5(t.subscribe,t.getSnapshot,t.getSnapshot)}function g5(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...s){let o=e[i].call(n,...s);o&&(n=o,r.forEach(a=>a()))}}}function y5(){let t;return{before({doc:e}){var n;let r=e.documentElement;t=((n=e.defaultView)!=null?n:window).innerWidth-r.clientWidth},after({doc:e,d:n}){let r=e.documentElement,i=r.clientWidth-r.offsetWidth,s=t-i;n.style(r,"paddingRight",`${s}px`)}}}function v5(){if(!NO())return{};let t;return{before(){t=window.pageYOffset},after({doc:e,d:n,meta:r}){function i(s){return r.containers.flatMap(o=>o()).some(o=>o.contains(s))}n.microTask(()=>{if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let o=Oi();o.style(e.documentElement,"scroll-behavior","auto"),n.add(()=>n.microTask(()=>o.dispose()))}n.style(e.body,"marginTop",`-${t}px`),window.scrollTo(0,0);let s=null;n.addEventListener(e,"click",o=>{if(o.target instanceof HTMLElement)try{let a=o.target.closest("a");if(!a)return;let{hash:u}=new URL(a.href),c=e.querySelector(u);c&&!i(c)&&(s=c)}catch{}},!0),n.addEventListener(e,"touchmove",o=>{o.target instanceof HTMLElement&&!i(o.target)&&o.preventDefault()},{passive:!1}),n.add(()=>{window.scrollTo(0,window.pageYOffset+t),s&&s.isConnected&&(s.scrollIntoView({block:"nearest"}),s=null)})})}}}function w5(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function _5(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let wi=g5(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:Oi(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:_5(n)},i=[v5(),y5(),w5()];i.forEach(({before:s})=>s==null?void 0:s(r)),i.forEach(({after:s})=>s==null?void 0:s(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});wi.subscribe(()=>{let t=wi.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&wi.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&wi.dispatch("TEARDOWN",n)}});function E5(t,e,n){let r=p5(wi),i=t?r.get(t):void 0,s=i?i.count>0:!1;return bt(()=>{if(!(!t||!e))return wi.dispatch("PUSH",t,n),()=>wi.dispatch("POP",t,n)},[e,t]),s}let Ad=new Map,Io=new Map;function R1(t,e=!0){bt(()=>{var n;if(!e)return;let r=typeof t=="function"?t():t.current;if(!r)return;function i(){var o;if(!r)return;let a=(o=Io.get(r))!=null?o:1;if(a===1?Io.delete(r):Io.set(r,a-1),a!==1)return;let u=Ad.get(r);u&&(u["aria-hidden"]===null?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",u["aria-hidden"]),r.inert=u.inert,Ad.delete(r))}let s=(n=Io.get(r))!=null?n:0;return Io.set(r,s+1),s!==0||(Ad.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0),i},[t,e])}function T5({defaultContainers:t=[],portals:e,mainTreeNodeRef:n}={}){var r;let i=T.useRef((r=n==null?void 0:n.current)!=null?r:null),s=Ya(i),o=xe(()=>{var a;let u=[];for(let c of t)c!==null&&(c instanceof HTMLElement?u.push(c):"current"in c&&c.current instanceof HTMLElement&&u.push(c.current));if(e!=null&&e.current)for(let c of e.current)u.push(c);for(let c of(a=s==null?void 0:s.querySelectorAll("html > *, body > *"))!=null?a:[])c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c.id!=="headlessui-portal-root"&&(c.contains(i.current)||u.some(h=>c.contains(h))||u.push(c));return u});return{resolveContainers:o,contains:xe(a=>o().some(u=>u.contains(a))),mainTreeNodeRef:i,MainTreeNode:T.useMemo(()=>function(){return n!=null?null:X.createElement(cc,{features:Na.Hidden,ref:i})},[i,n])}}var x5=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(x5||{}),S5=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(S5||{});let A5={0(t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},dc=T.createContext(null);dc.displayName="DialogContext";function Ja(t){let e=T.useContext(dc);if(e===null){let n=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Ja),n}return e}function C5(t,e,n=()=>[document.body]){E5(t,e,r=>{var i;return{containers:[...(i=r.containers)!=null?i:[],n]}})}function P5(t,e){return St(e.type,A5,t,e)}let I5="div",k5=uc.RenderStrategy|uc.Static;function R5(t,e){var n;let r=ei(),{id:i=`headlessui-dialog-${r}`,open:s,onClose:o,initialFocus:a,__demoMode:u=!1,...c}=t,[h,f]=T.useState(0),m=hg();s===void 0&&m!==null&&(s=(m&Kt.Open)===Kt.Open);let g=T.useRef(null),v=rn(g,e),E=Ya(g),k=t.hasOwnProperty("open")||m!==null,A=t.hasOwnProperty("onClose");if(!k&&!A)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!k)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!A)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof s!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${s}`);if(typeof o!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${o}`);let w=s?0:1,[_,V]=T.useReducer(P5,{titleId:null,descriptionId:null,panelRef:T.createRef()}),L=xe(()=>o(!1)),F=xe(se=>V({type:0,id:se})),S=Ks()?u?!1:w===0:!1,y=h>1,P=T.useContext(dc)!==null,[I,D]=QO(),{resolveContainers:M,mainTreeNodeRef:R,MainTreeNode:re}=T5({portals:I,defaultContainers:[(n=_.panelRef.current)!=null?n:g.current]}),ue=y?"parent":"leaf",Ae=m!==null?(m&Kt.Closing)===Kt.Closing:!1,Ce=P||Ae?!1:S,H=T.useCallback(()=>{var se,de;return(de=Array.from((se=E==null?void 0:E.querySelectorAll("body > *"))!=null?se:[]).find(ie=>ie.id==="headlessui-portal-root"?!1:ie.contains(R.current)&&ie instanceof HTMLElement))!=null?de:null},[R]);R1(H,Ce);let Y=y?!0:S,N=T.useCallback(()=>{var se,de;return(de=Array.from((se=E==null?void 0:E.querySelectorAll("[data-headlessui-portal]"))!=null?se:[]).find(ie=>ie.contains(R.current)&&ie instanceof HTMLElement))!=null?de:null},[R]);R1(N,Y),xO(M,L,!(!S||y));let U=!(y||w!==0);wS(E==null?void 0:E.defaultView,"keydown",se=>{U&&(se.defaultPrevented||se.key===hc.Escape&&(se.preventDefault(),se.stopPropagation(),L()))}),C5(E,!(Ae||w!==0||P),M),T.useEffect(()=>{if(w!==0||!g.current)return;let se=new ResizeObserver(de=>{for(let ie of de){let ve=ie.target.getBoundingClientRect();ve.x===0&&ve.y===0&&ve.width===0&&ve.height===0&&L()}});return se.observe(g.current),()=>se.disconnect()},[w,g,L]);let[Z,te]=IS(),ee=T.useMemo(()=>[{dialogState:w,close:L,setTitleId:F},_],[w,_,L,F]),Q=T.useMemo(()=>({open:w===0}),[w]),he={ref:v,id:i,role:"dialog","aria-modal":w===0?!0:void 0,"aria-labelledby":_.titleId,"aria-describedby":Z};return X.createElement(n5,{type:"Dialog",enabled:w===0,element:g,onUpdate:xe((se,de)=>{de==="Dialog"&&St(se,{[mm.Add]:()=>f(ie=>ie+1),[mm.Remove]:()=>f(ie=>ie-1)})})},X.createElement(hm,{force:!0},X.createElement(fm,null,X.createElement(dc.Provider,{value:ee},X.createElement(fm.Group,{target:g},X.createElement(hm,{force:!1},X.createElement(te,{slot:Q,name:"Dialog.Description"},X.createElement(Po,{initialFocus:a,containers:M,features:S?St(ue,{parent:Po.features.RestoreFocus,leaf:Po.features.All&~Po.features.FocusLock}):Po.features.None},X.createElement(D,null,Vt({ourProps:he,theirProps:c,slot:Q,defaultTag:I5,features:k5,visible:w===0,name:"Dialog"}))))))))),X.createElement(re,null))}let b5="div";function D5(t,e){let n=ei(),{id:r=`headlessui-dialog-overlay-${n}`,...i}=t,[{dialogState:s,close:o}]=Ja("Dialog.Overlay"),a=rn(e),u=xe(h=>{if(h.target===h.currentTarget){if(vS(h.currentTarget))return h.preventDefault();h.preventDefault(),h.stopPropagation(),o()}}),c=T.useMemo(()=>({open:s===0}),[s]);return Vt({ourProps:{ref:a,id:r,"aria-hidden":!0,onClick:u},theirProps:i,slot:c,defaultTag:b5,name:"Dialog.Overlay"})}let N5="div";function V5(t,e){let n=ei(),{id:r=`headlessui-dialog-backdrop-${n}`,...i}=t,[{dialogState:s},o]=Ja("Dialog.Backdrop"),a=rn(e);T.useEffect(()=>{if(o.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[o.panelRef]);let u=T.useMemo(()=>({open:s===0}),[s]);return X.createElement(hm,{force:!0},X.createElement(fm,null,Vt({ourProps:{ref:a,id:r,"aria-hidden":!0},theirProps:i,slot:u,defaultTag:N5,name:"Dialog.Backdrop"})))}let M5="div";function L5(t,e){let n=ei(),{id:r=`headlessui-dialog-panel-${n}`,...i}=t,[{dialogState:s},o]=Ja("Dialog.Panel"),a=rn(e,o.panelRef),u=T.useMemo(()=>({open:s===0}),[s]),c=xe(h=>{h.stopPropagation()});return Vt({ourProps:{ref:a,id:r,onClick:c},theirProps:i,slot:u,defaultTag:M5,name:"Dialog.Panel"})}let O5="h2";function F5(t,e){let n=ei(),{id:r=`headlessui-dialog-title-${n}`,...i}=t,[{dialogState:s,setTitleId:o}]=Ja("Dialog.Title"),a=rn(e);T.useEffect(()=>(o(r),()=>o(null)),[r,o]);let u=T.useMemo(()=>({open:s===0}),[s]);return Vt({ourProps:{ref:a,id:r},theirProps:i,slot:u,defaultTag:O5,name:"Dialog.Title"})}let j5=Mt(R5),B5=Mt(V5),$5=Mt(L5),U5=Mt(D5),z5=Mt(F5),Cd=Object.assign(j5,{Backdrop:B5,Panel:$5,Overlay:U5,Title:z5,Description:kS});function W5(t=0){let[e,n]=T.useState(t),r=Xa(),i=T.useCallback(u=>{r.current&&n(c=>c|u)},[e,r]),s=T.useCallback(u=>!!(e&u),[e]),o=T.useCallback(u=>{r.current&&n(c=>c&~u)},[n,r]),a=T.useCallback(u=>{r.current&&n(c=>c^u)},[n]);return{flags:e,addFlag:i,hasFlag:s,removeFlag:o,toggleFlag:a}}let RS=T.createContext(null);function bS(){let t=T.useContext(RS);if(t===null){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,bS),e}return t}function H5(){let[t,e]=T.useState([]);return[t.length>0?t.join(" "):void 0,T.useMemo(()=>function(n){let r=xe(s=>(e(o=>[...o,s]),()=>e(o=>{let a=o.slice(),u=a.indexOf(s);return u!==-1&&a.splice(u,1),a}))),i=T.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return X.createElement(RS.Provider,{value:i},n.children)},[e])]}let q5="label";function G5(t,e){let n=ei(),{id:r=`headlessui-label-${n}`,passive:i=!1,...s}=t,o=bS(),a=rn(e);bt(()=>o.register(r),[r,o.register]);let u={ref:a,...o.props,id:r};return i&&("onClick"in u&&(delete u.htmlFor,delete u.onClick),"onClick"in s&&delete s.onClick),Vt({ourProps:u,theirProps:s,slot:o.slot||{},defaultTag:q5,name:o.name||"Label"})}let K5=Mt(G5),Q5=Object.assign(K5,{}),mg=T.createContext(null);mg.displayName="GroupContext";let Y5=T.Fragment;function X5(t){var e;let[n,r]=T.useState(null),[i,s]=H5(),[o,a]=IS(),u=T.useMemo(()=>({switch:n,setSwitch:r,labelledby:i,describedby:o}),[n,r,i,o]),c={},h=t;return X.createElement(a,{name:"Switch.Description"},X.createElement(s,{name:"Switch.Label",props:{htmlFor:(e=u.switch)==null?void 0:e.id,onClick(f){n&&(f.currentTarget.tagName==="LABEL"&&f.preventDefault(),n.click(),n.focus({preventScroll:!0}))}}},X.createElement(mg.Provider,{value:u},Vt({ourProps:c,theirProps:h,defaultTag:Y5,name:"Switch.Group"}))))}let J5="button";function Z5(t,e){let n=ei(),{id:r=`headlessui-switch-${n}`,checked:i,defaultChecked:s=!1,onChange:o,name:a,value:u,form:c,...h}=t,f=T.useContext(mg),m=T.useRef(null),g=rn(m,e,f===null?null:f.setSwitch),[v,E]=DO(i,o,s),k=xe(()=>E==null?void 0:E(!v)),A=xe(S=>{if(vS(S.currentTarget))return S.preventDefault();S.preventDefault(),k()}),w=xe(S=>{S.key===hc.Space?(S.preventDefault(),k()):S.key===hc.Enter&&IO(S.currentTarget)}),_=xe(S=>S.preventDefault()),V=T.useMemo(()=>({checked:v}),[v]),L={id:r,ref:g,role:"switch",type:SO(t,m),tabIndex:0,"aria-checked":v,"aria-labelledby":f==null?void 0:f.labelledby,"aria-describedby":f==null?void 0:f.describedby,onClick:A,onKeyUp:w,onKeyPress:_},F=sh();return T.useEffect(()=>{var S;let y=(S=m.current)==null?void 0:S.closest("form");y&&s!==void 0&&F.addEventListener(y,"reset",()=>{E(s)})},[m,E]),X.createElement(X.Fragment,null,a!=null&&v&&X.createElement(cc,{features:Na.Hidden,...cm({as:"input",type:"checkbox",hidden:!0,readOnly:!0,form:c,checked:v,name:a,value:u})}),Vt({ourProps:L,theirProps:h,slot:V,defaultTag:J5,name:"Switch"}))}let eF=Mt(Z5),tF=X5,Pd=Object.assign(eF,{Group:tF,Label:Q5,Description:kS});function nF(t){let e={called:!1};return(...n)=>{if(!e.called)return e.called=!0,t(...n)}}function Id(t,...e){t&&e.length>0&&t.classList.add(...e)}function kd(t,...e){t&&e.length>0&&t.classList.remove(...e)}function rF(t,e){let n=Oi();if(!t)return n.dispose;let{transitionDuration:r,transitionDelay:i}=getComputedStyle(t),[s,o]=[r,i].map(u=>{let[c=0]=u.split(",").filter(Boolean).map(h=>h.includes("ms")?parseFloat(h):parseFloat(h)*1e3).sort((h,f)=>f-h);return c}),a=s+o;if(a!==0){n.group(c=>{c.setTimeout(()=>{e(),c.dispose()},a),c.addEventListener(t,"transitionrun",h=>{h.target===h.currentTarget&&c.dispose()})});let u=n.addEventListener(t,"transitionend",c=>{c.target===c.currentTarget&&(e(),u())})}else e();return n.add(()=>e()),n.dispose}function iF(t,e,n,r){let i=n?"enter":"leave",s=Oi(),o=r!==void 0?nF(r):()=>{};i==="enter"&&(t.removeAttribute("hidden"),t.style.display="");let a=St(i,{enter:()=>e.enter,leave:()=>e.leave}),u=St(i,{enter:()=>e.enterTo,leave:()=>e.leaveTo}),c=St(i,{enter:()=>e.enterFrom,leave:()=>e.leaveFrom});return kd(t,...e.base,...e.enter,...e.enterTo,...e.enterFrom,...e.leave,...e.leaveFrom,...e.leaveTo,...e.entered),Id(t,...e.base,...a,...c),s.nextFrame(()=>{kd(t,...e.base,...a,...c),Id(t,...e.base,...a,...u),rF(t,()=>(kd(t,...e.base,...a),Id(t,...e.base,...e.entered),o()))}),s.dispose}function sF({immediate:t,container:e,direction:n,classes:r,onStart:i,onStop:s}){let o=Xa(),a=sh(),u=Qn(n);bt(()=>{t&&(u.current="enter")},[t]),bt(()=>{let c=Oi();a.add(c.dispose);let h=e.current;if(h&&u.current!=="idle"&&o.current)return c.dispose(),i.current(u.current),c.add(iF(h,r.current,u.current==="enter",()=>{c.dispose(),s.current(u.current)})),c.dispose},[n])}function cr(t=""){return t.split(" ").filter(e=>e.trim().length>1)}let oh=T.createContext(null);oh.displayName="TransitionContext";var oF=(t=>(t.Visible="visible",t.Hidden="hidden",t))(oF||{});function aF(){let t=T.useContext(oh);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function lF(){let t=T.useContext(ah);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let ah=T.createContext(null);ah.displayName="NestingContext";function lh(t){return"children"in t?lh(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function DS(t,e){let n=Qn(t),r=T.useRef([]),i=Xa(),s=sh(),o=xe((g,v=xr.Hidden)=>{let E=r.current.findIndex(({el:k})=>k===g);E!==-1&&(St(v,{[xr.Unmount](){r.current.splice(E,1)},[xr.Hidden](){r.current[E].state="hidden"}}),s.microTask(()=>{var k;!lh(r)&&i.current&&((k=n.current)==null||k.call(n))}))}),a=xe(g=>{let v=r.current.find(({el:E})=>E===g);return v?v.state!=="visible"&&(v.state="visible"):r.current.push({el:g,state:"visible"}),()=>o(g,xr.Unmount)}),u=T.useRef([]),c=T.useRef(Promise.resolve()),h=T.useRef({enter:[],leave:[],idle:[]}),f=xe((g,v,E)=>{u.current.splice(0),e&&(e.chains.current[v]=e.chains.current[v].filter(([k])=>k!==g)),e==null||e.chains.current[v].push([g,new Promise(k=>{u.current.push(k)})]),e==null||e.chains.current[v].push([g,new Promise(k=>{Promise.all(h.current[v].map(([A,w])=>w)).then(()=>k())})]),v==="enter"?c.current=c.current.then(()=>e==null?void 0:e.wait.current).then(()=>E(v)):E(v)}),m=xe((g,v,E)=>{Promise.all(h.current[v].splice(0).map(([k,A])=>A)).then(()=>{var k;(k=u.current.shift())==null||k()}).then(()=>E(v))});return T.useMemo(()=>({children:r,register:a,unregister:o,onStart:f,onStop:m,wait:c,chains:h}),[a,o,r,f,m,h,c])}function uF(){}let cF=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function b1(t){var e;let n={};for(let r of cF)n[r]=(e=t[r])!=null?e:uF;return n}function hF(t){let e=T.useRef(b1(t));return T.useEffect(()=>{e.current=b1(t)},[t]),e}let dF="div",NS=uc.RenderStrategy;function fF(t,e){var n,r;let{beforeEnter:i,afterEnter:s,beforeLeave:o,afterLeave:a,enter:u,enterFrom:c,enterTo:h,entered:f,leave:m,leaveFrom:g,leaveTo:v,...E}=t,k=T.useRef(null),A=rn(k,e),w=(n=E.unmount)==null||n?xr.Unmount:xr.Hidden,{show:_,appear:V,initial:L}=aF(),[F,S]=T.useState(_?"visible":"hidden"),y=lF(),{register:P,unregister:I}=y;T.useEffect(()=>P(k),[P,k]),T.useEffect(()=>{if(w===xr.Hidden&&k.current){if(_&&F!=="visible"){S("visible");return}return St(F,{hidden:()=>I(k),visible:()=>P(k)})}},[F,k,P,I,_,w]);let D=Qn({base:cr(E.className),enter:cr(u),enterFrom:cr(c),enterTo:cr(h),entered:cr(f),leave:cr(m),leaveFrom:cr(g),leaveTo:cr(v)}),M=hF({beforeEnter:i,afterEnter:s,beforeLeave:o,afterLeave:a}),R=Ks();T.useEffect(()=>{if(R&&F==="visible"&&k.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[k,F,R]);let re=L&&!V,ue=V&&_&&L,Ae=!R||re?"idle":_?"enter":"leave",Ce=W5(0),H=xe(W=>St(W,{enter:()=>{Ce.addFlag(Kt.Opening),M.current.beforeEnter()},leave:()=>{Ce.addFlag(Kt.Closing),M.current.beforeLeave()},idle:()=>{}})),Y=xe(W=>St(W,{enter:()=>{Ce.removeFlag(Kt.Opening),M.current.afterEnter()},leave:()=>{Ce.removeFlag(Kt.Closing),M.current.afterLeave()},idle:()=>{}})),N=DS(()=>{S("hidden"),I(k)},y);sF({immediate:ue,container:k,classes:D,direction:Ae,onStart:Qn(W=>{N.onStart(k,W,H)}),onStop:Qn(W=>{N.onStop(k,W,Y),W==="leave"&&!lh(N)&&(S("hidden"),I(k))})});let b=E,U={ref:A};return ue?b={...b,className:lc(E.className,...D.current.enter,...D.current.enterFrom)}:(b.className=lc(E.className,(r=k.current)==null?void 0:r.className),b.className===""&&delete b.className),X.createElement(ah.Provider,{value:N},X.createElement(bO,{value:St(F,{visible:Kt.Open,hidden:Kt.Closed})|Ce.flags},Vt({ourProps:U,theirProps:b,defaultTag:dF,features:NS,visible:F==="visible",name:"Transition.Child"})))}function mF(t,e){let{show:n,appear:r=!1,unmount:i=!0,...s}=t,o=T.useRef(null),a=rn(o,e);Ks();let u=hg();if(n===void 0&&u!==null&&(n=(u&Kt.Open)===Kt.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[c,h]=T.useState(n?"visible":"hidden"),f=DS(()=>{h("hidden")}),[m,g]=T.useState(!0),v=T.useRef([n]);bt(()=>{m!==!1&&v.current[v.current.length-1]!==n&&(v.current.push(n),g(!1))},[v,n]);let E=T.useMemo(()=>({show:n,appear:r,initial:m}),[n,r,m]);T.useEffect(()=>{if(n)h("visible");else if(!lh(f))h("hidden");else{let _=o.current;if(!_)return;let V=_.getBoundingClientRect();V.x===0&&V.y===0&&V.width===0&&V.height===0&&h("hidden")}},[n,f]);let k={unmount:i},A=xe(()=>{var _;m&&g(!1),(_=t.beforeEnter)==null||_.call(t)}),w=xe(()=>{var _;m&&g(!1),(_=t.beforeLeave)==null||_.call(t)});return X.createElement(ah.Provider,{value:f},X.createElement(oh.Provider,{value:E},Vt({ourProps:{...k,as:T.Fragment,children:X.createElement(VS,{ref:a,...k,...s,beforeEnter:A,beforeLeave:w})},theirProps:{},defaultTag:T.Fragment,features:NS,visible:c==="visible",name:"Transition"})))}function pF(t,e){let n=T.useContext(oh)!==null,r=hg()!==null;return X.createElement(X.Fragment,null,!n&&r?X.createElement(pm,{ref:e,...t}):X.createElement(VS,{ref:e,...t}))}let pm=Mt(mF),VS=Mt(fF),gF=Mt(pF),Rd=Object.assign(pm,{Child:gF,Root:pm});const pg=({isOpen:t,onClose:e,title:n,children:r})=>C.jsx(Rd,{appear:!0,show:t,as:T.Fragment,children:C.jsxs(Cd,{as:"div",className:"relative z-50",onClose:e,children:[C.jsx(Rd.Child,{as:T.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),C.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:C.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:C.jsx(Rd.Child,{as:T.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:C.jsxs(Cd.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 shadow-xl transition-all",children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsx(Cd.Title,{as:"h3",className:"text-lg font-medium text-primary-800",children:n}),C.jsx("button",{onClick:e,className:"rounded-full p-1 hover:bg-primary-50 text-primary-400",children:C.jsx(IT,{className:"w-5 h-5"})})]}),r]})})})})]})}),yF=["movie","game","cooking","outdoor","creative","music","reading","relaxing","active","seasonal"],vF=["relaxing","romantic","active","creative","fun","intellectual","peaceful","energetic","productive","cozy","silly","nostalgic","competitive","teamwork"],D1=({activity:t,isOpen:e,onClose:n,isNew:r=!1})=>{const{updateActivity:i,addActivity:s}=Gs(),[o,a]=T.useState({name:t.name,emoji:t.emoji,description:t.description,category:t.category,moods:t.moods}),u=async h=>{h.preventDefault(),r?await s({...o,isCustom:!0}):await i(t.id,{...o,isCustom:t.isCustom}),n()},c=h=>{a(f=>({...f,moods:f.moods.includes(h)?f.moods.filter(m=>m!==h):[...f.moods,h]}))};return C.jsx(pg,{isOpen:e,onClose:n,title:r?"Create Activity":"Edit Activity",children:C.jsxs("form",{onSubmit:u,className:"space-y-6",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-primary-700 dark:text-primary-300 mb-1",children:"Activity Name"}),C.jsx("input",{type:"text",value:o.name,onChange:h=>a(f=>({...f,name:h.target.value})),className:"w-full rounded-lg border-primary-200 focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600",required:!0})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-primary-700 dark:text-primary-300 mb-1",children:"Emoji"}),C.jsx("input",{type:"text",value:o.emoji,onChange:h=>a(f=>({...f,emoji:h.target.value})),className:"w-full rounded-lg border-primary-200 focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600",required:!0,maxLength:2})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-primary-700 dark:text-primary-300 mb-1",children:"Category"}),C.jsxs("select",{value:o.category,onChange:h=>a(f=>({...f,category:h.target.value})),className:"w-full rounded-lg border-primary-200 focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600",required:!0,children:[C.jsx("option",{value:"",children:"Select a category"}),yF.map(h=>C.jsx("option",{value:h,children:h.charAt(0).toUpperCase()+h.slice(1)},h))]})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-primary-700 dark:text-primary-300 mb-1",children:"Moods"}),C.jsx("div",{className:"flex flex-wrap gap-2",children:vF.map(h=>{var f;return C.jsx("button",{type:"button",onClick:()=>c(h),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${o.moods.includes(h)?((f=am[h])==null?void 0:f.replace("hover:",""))||"bg-gray-200 text-gray-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:h},h)})})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-primary-700 dark:text-primary-300 mb-1",children:"Description"}),C.jsx("textarea",{value:o.description,onChange:h=>a(f=>({...f,description:h.target.value})),className:"w-full rounded-lg border-primary-200 focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600",rows:3,required:!0})]}),C.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[C.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),C.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 rounded-lg transition-colors",children:r?"Create Activity":"Save Changes"})]})]})})},wF=({isOpen:t,onClose:e,onConfirm:n,activityName:r})=>C.jsx(pg,{isOpen:t,onClose:e,title:"Delete Activity",children:C.jsxs("div",{className:"space-y-4",children:[C.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Are you sure you want to delete"," ",C.jsx("span",{className:"font-medium text-primary-600 dark:text-primary-400",children:r}),"? This action cannot be undone."]}),C.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[C.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),C.jsx("button",{type:"button",onClick:()=>{n(),e()},className:"px-4 py-2 text-sm font-medium text-white bg-red-500 hover:bg-red-600 rounded-lg transition-colors",children:"Delete Activity"})]})]})}),_F=({activity:t,onEdit:e})=>{const{removeActivity:n}=Gs(),[r,i]=T.useState(!1),s=async()=>{await n(t.id)};return C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-primary-100 dark:border-primary-800",children:[C.jsxs("div",{className:"flex justify-between items-start",children:[C.jsxs("div",{children:[C.jsx("span",{className:"text-4xl mb-2",children:t.emoji}),C.jsx("h3",{className:"text-lg font-medium text-primary-900 dark:text-primary-100",children:t.name})]}),C.jsxs("div",{className:"flex space-x-2",children:[C.jsx("button",{onClick:()=>e(t),className:"p-2 text-primary-600 hover:bg-primary-50 rounded-full transition-colors",title:"Edit activity",children:C.jsx(PT,{className:"w-5 h-5"})}),C.jsx("button",{onClick:()=>i(!0),className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Delete activity",children:C.jsx(Bb,{className:"w-5 h-5"})})]})]}),C.jsx("p",{className:"text-sm text-primary-600 dark:text-primary-400 mt-2",children:t.description}),C.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:t.moods.map(o=>C.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-primary-100 dark:bg-primary-800 text-primary-700 dark:text-primary-300",children:o},o))})]}),C.jsx(wF,{isOpen:r,onClose:()=>i(!1),onConfirm:s,activityName:t.name})]})};function EF(){const{activities:t}=Gs(),[e,n]=T.useState(null),[r,i]=T.useState(!1),[s,o]=T.useState(""),[a,u]=T.useState("all"),[c,h]=T.useState("all"),f=T.useMemo(()=>{const E=new Set;return t.forEach(k=>{k.moods.forEach(A=>E.add(A))}),["all",...Array.from(E)].sort()},[t]),m=T.useMemo(()=>{const E=new Set(t.map(k=>k.category));return["all",...Array.from(E)].sort()},[t]),g=T.useMemo(()=>t.filter(E=>{const k=E.name.toLowerCase().includes(s.toLowerCase()),A=a==="all"||E.moods.includes(a),w=c==="all"||E.category===c;return k&&A&&w}),[t,s,a,c]),v=()=>{o(""),u("all"),h("all")};return C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Activities"}),C.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center px-4 py-2 rounded-lg bg-primary-500 text-white hover:bg-primary-600 transition-colors",children:[C.jsx(Db,{className:"h-5 w-5 mr-2"}),"Add Activity"]})]}),C.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 space-y-4",children:[C.jsxs("div",{className:"relative",children:[C.jsx(Ab,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),C.jsx("input",{type:"text",placeholder:"Search activities...",value:s,onChange:E=>o(E.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-primary-200 focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"})]}),C.jsxs("div",{className:"flex flex-wrap gap-2",children:[C.jsx("button",{onClick:()=>u("all"),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${a==="all"?"bg-gray-200 text-gray-800":"bg-gray-50 text-gray-600 hover:bg-gray-100"}`,children:"All Moods"}),f.filter(E=>E!=="all").map(E=>C.jsx("button",{onClick:()=>u(E===a?"all":E),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${E===a?`${am[E]} ring-2 ring-offset-2 ring-primary-500`:am[E]}`,children:E},E))]}),C.jsxs("div",{className:"flex flex-wrap gap-2",children:[C.jsx("button",{onClick:()=>h("all"),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${c==="all"?"bg-gray-200 text-gray-800":"bg-gray-50 text-gray-600 hover:bg-gray-100"}`,children:"All Categories"}),m.filter(E=>E!=="all").map(E=>C.jsx("button",{onClick:()=>h(E===c?"all":E),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${E===c?`${lm[E]} ring-2 ring-offset-2 ring-primary-500`:lm[E]}`,children:E},E))]}),(s||a!=="all"||c!=="all")&&C.jsxs("div",{className:"flex justify-between items-center pt-2",children:[C.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Found ",g.length," activities"]}),C.jsxs("button",{onClick:v,className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:[C.jsx(IT,{className:"h-4 w-4"}),"Clear filters"]})]})]}),C.jsx(me.div,{layout:!0,className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:C.jsx(Dp,{children:g.map(E=>C.jsx(me.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:C.jsx(_F,{activity:E,onEdit:n})},E.id))})}),r&&C.jsx(D1,{activity:{id:"",name:"",emoji:"",description:"",category:"",moods:[],isCustom:!0},isOpen:!0,onClose:()=>i(!1),isNew:!0}),e&&C.jsx(D1,{activity:e,isOpen:!0,onClose:()=>n(null)})]})}const N1=["from-blue-500/20 to-blue-600/20","from-green-500/20 to-green-600/20","from-purple-500/20 to-purple-600/20","from-pink-500/20 to-pink-600/20","from-yellow-500/20 to-yellow-600/20","from-indigo-500/20 to-indigo-600/20","from-red-500/20 to-red-600/20","from-teal-500/20 to-teal-600/20"],TF=({activity:t,angle:e,index:n,total:r,isSpinning:i})=>C.jsx(me.div,{className:"absolute w-full h-full origin-center",style:{transform:`rotate(${e}deg)`},whileHover:{scale:1.02},children:C.jsx(me.div,{className:`absolute left-1/2 w-1/2 h-full origin-left flex items-center justify-center bg-gradient-to-r ${N1[n%N1.length]} dark:opacity-80`,style:{transform:`rotate(${180/r}deg)`},children:C.jsx(me.div,{className:"text-2xl -rotate-90 bg-white/50 dark:bg-gray-800/50 p-2 rounded-full",whileHover:{scale:1.2},whileTap:{scale:.9},animate:i?{scale:[1,1.1,1],rotate:[-90,-85,-95,-90]}:{},transition:{duration:.5,repeat:i?1/0:0,type:"spring",stiffness:400,damping:17},children:t.emoji})})}),xF=({isSpinning:t})=>{const e=Array.from({length:20});return t?C.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.map((n,r)=>C.jsx(me.div,{className:"absolute w-2 h-2 bg-primary-400 rounded-full",initial:{x:"50%",y:"50%",scale:0,opacity:1},animate:{x:["50%",`${Math.random()*100}%`],y:["50%",`${Math.random()*100}%`],scale:[0,1,0],opacity:[1,0]},transition:{duration:2,repeat:1/0,delay:r*.1,ease:"easeOut"}},r))}):null},SF=({activities:t,onSpinEnd:e})=>{const[n,r]=T.useState(0),[i,s]=T.useState(!1),o=T.useRef(null),[a]=pr(gr.SPIN,{volume:.3}),[u]=pr(gr.WIN,{volume:.3}),c=()=>{if(i||t.length===0)return;s(!0),a();const h=4,f=5,g=Math.floor(Math.random()*(8-f)+f),v=Math.floor(Math.random()*t.length),E=360/t.length,k=g*360+v*E+Math.random()*E;rb(n,k,{duration:h,ease:[.2,.8,.3,.99],onUpdate:A=>r(A),onComplete:()=>{s(!1),setTimeout(()=>{u(),e(t[v])},300)}})};return C.jsxs("div",{className:"relative w-80 h-80 mx-auto",children:[C.jsxs(me.div,{ref:o,className:"absolute inset-0",style:{rotate:n},transition:{type:"spring",duration:4},whileHover:{scale:1.02},children:[C.jsx(me.div,{className:"absolute inset-0 rounded-full border-8 border-primary-200 dark:border-primary-700 shadow-lg backdrop-blur-sm overflow-hidden",animate:{boxShadow:i?["0 0 20px rgba(var(--primary-400), 0.3)","0 0 40px rgba(var(--primary-400), 0.5)","0 0 20px rgba(var(--primary-400), 0.3)"]:"0 0 0 rgba(0,0,0,0)"},transition:{duration:1,repeat:i?1/0:0}}),t.map((h,f)=>C.jsx(TF,{activity:h,angle:360/t.length*f,index:f,total:t.length,isSpinning:i},h.id))]}),C.jsx(me.div,{className:"absolute top-1/2 right-0 transform translate-x-1/2 -translate-y-1/2",animate:{scale:i?[1,1.2,1]:1},transition:{duration:.5,repeat:i?1/0:0},children:C.jsx("div",{className:"w-4 h-8 bg-primary-600 dark:bg-primary-400 rounded-r-full shadow-md"})}),C.jsx(me.button,{onClick:c,disabled:i,className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 rounded-full bg-primary-600 text-white hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center shadow-lg dark:bg-primary-500 dark:hover:bg-primary-600",whileHover:{scale:1.1},whileTap:{scale:.9},animate:i?{scale:[1,1.1,1],rotate:[0,-10,10,-10,10,0]}:{},transition:{duration:.5,repeat:i?1/0:0},children:C.jsx("span",{className:"text-sm font-medium",children:i?"Spinning!":"Spin!"})}),C.jsx(xF,{isSpinning:i})]})};var gg={};(function t(e,n,r,i){var s=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!e.OffscreenCanvas)return!1;var N=new OffscreenCanvas(1,1),b=N.getContext("2d");b.fillRect(0,0,1,1);var U=N.transferToImageBitmap();try{b.createPattern(U,"no-repeat")}catch{return!1}return!0}();function u(){}function c(N){var b=n.exports.Promise,U=b!==void 0?b:e.Promise;return typeof U=="function"?new U(N):(N(u,u),null)}var h=function(N,b){return{transform:function(U){if(N)return U;if(b.has(U))return b.get(U);var W=new OffscreenCanvas(U.width,U.height),Z=W.getContext("2d");return Z.drawImage(U,0,0),b.set(U,W),W},clear:function(){b.clear()}}}(a,new Map),f=function(){var N=Math.floor(16.666666666666668),b,U,W={},Z=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(b=function(te){var ee=Math.random();return W[ee]=requestAnimationFrame(function Q(he){Z===he||Z+N-1<he?(Z=he,delete W[ee],te()):W[ee]=requestAnimationFrame(Q)}),ee},U=function(te){W[te]&&cancelAnimationFrame(W[te])}):(b=function(te){return setTimeout(te,N)},U=function(te){return clearTimeout(te)}),{frame:b,cancel:U}}(),m=function(){var N,b,U={};function W(Z){function te(ee,Q){Z.postMessage({options:ee||{},callback:Q})}Z.init=function(Q){var he=Q.transferControlToOffscreen();Z.postMessage({canvas:he},[he])},Z.fire=function(Q,he,se){if(b)return te(Q,null),b;var de=Math.random().toString(36).slice(2);return b=c(function(ie){function ve(Me){Me.data.callback===de&&(delete U[de],Z.removeEventListener("message",ve),b=null,h.clear(),se(),ie())}Z.addEventListener("message",ve),te(Q,de),U[de]=ve.bind(null,{data:{callback:de}})}),b},Z.reset=function(){Z.postMessage({reset:!0});for(var Q in U)U[Q](),delete U[Q]}}return function(){if(N)return N;if(!r&&s){var Z=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{N=new Worker(URL.createObjectURL(new Blob([Z])))}catch(te){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn(" Could not load worker",te),null}W(N)}return N}}(),g={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function v(N,b){return b?b(N):N}function E(N){return N!=null}function k(N,b,U){return v(N&&E(N[b])?N[b]:g[b],U)}function A(N){return N<0?0:Math.floor(N)}function w(N,b){return Math.floor(Math.random()*(b-N))+N}function _(N){return parseInt(N,16)}function V(N){return N.map(L)}function L(N){var b=String(N).replace(/[^0-9a-f]/gi,"");return b.length<6&&(b=b[0]+b[0]+b[1]+b[1]+b[2]+b[2]),{r:_(b.substring(0,2)),g:_(b.substring(2,4)),b:_(b.substring(4,6))}}function F(N){var b=k(N,"origin",Object);return b.x=k(b,"x",Number),b.y=k(b,"y",Number),b}function S(N){N.width=document.documentElement.clientWidth,N.height=document.documentElement.clientHeight}function y(N){var b=N.getBoundingClientRect();N.width=b.width,N.height=b.height}function P(N){var b=document.createElement("canvas");return b.style.position="fixed",b.style.top="0px",b.style.left="0px",b.style.pointerEvents="none",b.style.zIndex=N,b}function I(N,b,U,W,Z,te,ee,Q,he){N.save(),N.translate(b,U),N.rotate(te),N.scale(W,Z),N.arc(0,0,1,ee,Q,he),N.restore()}function D(N){var b=N.angle*(Math.PI/180),U=N.spread*(Math.PI/180);return{x:N.x,y:N.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:N.startVelocity*.5+Math.random()*N.startVelocity,angle2D:-b+(.5*U-Math.random()*U),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:N.color,shape:N.shape,tick:0,totalTicks:N.ticks,decay:N.decay,drift:N.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:N.gravity*3,ovalScalar:.6,scalar:N.scalar,flat:N.flat}}function M(N,b){b.x+=Math.cos(b.angle2D)*b.velocity+b.drift,b.y+=Math.sin(b.angle2D)*b.velocity+b.gravity,b.velocity*=b.decay,b.flat?(b.wobble=0,b.wobbleX=b.x+10*b.scalar,b.wobbleY=b.y+10*b.scalar,b.tiltSin=0,b.tiltCos=0,b.random=1):(b.wobble+=b.wobbleSpeed,b.wobbleX=b.x+10*b.scalar*Math.cos(b.wobble),b.wobbleY=b.y+10*b.scalar*Math.sin(b.wobble),b.tiltAngle+=.1,b.tiltSin=Math.sin(b.tiltAngle),b.tiltCos=Math.cos(b.tiltAngle),b.random=Math.random()+2);var U=b.tick++/b.totalTicks,W=b.x+b.random*b.tiltCos,Z=b.y+b.random*b.tiltSin,te=b.wobbleX+b.random*b.tiltCos,ee=b.wobbleY+b.random*b.tiltSin;if(N.fillStyle="rgba("+b.color.r+", "+b.color.g+", "+b.color.b+", "+(1-U)+")",N.beginPath(),o&&b.shape.type==="path"&&typeof b.shape.path=="string"&&Array.isArray(b.shape.matrix))N.fill(Ce(b.shape.path,b.shape.matrix,b.x,b.y,Math.abs(te-W)*.1,Math.abs(ee-Z)*.1,Math.PI/10*b.wobble));else if(b.shape.type==="bitmap"){var Q=Math.PI/10*b.wobble,he=Math.abs(te-W)*.1,se=Math.abs(ee-Z)*.1,de=b.shape.bitmap.width*b.scalar,ie=b.shape.bitmap.height*b.scalar,ve=new DOMMatrix([Math.cos(Q)*he,Math.sin(Q)*he,-Math.sin(Q)*se,Math.cos(Q)*se,b.x,b.y]);ve.multiplySelf(new DOMMatrix(b.shape.matrix));var Me=N.createPattern(h.transform(b.shape.bitmap),"no-repeat");Me.setTransform(ve),N.globalAlpha=1-U,N.fillStyle=Me,N.fillRect(b.x-de/2,b.y-ie/2,de,ie),N.globalAlpha=1}else if(b.shape==="circle")N.ellipse?N.ellipse(b.x,b.y,Math.abs(te-W)*b.ovalScalar,Math.abs(ee-Z)*b.ovalScalar,Math.PI/10*b.wobble,0,2*Math.PI):I(N,b.x,b.y,Math.abs(te-W)*b.ovalScalar,Math.abs(ee-Z)*b.ovalScalar,Math.PI/10*b.wobble,0,2*Math.PI);else if(b.shape==="star")for(var fe=Math.PI/2*3,rt=4*b.scalar,Lt=8*b.scalar,Ht=b.x,mn=b.y,Sn=5,Ot=Math.PI/Sn;Sn--;)Ht=b.x+Math.cos(fe)*Lt,mn=b.y+Math.sin(fe)*Lt,N.lineTo(Ht,mn),fe+=Ot,Ht=b.x+Math.cos(fe)*rt,mn=b.y+Math.sin(fe)*rt,N.lineTo(Ht,mn),fe+=Ot;else N.moveTo(Math.floor(b.x),Math.floor(b.y)),N.lineTo(Math.floor(b.wobbleX),Math.floor(Z)),N.lineTo(Math.floor(te),Math.floor(ee)),N.lineTo(Math.floor(W),Math.floor(b.wobbleY));return N.closePath(),N.fill(),b.tick<b.totalTicks}function R(N,b,U,W,Z){var te=b.slice(),ee=N.getContext("2d"),Q,he,se=c(function(de){function ie(){Q=he=null,ee.clearRect(0,0,W.width,W.height),h.clear(),Z(),de()}function ve(){r&&!(W.width===i.width&&W.height===i.height)&&(W.width=N.width=i.width,W.height=N.height=i.height),!W.width&&!W.height&&(U(N),W.width=N.width,W.height=N.height),ee.clearRect(0,0,W.width,W.height),te=te.filter(function(Me){return M(ee,Me)}),te.length?Q=f.frame(ve):ie()}Q=f.frame(ve),he=ie});return{addFettis:function(de){return te=te.concat(de),se},canvas:N,promise:se,reset:function(){Q&&f.cancel(Q),he&&he()}}}function re(N,b){var U=!N,W=!!k(b||{},"resize"),Z=!1,te=k(b,"disableForReducedMotion",Boolean),ee=s&&!!k(b||{},"useWorker"),Q=ee?m():null,he=U?S:y,se=N&&Q?!!N.__confetti_initialized:!1,de=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ie;function ve(fe,rt,Lt){for(var Ht=k(fe,"particleCount",A),mn=k(fe,"angle",Number),Sn=k(fe,"spread",Number),Ot=k(fe,"startVelocity",Number),Za=k(fe,"decay",Number),uh=k(fe,"gravity",Number),Qs=k(fe,"drift",Number),Fi=k(fe,"colors",V),el=k(fe,"ticks",Number),Xe=k(fe,"shapes"),lt=k(fe,"scalar"),ji=!!k(fe,"flat"),Ys=F(fe),Xs=Ht,Js=[],ti=N.width*Ys.x,tl=N.height*Ys.y;Xs--;)Js.push(D({x:ti,y:tl,angle:mn,spread:Sn,startVelocity:Ot,color:Fi[Xs%Fi.length],shape:Xe[w(0,Xe.length)],ticks:el,decay:Za,gravity:uh,drift:Qs,scalar:lt,flat:ji}));return ie?ie.addFettis(Js):(ie=R(N,Js,he,rt,Lt),ie.promise)}function Me(fe){var rt=te||k(fe,"disableForReducedMotion",Boolean),Lt=k(fe,"zIndex",Number);if(rt&&de)return c(function(Ot){Ot()});U&&ie?N=ie.canvas:U&&!N&&(N=P(Lt),document.body.appendChild(N)),W&&!se&&he(N);var Ht={width:N.width,height:N.height};Q&&!se&&Q.init(N),se=!0,Q&&(N.__confetti_initialized=!0);function mn(){if(Q){var Ot={getBoundingClientRect:function(){if(!U)return N.getBoundingClientRect()}};he(Ot),Q.postMessage({resize:{width:Ot.width,height:Ot.height}});return}Ht.width=Ht.height=null}function Sn(){ie=null,W&&(Z=!1,e.removeEventListener("resize",mn)),U&&N&&(document.body.contains(N)&&document.body.removeChild(N),N=null,se=!1)}return W&&!Z&&(Z=!0,e.addEventListener("resize",mn,!1)),Q?Q.fire(fe,Ht,Sn):ve(fe,Ht,Sn)}return Me.reset=function(){Q&&Q.reset(),ie&&ie.reset()},Me}var ue;function Ae(){return ue||(ue=re(null,{useWorker:!0,resize:!0})),ue}function Ce(N,b,U,W,Z,te,ee){var Q=new Path2D(N),he=new Path2D;he.addPath(Q,new DOMMatrix(b));var se=new Path2D;return se.addPath(he,new DOMMatrix([Math.cos(ee)*Z,Math.sin(ee)*Z,-Math.sin(ee)*te,Math.cos(ee)*te,U,W])),se}function H(N){if(!o)throw new Error("path confetti are not supported in this browser");var b,U;typeof N=="string"?b=N:(b=N.path,U=N.matrix);var W=new Path2D(b),Z=document.createElement("canvas"),te=Z.getContext("2d");if(!U){for(var ee=1e3,Q=ee,he=ee,se=0,de=0,ie,ve,Me=0;Me<ee;Me+=2)for(var fe=0;fe<ee;fe+=2)te.isPointInPath(W,Me,fe,"nonzero")&&(Q=Math.min(Q,Me),he=Math.min(he,fe),se=Math.max(se,Me),de=Math.max(de,fe));ie=se-Q,ve=de-he;var rt=10,Lt=Math.min(rt/ie,rt/ve);U=[Lt,0,0,Lt,-Math.round(ie/2+Q)*Lt,-Math.round(ve/2+he)*Lt]}return{type:"path",path:b,matrix:U}}function Y(N){var b,U=1,W="#000000",Z='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof N=="string"?b=N:(b=N.text,U="scalar"in N?N.scalar:U,Z="fontFamily"in N?N.fontFamily:Z,W="color"in N?N.color:W);var te=10*U,ee=""+te+"px "+Z,Q=new OffscreenCanvas(te,te),he=Q.getContext("2d");he.font=ee;var se=he.measureText(b),de=Math.ceil(se.actualBoundingBoxRight+se.actualBoundingBoxLeft),ie=Math.ceil(se.actualBoundingBoxAscent+se.actualBoundingBoxDescent),ve=2,Me=se.actualBoundingBoxLeft+ve,fe=se.actualBoundingBoxAscent+ve;de+=ve+ve,ie+=ve+ve,Q=new OffscreenCanvas(de,ie),he=Q.getContext("2d"),he.font=ee,he.fillStyle=W,he.fillText(b,Me,fe);var rt=1/U;return{type:"bitmap",bitmap:Q.transferToImageBitmap(),matrix:[rt,0,0,rt,-de*rt/2,-ie*rt/2]}}n.exports=function(){return Ae().apply(this,arguments)},n.exports.reset=function(){Ae().reset()},n.exports.create=re,n.exports.shapeFromPath=H,n.exports.shapeFromText=Y})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),gg,!1);const V1=gg.exports;gg.exports.create;const AF=()=>(T.useEffect(()=>{const e=Date.now()+3e3,n={startVelocity:30,spread:360,ticks:60,zIndex:0},r=(s,o)=>Math.random()*(o-s)+s,i=setInterval(()=>{const s=e-Date.now();if(s<=0){clearInterval(i);return}const o=50*(s/3e3);V1({...n,particleCount:o,origin:{x:r(.1,.3),y:Math.random()-.2}}),V1({...n,particleCount:o,origin:{x:r(.7,.9),y:Math.random()-.2}})},250);return()=>clearInterval(i)},[]),null),CF=({activity:t,onReset:e})=>t?C.jsx(Dp,{children:C.jsxs(me.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"space-y-4",children:[C.jsxs(me.div,{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-primary-100 dark:border-primary-800",initial:{scale:.8},animate:{scale:1},transition:{type:"spring",delay:.2},children:[C.jsx(me.div,{className:"text-4xl mb-2",animate:{scale:[1,1.2,1],rotate:[0,-10,10,-10,10,0]},transition:{duration:.5,delay:.5},children:t.emoji}),C.jsx(me.h3,{className:"text-xl font-medium text-primary-800 dark:text-primary-200",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.7},children:t.name}),C.jsx(me.p,{className:"text-primary-600 dark:text-primary-400 mt-2",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.9},children:t.description})]}),C.jsx(me.button,{onClick:e,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 dark:bg-primary-500 dark:hover:bg-primary-600",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.1},whileHover:{scale:1.05},whileTap:{scale:.95},children:"Try Again"})]})}):null,on={ACTIVITIES:"activities",SETTINGS:"settings",SELECTED_ACTIVITIES:"selected-activities",HISTORY:"spin-history",SCHEDULED_ACTIVITIES:"scheduled-activities"},Hn={getActivities:()=>{const t=localStorage.getItem(on.ACTIVITIES);return t?JSON.parse(t):[]},setActivities:t=>{localStorage.setItem(on.ACTIVITIES,JSON.stringify(t))},getSettings:()=>{const t=localStorage.getItem(on.SETTINGS);return t?JSON.parse(t):{theme:"light",soundEnabled:!0,showConfetti:!0,hasCompletedOnboarding:!1,onboardingShownCount:0,lastOnboardingDate:null}},setSettings:t=>{const n={...Hn.getSettings(),...t};localStorage.setItem(on.SETTINGS,JSON.stringify(n))},getSelectedActivities:()=>{const t=localStorage.getItem(on.SELECTED_ACTIVITIES);return t?JSON.parse(t):[]},setSelectedActivities:t=>{localStorage.setItem(on.SELECTED_ACTIVITIES,JSON.stringify(t))},getSpinHistory:()=>{const t=localStorage.getItem(on.HISTORY);return t?JSON.parse(t):[]},addSpinHistory:t=>{const e=Hn.getSpinHistory(),n={timestamp:Date.now(),activityId:t};e.push(n),localStorage.setItem(on.HISTORY,JSON.stringify(e))},clearHistory:()=>{localStorage.removeItem(on.HISTORY)},clearAll:()=>{Object.values(on).forEach(t=>{localStorage.removeItem(t)})},getScheduledActivities:()=>{const t=localStorage.getItem(on.SCHEDULED_ACTIVITIES);return t?JSON.parse(t):[]},setScheduledActivities:t=>{localStorage.setItem(on.SCHEDULED_ACTIVITIES,JSON.stringify(t))},updateScheduledActivity:(t,e)=>{const n=Hn.getScheduledActivities(),r=n.findIndex(i=>i.date===t);r>=0?n[r].activityId=e:n.push({date:t,activityId:e}),Hn.setScheduledActivities(n)}},PF=()=>{const{activities:t}=Gs(),{settings:e}=ja(),{playClick:n}=Wa(),[r,i]=T.useState(t.slice(0,6)),[s,o]=T.useState("selecting"),[a,u]=T.useState(null),[c,h]=T.useState(!1);T.useEffect(()=>{const v=Hn.getSelectedActivities();if(v.length>0){const E=t.filter(k=>v.includes(k.id));i(E)}},[t]),T.useEffect(()=>{Hn.setSelectedActivities(r.map(v=>v.id))},[r]);const f=async v=>{o("result"),u(v),Hn.addSpinHistory(v.id),await Oo.updateLastUsed(v.id)},m=()=>{o("selecting"),u(null)},g=v=>{s==="selecting"&&(n(),i(E=>{if(E.find(k=>k.id===v.id)){const k=E.filter(A=>A.id!==v.id);return k.length<2&&(h(!0),setTimeout(()=>h(!1),2e3)),k}return E.length>=8?E:[...E,v]}))};return C.jsxs("div",{className:"space-y-8",children:[C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("h3",{className:"text-lg font-medium text-primary-800 dark:text-primary-200",children:"Select Activities (max 8)"}),C.jsxs("span",{className:"text-sm text-primary-500 dark:text-primary-400",children:[r.length,"/8 selected"]})]}),C.jsx(me.div,{className:"grid grid-cols-2 gap-2 md:grid-cols-4",layout:!0,children:t.map(v=>C.jsxs(me.button,{onClick:()=>g(v),disabled:s!=="selecting"||r.length>=8&&!r.find(E=>E.id===v.id),className:`p-3 rounded-lg border transition-colors relative ${r.find(E=>E.id===v.id)?"bg-primary-100 border-primary-300 dark:bg-primary-800 dark:border-primary-600":"bg-white border-primary-100 dark:bg-gray-800 dark:border-primary-800"}`,whileHover:{scale:1.02},whileTap:{scale:.98},layout:!0,children:[C.jsx("span",{className:"text-2xl",children:v.emoji}),C.jsx("p",{className:"text-sm text-primary-700 dark:text-primary-300",children:v.name})]},v.id))}),c&&C.jsx(me.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-sm text-red-500 text-center",children:"Please select at least 2 activities"})]}),r.length>=2&&C.jsxs("div",{className:"text-center space-y-6",children:[s==="selecting"&&C.jsx(me.button,{onClick:()=>o("spinning"),className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 dark:bg-primary-500 dark:hover:bg-primary-600",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Start Spinning!"}),s==="spinning"&&C.jsx(SF,{activities:r,onSpinEnd:f}),s==="result"&&C.jsx(CF,{activity:a,onReset:m})]}),e.showConfetti&&s==="result"&&C.jsx(AF,{})]})},IF=()=>C.jsx(nh,{children:C.jsxs("div",{className:"space-y-8",children:[C.jsxs("div",{className:"text-center space-y-2",children:[C.jsx("h2",{className:"text-2xl font-display text-primary-800 dark:text-primary-200",children:"Spin the Wheel of Fun!"}),C.jsx("p",{className:"text-primary-500 dark:text-primary-400",children:"Let fate decide your next activity"})]}),C.jsx(PF,{})]})}),kF=()=>{const{settings:t,updateSettings:e}=ja(),{playClick:n}=Wa(),r=i=>{n(),e({[i]:!t[i]})};return C.jsx(nh,{children:C.jsxs("div",{className:"space-y-8",children:[C.jsx("h2",{className:"text-2xl font-display text-primary-800 dark:text-primary-200",children:"Settings"}),C.jsxs("div",{className:"space-y-6",children:[C.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-primary-100 dark:border-primary-800",children:C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{className:"space-y-1",children:[C.jsxs("div",{className:"flex items-center space-x-2",children:[t.theme==="dark"?C.jsx(Pb,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"}):C.jsx(Fb,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"}),C.jsx("h3",{className:"text-lg font-medium text-primary-800 dark:text-primary-200",children:"Dark Mode"})]}),C.jsx("p",{className:"text-sm text-primary-600 dark:text-primary-400",children:"Switch between light and dark theme"})]}),C.jsx(Pd,{checked:t.theme==="dark",onChange:()=>e({theme:t.theme==="dark"?"light":"dark"}),className:`${t.theme==="dark"?"bg-primary-600":"bg-primary-200"} relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2`,children:C.jsx(me.span,{layout:!0,className:`${t.theme==="dark"?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]})}),C.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-primary-100 dark:border-primary-800",children:C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{className:"space-y-1",children:[C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(Lb,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"}),C.jsx("h3",{className:"text-lg font-medium text-primary-800 dark:text-primary-200",children:"Sound Effects"})]}),C.jsx("p",{className:"text-sm text-primary-600 dark:text-primary-400",children:"Enable or disable game sounds"})]}),C.jsx(Pd,{checked:t.soundEnabled,onChange:()=>r("soundEnabled"),className:`${t.soundEnabled?"bg-primary-600":"bg-primary-200"} relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2`,children:C.jsx(me.span,{layout:!0,className:`${t.soundEnabled?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]})}),C.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-primary-100 dark:border-primary-800",children:C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{className:"space-y-1",children:[C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(Vb,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"}),C.jsx("h3",{className:"text-lg font-medium text-primary-800 dark:text-primary-200",children:"Celebration Effects"})]}),C.jsx("p",{className:"text-sm text-primary-600 dark:text-primary-400",children:"Show confetti on activity selection"})]}),C.jsx(Pd,{checked:t.showConfetti,onChange:()=>r("showConfetti"),className:`${t.showConfetti?"bg-primary-600":"bg-primary-200"} relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2`,children:C.jsx(me.span,{layout:!0,className:`${t.showConfetti?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]})})]})]})})},RF=()=>{const{activities:t}=Gs(),{playClick:e,playSelect:n}=Wa(),[r,i]=T.useState(new Date),[s,o]=T.useState([]),[a,u]=T.useState(null),[c,h]=T.useState(!1);T.useEffect(()=>{f(r)},[r,t]);const f=L=>{const F=L.getFullYear(),S=L.getMonth(),y=new Date(F,S,1),P=new Date(F,S+1,0),I=Hn.getScheduledActivities(),D=[];for(let M=y;M<=P;M.setDate(M.getDate()+1))if(M.getDay()===5){const R=new Date(M);R.setHours(19,0,0,0);const re=I.find(Ae=>new Date(Ae.date).toDateString()===R.toDateString());let ue;re&&(ue=t.find(Ae=>Ae.id===re.activityId)),ue||(ue=t[Math.floor(Math.random()*t.length)]),D.push({date:R,activity:ue})}o(D)},m=L=>{u(L),h(!0)},g=L=>{if(!a)return;const F=t.find(S=>S.id===L);F&&(Hn.updateScheduledActivity(a.date.toISOString(),L),o(S=>S.map(y=>y.date.toDateString()===a.date.toDateString()?{...y,activity:F}:y)),n(),h(!1),u(null))},v=L=>{const F=L.getFullYear(),S=L.getMonth(),y=new Date(F,S,1),I=new Date(F,S+1,0).getDate(),D=y.getDay();return{daysInMonth:I,startingDay:D}},E=L=>{e();const F=new Date(r);F.setMonth(F.getMonth()+L),i(F)},{daysInMonth:k,startingDay:A}=v(r),w=Array.from({length:k},(L,F)=>F+1),_=Array.from({length:A},(L,F)=>F),V=L=>{const F=new Date(r.getFullYear(),r.getMonth(),L);return s.find(S=>S.date.toDateString()===F.toDateString())};return C.jsx(nh,{children:C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("h2",{className:"text-2xl font-display text-primary-800 dark:text-primary-200",children:"Activity Calendar"}),C.jsxs("div",{className:"flex items-center space-x-4",children:[C.jsx("button",{onClick:()=>E(-1),className:"p-2 text-primary-600 hover:text-primary-800 dark:text-primary-400 dark:hover:text-primary-200",children:C.jsx(pb,{className:"w-5 h-5"})}),C.jsx("h3",{className:"text-lg font-medium text-primary-700 dark:text-primary-300",children:r.toLocaleString("default",{month:"long",year:"numeric"})}),C.jsx("button",{onClick:()=>E(1),className:"p-2 text-primary-600 hover:text-primary-800 dark:text-primary-400 dark:hover:text-primary-200",children:C.jsx(yb,{className:"w-5 h-5"})})]})]}),C.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-primary-100 dark:border-primary-800 overflow-hidden",children:[C.jsx("div",{className:"grid grid-cols-7 text-center border-b border-primary-100 dark:border-primary-800",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(L=>C.jsx("div",{className:"py-2 text-sm font-medium text-primary-600 dark:text-primary-400",children:L},L))}),C.jsxs("div",{className:"grid grid-cols-7",children:[_.map(L=>C.jsx("div",{className:"aspect-square border-b border-r border-primary-100 dark:border-primary-800"},`blank-${L}`)),w.map(L=>{const F=V(L);return C.jsxs(me.div,{className:`aspect-square border-b border-r border-primary-100 dark:border-primary-800 p-1 relative ${F?"bg-primary-50 dark:bg-primary-900/30":""}`,whileHover:{scale:1.02},children:[C.jsx("div",{className:"text-sm text-primary-700 dark:text-primary-300",children:L}),F&&C.jsx(me.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},className:"absolute inset-0 flex items-center justify-center",children:C.jsx("div",{className:"text-2xl",children:F.activity.emoji})})]},L)})]})]}),C.jsxs("div",{className:"space-y-4",children:[C.jsx("h3",{className:"text-lg font-medium text-primary-800 dark:text-primary-200",children:"Scheduled Activities"}),C.jsx("div",{className:"space-y-2",children:s.map((L,F)=>C.jsx(me.div,{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-primary-100 dark:border-primary-800",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:F*.1},children:C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{className:"flex items-center space-x-4",children:[C.jsx(CT,{className:"w-5 h-5 text-primary-500"}),C.jsxs("div",{children:[C.jsx("div",{className:"text-sm text-primary-600 dark:text-primary-400",children:L.date.toLocaleDateString("default",{weekday:"long",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})}),C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx("span",{className:"text-xl",children:L.activity.emoji}),C.jsx("span",{className:"text-primary-800 dark:text-primary-200",children:L.activity.name})]})]})]}),C.jsx("button",{onClick:()=>m(L),className:"p-2 text-primary-600 hover:text-primary-800 dark:text-primary-400 dark:hover:text-primary-200",children:C.jsx(PT,{className:"w-5 h-5"})})]})},F))})]}),C.jsx(pg,{isOpen:c,onClose:()=>h(!1),title:"Change Activity",children:C.jsx("div",{className:"space-y-4",children:C.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.map(L=>C.jsxs("button",{onClick:()=>g(L.id),className:`p-3 rounded-lg border ${(a==null?void 0:a.activity.id)===L.id?"border-primary-500 bg-primary-50 dark:bg-primary-900/30":"border-primary-100 dark:border-primary-800 hover:bg-primary-50 dark:hover:bg-primary-900/30"}`,children:[C.jsx("div",{className:"text-2xl mb-1",children:L.emoji}),C.jsx("div",{className:"text-sm text-primary-800 dark:text-primary-200",children:L.name})]},L.id))})})})]})})},bF=()=>{const[t,e]=T.useState(null),[n,r]=T.useState(!1);T.useEffect(()=>{const s=o=>{o.preventDefault(),e(o),r(!0)};return window.addEventListener("beforeinstallprompt",s),()=>{window.removeEventListener("beforeinstallprompt",s)}},[]);const i=async()=>{if(!t)return;t.prompt();const{outcome:s}=await t.userChoice;console.log(s==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),e(null),r(!1)};return n?C.jsx(me.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},className:"fixed bottom-20 left-4 right-4 z-50",children:C.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 mx-auto max-w-sm border border-primary-100 dark:border-primary-800",children:C.jsxs("div",{className:"flex items-center space-x-4",children:[C.jsx("div",{className:"flex-shrink-0",children:C.jsx(Rb,{className:"h-8 w-8 text-primary-500"})}),C.jsxs("div",{className:"flex-1",children:[C.jsx("h3",{className:"text-sm font-medium text-primary-900 dark:text-primary-100",children:"Install Together Time"}),C.jsx("p",{className:"text-xs text-primary-500 dark:text-primary-400",children:"Add to your home screen for quick access"})]}),C.jsx("button",{onClick:i,className:"flex-shrink-0 bg-primary-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-primary-600 transition-colors",children:"Install"})]})})}):null};function DF(){const{settings:t,updateSettings:e}=ja(),[n,r]=T.useState(!0),[i,s]=T.useState(!1),[o,a]=T.useState("home");T.useEffect(()=>{const f=setTimeout(()=>{r(!1),u()},4e3);return()=>clearTimeout(f)},[]);const u=()=>{if(t.onboardingShownCount>=3)return;const g=t.lastOnboardingDate?new Date(t.lastOnboardingDate).getTime():0;(Date.now()-g>=6048e5||!t.lastOnboardingDate)&&(s(!0),e({onboardingShownCount:t.onboardingShownCount+1,lastOnboardingDate:new Date().toISOString()}))},c=()=>{s(!1),e({hasCompletedOnboarding:!0})},h=()=>{switch(o){case"home":return C.jsx(P1,{});case"activities":return C.jsx(EF,{});case"wheel":return C.jsx(IF,{});case"calendar":return C.jsx(RF,{});case"settings":return C.jsx(kF,{});default:return C.jsx(P1,{})}};return C.jsx($L,{children:C.jsxs(BL,{children:[n&&C.jsx(ib,{}),!n&&i&&C.jsx(hb,{onComplete:c}),C.jsxs("div",{className:`min-h-screen transition-colors duration-200 ${t.theme==="dark"?"bg-gradient-to-b from-gray-900 to-gray-800":"bg-gradient-to-b from-primary-50 to-secondary-50"} pb-16`,children:[C.jsxs("header",{className:"py-6 px-4",children:[C.jsx("h1",{className:"text-center text-4xl font-display text-primary-600 dark:text-primary-400",children:"Together Time Evening"}),C.jsx("p",{className:"text-center mt-2 text-primary-400 dark:text-primary-500",children:"Make every moment count "})]}),C.jsx("main",{className:"max-w-screen-xl mx-auto px-4 mt-8",children:h()})]}),C.jsx(zb,{activeTab:o,onTabChange:a}),C.jsx(bF,{})]})})}const NF=()=>C.jsx(DP,{children:C.jsx(DF,{})});bd.createRoot(document.getElementById("root")).render(C.jsx(X.StrictMode,{children:C.jsx(NF,{})}));export{VF as c,aA as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}